if (typeof HdGame == "undefined") {
	HdGame = {}
}(function(b) {
	b.isUrl = function(h, g) {
		if (typeof g == "undefined") {
			g = true
		}
		if (g && h.length >= 1 && h.charAt(0) == "/") {
			return true
		}
		if (g && h.length >= 1 && h.charAt(0) == "#") {
			return true
		}
		var f = /^(\w+:).+/;
		var e = f.test(h);
		return e
	};
	b.fixUrl = function(e, f) {
		if (b.isUrl(e, f)) {
			return e
		}
		return "http://" + e
	};
	b.encodeHtml = function(e) {
		return e && e.replace ? (e.replace(/&/g, "&amp;").replace(/ /g, "&nbsp;").replace(/\b&nbsp;+/g, " ").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\\/g, "&#92;").replace(/\'/g, "&#39;").replace(/\"/g, "&quot;").replace(/\n/g, "<br/>").replace(/\r/g, "")) : e
	};
	b.encodeUrl = function(e) {
		return typeof e === "undefined" ? "" : encodeURIComponent(e)
	};
	b.decodeHtml = function(e) {
		return e && e.replace ? (e.replace(/&nbsp;/gi, " ").replace(/&lt;/gi, "<").replace(/&gt;/g, ">").replace(/&#92;/gi, "\\").replace(/&#39;/gi, "'").replace(/&quot;/gi, '"').replace(/\<br\/\>/gi, "\n").replace(/&amp;/gi, "&")) : e
	};
	b.decodeUrl = function(e) {
		return typeof e === "undefined" ? "" : decodeURIComponent(e)
	};
	b.checkCharacterLen = function(e, j) {
		var k = j.val().replace(/[^\x00-\xff]/g, "**");
		var h = k.trim().length;
		var g = 0;
		for (var f = 0; f < h; f++) {
			g++
		}
		return g > e
	};
	b.checkTextLength = function(q, h, m) {
		var j;
		if (m) {
			j = h
		} else {
			j = h.val()
		}
		var o = j.replace(/[^\x00-\xff]/g, "**");
		var f = o.length;
		if (f < q) {
			return {
				isOverflow: false
			}
		}
		var l = o.substr(0, q);
		var k = 0;
		var n = "";
		for (var g = 0; g < l.length; g++) {
			var e = l.substr(g, 1);
			if (e == "*") {
				k++
			}
		}
		var p = 0;
		if (k % 2 == 0) {
			p = k / 2 + (q * 1 - k);
			n = j.substr(0, p)
		} else {
			p = (k - 1) / 2 + (q * 1 - k);
			n = j.substr(0, p)
		}
		if (m) {
			return {
				isOverflow: true,
				returnValue: n
			}
		} else {
			h.val(n)
		}
	};
	b.fadOut = function(f, g) {
		if (f.is(":visible")) {
			g && g();
			return
		}
		f.css("opacity", 0);
		f.show();
		f.addClass("poupFadIn");
		setTimeout(function() {
			f.removeClass("poupFadIn");
			f.css("opacity", 1);
			g && g()
		}, 200)
	};
	b.fadIn = function(f, g) {
		if (f.is(":hidden")) {
			g && g();
			return
		}
		f.css("opacity", 1);
		f.addClass("poupFadOut");
		setTimeout(function() {
			f.hide();
			f.removeClass("poupFadOut");
			f.css("opacity", 1);
			g && g()
		}, 200)
	};
	b.statusMsg = function(g, f, h, e, k) {
		if ((g == 4 || (g == 6 && g_config.style != 50)) && g_config.showHelpGuide) {
			$("#helpGuideBox").show();
			return
		}
		if ((g == 7 || g == 8) && g_config.showHelpGuide) {
			$("#helpGuideBox").show();
			return
		}
		var j = "",
			i;
		if (typeof g === "string") {
			j = g
		} else {
			if (g === 1) {
				j = "活动尚未开始";
				i = "开始时间为" + g_config.startTime
			} else {
				if (g === 3) {
					j = "活动已结束";
					i = "请关注期待下次活动"
				} else {
					if (g === 4) {
						j = "您今天已经没有抽奖机会了";
						i = "明天可继续抽奖哦";
						if (!h) {
							h = "14rem"
						}
					} else {
						if (g === 5) {
							j = "未授权用户无法进行游戏。"
						} else {
							if (g === 6) {
								j = "您的抽奖机会已经用完"
							} else {
								if (g === 7) {
									j = "您今天已经没有参与机会了";
									i = "明天可继续参与哦"
								} else {
									if (g === 8) {
										j = "您的参与机会已经用完"
									}
								}
							}
						}
					}
				}
			}
		}
		if (i && typeof f !== "string") {
			f = i
		}
		b.showMsg(j, f, e, k)
	};
	b.showMsg = (function() {
		var h = '<div class="weui-mask" style="z-index:5000"></div><div class="weui-dialog"><div class="weui-dialog__bd"><span id="statusTip-msg"></span><br/><span id="sTime"></span></div><div class="weui-dialog__ft"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">知道了</a></div></div>';
		var e = $(h);
		var f = e.find("#statusTip-msg");
		var g = e.find("#sTime");
		var i = false;
		return function(l, k, j, m) {
			f.html(l);
			j && e.find(".weui-dialog__btn").text(j);
			if (typeof k === "string") {
				g.text(k)
			} else {
				if (k) {
					g.hide()
				} else {
					g.show()
				}
			}
			if (!i) {
				$("body").append(e);
				i = true
			}
			b.fadOut(e);
			$(".weui-dialog__btn").one("touchstart", function() {
				m && m();
				b.fadIn(e, function() {
					e.remove();
					i = false
				});
				return false
			})
		}
	})();
	b.showMsgToast = function(i, f, g) {
		var h = '<div id="toast" style="z-index: 2000; position: relative; display: none;"><div class="weui-mask" style="z-index: 2000;"></div><div class="weui-dialog" style="z-index: 2000;"><div class="weui-dialog__bd"><span>' + i + '</span></div><div class="weui-dialog__ft"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">知道了</a></div></div></div>';
		var e = $(h);
		$("body").append(e);
		e.fadeIn(200);
		e.find(".weui-dialog__btn").one("touchstart", function() {
			e.fadeOut(200, function() {
				e.remove()
			})
		})
	};
	b.showSuccessToast = function(h, f) {
		f = f || 2000;
		$("#toast").remove();
		var g = '<div id="toast" style="z-index: 5000; position: relative; display: none;"><div class="weui-mask_transparent"></div><div class="weui-toast"><i class="weui-icon-success-no-circle weui-icon_toast"></i><p class="weui-toast__content">' + h + "</p></div></div>";
		var e = $(g);
		$("body").append(e);
		e.fadeIn(150);
		setTimeout(function() {
			e.fadeOut(150, function() {
				e.remove()
			})
		}, f)
	};
	b.unPublishMsg = function() {
		//var e = '<div class="unPublish">活动尚未发布，当前仅供预览</div>';
		//$("body").prepend(e)
	};
	b.share = function() {
		if ($("#sharePanel").length > 0) {
			$("#sharePanel").show();
			return
		}
		$("body").append("<div id='sharePanel'></div>");
		$("#sharePanel").on("touchend touchstart", function() {
			$(this).hide()
		})
	};
	b.favorite = function() {
		b.logDog(1000045, 2);
		if ((g_config.wxAward && g_config.wxAward.genewxcard)) {
			return
		}
		if ($("#favoritePanel").length > 0) {
			$("#favoritePanel").show();
			return
		}
		$("body").append("<div id='favoritePanel'></div>");
		$("#favoritePanel").on("touchend touchstart", function(f) {
			setTimeout(function() {
				$("#favoritePanel").hide()
			}, 500)
		})
	};
	b.getLevelName = function(e) {
		switch (parseInt(e)) {
		case 1:
			return "一等奖";
		case 2:
			return "二等奖";
		case 3:
			return "三等奖";
		case 4:
			return "四等奖";
		case 5:
			return "五等奖";
		case 6:
			return "六等奖";
		case 7:
			return "七等奖";
		case 8:
			return "八等奖";
		case 900:
			return "安慰奖"
		}
	};
	b.getStatusName = function(e) {
		switch (e) {
		case 0:
			return "未领取";
		case 1:
			return "已核销";
		case 2:
			return "未核销";
		case 3:
			return "已过期";
		case 4:
			return "已作废";
		case 5:
			return "已失效"
		}
	};
	(function() {
		var g = null;
		_lastWrap = null, _stop = function(h) {
			if (h) {
				if (h.data("_guide")) {
					h.data("_guide").remove();
					h.removeData("_guide")
				}
			} else {
				if (g) {
					g.remove();
					g = null;
					_lastWrap && _lastWrap.removeData("_guide")
				}
			}
		};
		var f = function(l, n, o) {
				var i = $('<div class="ball-scale-multiple"><div></div><div></div><div></div></div>');
				if (l.css("position") === "static") {
					l.css("position", "relative")
				}
				if (typeof n === "object" && typeof n.x !== "undefined" && typeof n.y !== "undefined" && typeof n.w !== "undefined" && typeof n.h !== "undefined") {
					var m = Math.min(n.w, n.h) * (o || 1);
					i.children().css({
						width: m,
						height: m
					});
					i.css({
						left: n.x + (n.w - m) / 2,
						top: n.y + (n.h - m) / 2
					})
				} else {
					o = o || 0.8;
					var h = l.outerHeight();
					var j = l.outerWidth();
					var k = (n === "w" ? j / 2 : (n === "h" ? h / 2 : (n === "min" ? Math.min(h, j) / 2 : Math.max(h, j) / 2))) * o;
					i.css({
						left: j / 2 - k,
						top: h / 2 - k
					});
					i.children().css({
						width: 2 * k,
						height: 2 * k
					})
				}
				l.append(i);
				g = i;
				l.data("_guide", i);
				_lastWrap = l
			};
		var e = {
			play: f,
			stop: _stop
		};
		b.Guide = e
	})();
	b.homePoup = function(e) {
		if (e == 1) {
			$("#rankBox").show()
		} else {
			if (e == 3) {
				$("#awardBox").show()
			} else {
				if (e == 4) {
					$("#regAwardBox").show()
				}
			}
		}
		if (g_config.createTime < 1494376826000) {
			$("#poupInfoBox").show()
		}
	};
	b.poupAjaxComplete = function(e) {
		var f = $(".ajaxLoadBar");
		f.addClass("ajaxComplete");
		$(".ajaxLoadBg").hide();
		setTimeout(function() {
			f.removeClass("ajaxLoad");
			f.removeClass("ajaxComplete")
		}, 500)
	};
	(function() {
		var s = {
			rankUrl: "",
			awardUrl: "",
			getRegAwardUrl: "",
			getStoreUrl: "",
			mhaveScore: 0,
			openId: "",
			gameId: 0,
		};
		var i = {
			menuLen: "",
			slideBarWidth: "",
			slideBarMaxWidth: "",
			marginLeft: false,
			hasInitEvent: false,
		};
		typeof g_config !== "undefined" && (g_config.firstTouchRank = g_config.firstTouchAward = g_config.firstTouchWinList = true);
		var r = {
			isLoad: false,
			isRankAll: false,
			start: 0,
			num: 0,
			limit: 99
		};
		b.initChangePoup = function(t) {
			t && $.extend(s, t);
			if (_manage) {
				$("#Award_Round_Dot").show()
			}
			i.menuLen = 0;
			$(".poupTitleBox .poupTitleMune").each(function() {
				if ($(this).css("display") == "block") {
					$(this).removeClass("hide");
					i.menuLen++
				} else {
					$(this).addClass("hide")
				}
			});
			$("#awardBox").css("height", $("#poupInfoBox").height() - $(".poupHead").height());
			$(".popTabBox").css("width", 16 * g_rem * i.menuLen);
			var u = null;
			$(".poupTitleBox .poupTitleMune").not(".hide").each(function(y, A) {
				var x = $(this).attr("_flag");
				for (var z = 0; z < $("#poupInfoBox .poupMain").length; z++) {
					var w = $("#poupInfoBox .poupMain").eq(z);
					if (w.attr("_flag") == x) {
						w.show();
						if (u) {
							u = u.add(w)
						} else {
							u = w
						}
						return
					}
				}
			});
			var v = _manage ? $(window).width() : (100 / i.menuLen + "%");
			$("#poupInfoBox .poupMain").css("width", v);
			$("#poupInfoBox .poupMain").not(u).hide();
			$(".poupTitleBox .poupTitleMune,.poupTitleBox .slideBarTip").css("width", 13.25 / i.menuLen + "rem");
			i.slideBarWidth = parseInt($(".poupTitleBox .poupTitleMune").css("width"));
			i.slideBarMaxWidth = parseInt($(".poupTitleBox .slideBarTip").css("max-width"));
			if (i.slideBarWidth > i.slideBarMaxWidth) {
				i.marginLeft = true
			}
			$("#poupInfoBox .poupMain").height($("#poupInfoBox").height() - $(".poupHead").outerHeight() - g_rem);
			if (!i.hasInitEvent) {
				o();
				i.hasInitEvent = true
			}
		};

		function o() {
			var u = _manage ? "click" : "touchstart";
			var t = $(".poupTitleBox .poupTitleMune");
			t.on(u, function() {
				if (t.length == t.not(".hide").length) {
					var w = $(this).index()
				} else {
					var w = t.filter(":visible").index(this);
					w = w < 0 ? 0 : w
				}
				var v = parseInt($(this).attr("_flag"));
				b.changePoup(v, w)
			});
			$("#rankBox").scroll(function(v) {
				if (_manage) {
					return
				}
				if (r.isClose) {
					return
				}
				if ($("#rankHeight").height() - $("#rankHeight").height() / 3 <= $(window).height() + $("#rankBox").scrollTop()) {
					if (!r.isLoad && !r.isRankAll) {
						r.isLoad = true;
						l()
					}
				}
			})
		}
		b.changePoup = function(B, z, x) {
			r.isClose = false;
			var w = document.getElementById("ruleImg");
			var u = w.x + w.clientWidth / 2 + "px ";
			var t = w.y + w.clientHeight / 2 + "px";
			$("#poupInfoBox").css({
				"transform-origin": u + t,
				"-webkit-transform-origin": u + t
			});
			$("#poupInfoBox").show();
			$(".poupTitleMune").removeClass("checked");
			if (B == 5 && s.hasReport == true) {
				$("#informResultBox h2").text("你已经投诉过了！");
				$("#informResultBox").show()
			} else {
				if (typeof z === "number") {
					var y = $(".poupTitleMune").filter(":visible").eq(z);
					y.addClass("checked");
					B = parseInt(y.attr("_flag"))
				} else {
					$(".poupTitleBox .poupTitleMune").filter(":visible").each(function(D, E) {
						if ($.trim($(this).attr("_flag")) == B) {
							z = D;
							$(this).addClass("checked")
						}
					})
				}
			}
			if (_manage) {
				var A = $.trim($(".poupTitleMune").eq(z).find(".item").text());
				var C = parent.$("#editActive .topBar .column");
				if (A == "活动说明") {
					A = "活动奖品"
				}
				var v = g_config.isAngular ? -28 : 2;
				C.each(function() {
					var D = $.trim($(this).find(".name").text());
					if (D == A) {
						parent.$(".topBar .transitionPanel").css("left", ($(this).offset().left + v) + "px");
						C.removeClass("checked");
						$(this).addClass("checked")
					}
				});
				if (g_config.style == 48) {
					$(".body").scrollTop(0).css("overflow-y", "hidden")
				}
			}
			if (i.marginLeft) {
				$(".poupSlideBar .slideBarTip").css("left", ((13.25 / i.menuLen) * z + (i.slideBarWidth - i.slideBarMaxWidth) / 40) + "rem")
			} else {
				$(".poupSlideBar .slideBarTip").css("left", (13.25 / i.menuLen) * z + "rem")
			}
			g(B, x);
			$(".popTabBox").css("left", -$(window).width() * z)
		};

		function g(u, t) {
			var w = $("#poupInfoBox").attr("class");
			if (!_manage) {
				var v = t;
				if (!v) {
					var w = $("#poupInfoBox").attr("class");
					if (w == "" || w == undefined) {
						$("#poupInfoBox").addClass("enlarge")
					}
				} else {
					$("#poupInfoBox").addClass("retrans")
				}
				$(".gameBox,.home,.body").addClass("overflow-y-hidden");
				if (g_config.style != 55) {
					g_config.showSkillSup && $(".bottomSkill").hide()
				}
			} else {
				$("#poupInfoBox").addClass("retrans")
			}
			$(".poupClose").off("touchend");
			setTimeout(function() {
				$(".poupClose").on("touchend", function(z) {
					z.preventDefault();
					z.stopPropagation();
					g_config.firstTouchRank = true;
					g_config.firstTouchAward = true;
					g_config.firstTouchWinList = true;
					r.isClose = true;
					r.isRankAll = false;
					r.num = r.start = 0;
					$("#rankInfoBox").html("");
					$(".poupTitleMune").removeClass("checked");
					$(".poupTitleMune").eq(0).addClass("checked");
					var y = $("#poupInfoBox");
					if (!_manage) {
						y.removeClass("enlarge");
						y.removeClass("retrans");
						if (w == "retrans") {
							y.hide()
						}
						var x = t;
						if (x) {
							y.hide()
						}
						$(".gameBox,.home,.body").removeClass("overflow-y-hidden");
						g_config.showSkillSup && $(".bottomSkill").show();
						if (g_config.style == 60 || g_config.style == 45) {
							if ($(".notFullLuckOne").is(":visible")) {
								g_config.showSkillSup && $(".gameBgBox .bottomSkill").hide()
							}
						}
					}
					setTimeout(function() {
						$(".popTabBox").css("left", 0);
						$(".poupSlideBar .slideBarTip").css("left", (i.slideBarWidth - i.slideBarMaxWidth) / 40 + "rem")
					}, 100);
					hg.fire("hidePoup", u)
				})
			}, 300);
			if (u === 1) {
				f(u)
			} else {
				if (u === 2) {
					j(u)
				} else {
					if (u === 3) {
						n(u)
					} else {
						if (u === 4) {
							k(u)
						} else {
							if (u === 5) {
								m(u)
							}
						}
					}
				}
			}
			hg.fire("showPoup", u)
		}
		function q() {
			var t = $("#loadingTxt").html();
			if (t === "正在加载中..." || t === "") {
				$("#loadingTxt").html("正在加载中.")
			} else {
				if (t === "正在加载中.") {
					$("#loadingTxt").html("正在加载中..")
				} else {
					$("#loadingTxt").html("正在加载中...")
				}
			}
			r.timer = setTimeout(arguments.callee, 300)
		}
		function p() {
			$("#rankHeight").find("#loadingTxt").remove();
			clearTimeout(r.timer)
		}
		function l(t) {
			r.isLoad = true;
			b.showLoadToast("数据加载中", 90);
			$.ajax({
				type: "post",
				url: s.rankUrl + "&start=" + r.start + "&limit=" + r.limit + "&playerId=" + g_config.playerId,
				error: function() {
					if (r.num == 0) {
						b.poupAjaxComplete(t)
					}
					r.isLoad = false
				},
				success: function(w) {
					b.tlog("creatRankList", w);
					var x = $.parseJSON(w);
					var u = x.rankList;
					var y = x.rank;
					var v = $("#rankInfoBox");
					if (x.isRankAll) {
						r.isRankAll = true
					}
					if (r.num == 0) {
						b.poupAjaxComplete(t)
					}
					setTimeout(function() {
						if (y == 0) {
							$("#rank").text("无")
						} else {
							$("#rank").text(y + "位")
						}
						b.logDog(1000010);
						var z = u.length;
						if (z == 0) {
							$("#noRank").show()
						} else {
							$("#rankMain").show();
							for (var B = 0; B < u.length; B++) {
								if (r.start + B + 1 >= rankShowNum) {
									r.isRankAll = true
								}
								var H = u[B].info.length > 0 ? $.parseJSON(u[B].info).headImg : null;
								var A = H == null ? "" : "src='" + H + "'";
								var G = "";
								if (g_config.isDoubleGame) {
									var C = u[B].info.length > 0 ? $.parseJSON(u[B].info).headImgB : null;
									var F = C == null ? "" : "src='" + C + "'";
									G = '<img class="userImg" ' + F + " />"
								}
								var E = '<tr class="rankInfo"><td>No.' + (r.start + B + 1) + '</td><td><div><img class="userImg" ' + A + " />" + G + '</div></td><td class="userName">' + u[B].name + "</td><td >" + u[B].achievement + '<span class="scoreUnit">' + g_config.scoreUnit + "</span></td></tr>";
								v.append(E)
							}
							if (r.isRankAll && y > rankShowNum) {
								var A = g_config.headImg ? "src='" + g_config.headImg + "'" : "";
								var D = '<tr class="rankInfo" style="line-height:0.85rem"><td colspan="4" style="padding-bottom:0.35rem">......</td></tr><tr class="rankInfo"><td>No.' + y + '</td><td><div><img class="userImg" ' + A + ' /></div></td><td class="userName">' + g_config.userName + "</td><td >" + (g_config.scoreType ? b.currentScore : parseInt(b.currentScore)) + '<span class="scoreUnit">' + g_config.scoreUnit + "</span></td></tr>";
								v.append(D)
							}
						}
						r.isLoad = false;
						r.num++;
						r.start = r.num * (r.limit + 1);
						hg.fire("updateRankList", x)
					}, 500);
					if (r.num == 0) {
						g_config.firstTouchRank = false
					}
					b.hideLoadToast(90)
				}
			})
		}
		function f(z) {
			if (g_config.isDoubleGame) {
				$("#rankBox").addClass("isDoubleGame")
			}
			if (_manage) {
				var A = [{
					name: "magazine",
					achievement: 999
				}, {
					name: "hubert",
					achievement: 999
				}, {
					name: "lvox",
					achievement: 999
				}, {
					name: "hth",
					achievement: 999
				}, {
					name: "monica",
					achievement: 999
				}, {
					name: "lzz",
					achievement: 999
				}, {
					name: "william",
					achievement: 999
				}, {
					name: "sinki",
					achievement: 999
				}, {
					name: "weiqizhou",
					achievement: 999
				}, {
					name: "candyq",
					achievement: 999
				}, {
					name: "jarvis",
					achievement: 999
				}, {
					name: "johnvi",
					achievement: 999
				}, {
					name: "tomato",
					achievement: 999
				}, {
					name: "tina",
					achievement: 999
				}];
				$("#rankMain").show();
				b.homePoup(z);
				var v = $("#rankInfoBox");
				v.find(".rankInfo").remove();
				var x = "";
				y = typeof(y) == "undefined" || y.trim() == "" ? g_config.scoreUnit : y;
				if (g_config.isDoubleGame) {
					x = '<div class="userImg manImg"></div><div class="userImg girlImg"></div>'
				} else {
					x = '<div class="userImg manImg"></div>'
				}
				var t = window.parent.document;
				var u = $(t).find("#setGameUnit").val();
				var y = typeof(u) == null || u === "" ? g_config.scoreUnit : Fai.encodeHtml($(t).find("#setGameUnit").val());
				for (var w = 0; w < A.length; w++) {
					var B = '<tr class="rankInfo"><td>No.' + (w + 1) + "</td><td>" + x + '</td><td class="userName">' + b.encodeHtml(A[w].name) + "</td><td >" + A[w].achievement + '<span class="scoreUnit">' + y + "</span></td></tr>";
					v.append(B)
				}
				var C = parseInt($("#showRankNum").text()) - 1;
				$("#rankInfoBox tr.rankInfo:gt(" + C + ")").hide()
			} else {
				b.logDog(1000010, 0);
				if (g_config.firstTouchRank) {
					$(".ajaxLoadBg").show();
					$(".ajaxLoadBar").addClass("ajaxLoad");
					b.showLoadToast("数据加载中");
					$("#noRank").hide();
					$("#rankMain").hide();
					l(z);
					b.hideLoadToast()
				}
			}
		}
		function j(t) {
			if (!_manage) {
				b.logDog(1000009);
				if (skillSupportType == 2 || skillSupportType == 3) {
					if (g_config.authVer == HdVerDef.FREE) {
						b.logDog(1000069, 1)
					} else {
						if (g_config.authVer == HdVerDef.BJ) {
							b.logDog(1000069, 3)
						} else {
							if (g_config.authVer == HdVerDef.BY) {
								b.logDog(1000069, 5)
							}
						}
					}
					b.logDog(1000028, 2)
				}
			}
			if (isLimitDraw && (drawTimesLimit == drawTotalLimit)) {
				$("#explaiDrawInfoBox").find(".dayFont").hide();
				$("#explaiDrawInfoBox").find(".drawTotalFont").hide();
				$("#explaiDrawInfoBox").find(".chanceFont").show();
				$("#explaiDrawInfoBox").find(".everyOneFont").show()
			}
			if (!isLimitDraw) {
				$("#explaiDrawInfoBox").find(".drawTotalFont").hide();
				$("#explaiDrawInfoBox").find(".chanceFont").show();
				$("#explaiDrawInfoBox").find(".everyOneFont").show()
			}
			$("#ruleBox").show();
			$("#poupInfoBox").show();
			if (!s.mhaveScore) {
				$("#haveScore").hide()
			}
			if (gameType == 3 && g_config.isCheckPlayTimes && g_config.style != 63) {
				if (isLimitPlay && (playTimesLimit == playTotalLimit)) {
					$("#explainPlayInfoBox").find(".dayFont").hide();
					$("#explainPlayInfoBox").find(".playTotalFont").hide();
					$("#explainPlayInfoBox").find(".chanceFont").show();
					$("#explainPlayInfoBox").find(".everyOneFont").show()
				}
				if (!isLimitPlay) {
					$("#explainPlayInfoBox").find(".playTotalFont").hide();
					$("#explainPlayInfoBox").find(".chanceFont").show();
					$("#explainPlayInfoBox").find(".everyOneFont").show()
				}
				$("#explainPlayInfoBox").show()
			} else {
				$("#explainPlayInfoBox").hide()
			}
		}
		function e(u, t) {
			var v = u.repalce(/-/g, "/");
			v = new Date(v).getTime();
			return v > t
		}
		if (typeof g_config !== "undefined" && g_config.isAngular) {
			var n = function(t) {
					if (!_manage) {
						b.logDog(1000011, 0)
					}
					var v = new Array();
					var u = $("#awardInfo");
					$("#awardInfoBox").css("height", $("#awardBox").height() - $("#awardBox .attentionBox").height() - 18);
					$("#poupInfoBox,#awardBox").show();
					if (!_manage && g_config.showSkillSup) {
						if (g_config.authVer == HdVerDef.FREE) {
							b.logDog(1000069, 0)
						} else {
							if (g_config.authVer == HdVerDef.BJ) {
								b.logDog(1000069, 2)
							} else {
								if (g_config.authVer == HdVerDef.BY) {
									b.logDog(1000069, 4)
								}
							}
						}
						b.logDog(1000028, 1);
						typeof g_config.isAOpenId == "number" && b.logDog(1000115, 1 + g_config.isAOpenId)
					}
					if (g_config.aid == 7171826 && g_config.showSkillSup) {
						b.logDog(1000062, 0)
					} else {
						if (g_config.aid == 8566249 && g_config.showSkillSup) {
							b.logDog(1000067, 0)
						}
					}
					g_config.showMenu && b.logDog(1000036);
					if (_manage) {
						b.showAwardDetail([parent.awardList[0]])
					} else {
						v.push("gameId=", s.gameId);
						v.push("&openId=", s.openId);
						if (g_config.isDoubleGame) {
							v.push("&openIdB=", b.otherOpenId)
						}
						if (g_config.firstTouchAward) {
							$(".ajaxLoadBg").show();
							$(".ajaxLoadBar").addClass("ajaxLoad");
							b.showLoadToast("数据加载中");
							$.ajax({
								type: "post",
								url: s.awardUrl,
								data: v.join(""),
								error: function() {
									b.hideLoadToast();
									b.poupAjaxComplete(t)
								},
								success: function(z) {
									b.hideLoadToast();
									b.poupAjaxComplete(t);
									b.tlog("poupAward", z);
									var w = $.parseJSON(z);
									$("#Award_Round_Dot").hide();
									b.logDog(1000011);
									if (w.success) {
										b.showAwardDetail(w.list)
									} else {
										$("#awardInfo").html('<div style="line-height: 2.6rem; padding-left: 0.05rem;">暂无中奖纪录</div>')
									}
									if (w.userInfo && (w.userInfo.ausername || w.userInfo.aphone || w.userInfo.aadress)) {
										$("#awardContactInfo").show();
										if (w.userInfo.ausername) {
											$("#awardContactInfo .contactName").show();
											$("#awardContactInfo .contactName span").text(w.userInfo.ausername)
										}
										if (w.userInfo.aphone) {
											$("#awardContactInfo .contactPhone").show();
											$("#awardContactInfo .contactPhone span").text(w.userInfo.aphone)
										}
										var y = w.userInfo.aadress && w.userInfo.aadress.replace(/,/g, "");
										if (y) {
											var x = b.checkTextLength(14, y, true);
											if (x.isOverflow) {
												$("#awardContactInfo .contactAddress span").text(x.returnValue + "...")
											} else {
												$("#awardContactInfo .contactAddress span").text(y)
											}
											$("#awardContactInfo .contactAddress").show()
										}
									}
									g_config.firstTouchAward = false
								}
							})
						}
					}
				};
			var h = function(t) {
					if (t._award || !t.awardInfo) {
						return
					}
					var u = g_config.$$awardTypeInfo;
					var v = t._award = $.parseJSON(t.awardInfo);
					v.$type = $.extend(true, {}, u.def, u[v.awardtype]);
					if (v.awardtype == 2 && s.afterWxCard) {
						$.extend(v.$type, v.$type[v.cashtype]);
						if (v.cashtype == 1) {
							$.extend(v.$type, v.$type[v.onlinect])
						}
					}
					if (typeof v.attention == "undefined") {
						v.attention = v.oct ? 2 : 1
					}
					v.$opqrc = v.opqrc;
					if (s.afterWxCard && v.$type.qrcode != "auto") {
						v.$opqrc = v.$type.qrcode
					} else {
						v.$type.btn = ""
					}
					if (v.genewxcard) {
						var w = !t.depositTime || t.depositTime >= new Date().getTime();
						v.$type.collect = w ? "放入微信卡包" : "打开微信卡券"
					}
					t.awardCode = (t.custom && t.custom.length > 0) ? t.custom : (t.code ? t.code : t.code1);
					if (t.anwei) {
						t.awardCode = (t.cusCode && t.cusCode.length > 0) ? t.cusCode : t.code1
					}
					if (t.isTrash) {
						t.codeStatus = 4
					}
				};
			b.showAwardDetail = function(x) {
				var w = $("#awardInfo");
				var y = "";
				w.html("");
				var z = $("#resule-gift-sucImg").data("openCode");
				var B = null;
				for (var v = 0; v < x.length; v++) {
					var t = x[v];
					if (_manage) {
						var u = t.style;
						var D = t.name;
						var A = 1;
						var C = "未核销"
					} else {
						h(t);
						var u = t.awardStyle;
						var A = t.anwei ? t.awardLevel : t.level;
						var D = t.anwei ? t.award : t.awardName;
						var C = b.getStatusName(t.codeStatus);
						if (t._award.genewxcard) {
							$("#awardCollectionBtn").attr("isWxCard", true)
						}
					}
					y += '<div id="codeInfo' + v + '" class="codeInfoBox' + (g_config.isPartners ? " isPartners" : "") + '" _level="' + A + '"><div class="goDetailIcon"></div><div class="djqImgBox"></div><div class="isEmptyAward ellipsis" style="width: 11rem;margin-left:0.6rem;font-size:0.7rem;">' + b.encodeHtml(u) + "：" + b.encodeHtml(D) + '</div><div class="noPartnersBox"><div class="codeperiod" style="margin: 0.25rem 0.6rem;line-height:1.4rem;"><span class="awardTypeName"></span>：<span class="awardBgTime"></span> 至 <span class="awardEndTime"></span></div><div class="awardWrap"></div><div style="color: #ecb208;margin-left:0.6rem;">' + C + "</div></div></div>";
					if (!_manage && z == t.awardCode) {
						B = t
					}
				}
				w.append(y);
				$.each(x, function(E, F) {
					var H = _manage ? F : F._award;
					var G = w.find("#codeInfo" + E);
					b.watch("awardList[0].$type.deadline", H.$type.deadline, function(I) {
						G.find(".awardTypeName").text(I)
					});
					b.watch("awardList[0].cbt", H.cbt, function(I) {
						G.find(".awardBgTime").text(I.substring(0, 10).replace("-", ".").replace("-", "."))
					});
					b.watch("awardList[0].cet", H.cet, function(I) {
						G.find(".awardEndTime").text(I.substring(0, 10).replace("-", ".").replace("-", "."))
					});
					G.data("data", F)
				});
				if (B) {
					b.openAwardDetail(B);
					$("#resule-gift-sucImg").removeData("openCode")
				}
			};
			b.openStoreLocation = function(u) {
				var v = $(u).parent().data("store");
				var t = $.parseJSON(v.point);
				wx.openLocation({
					latitude: t.lat,
					longitude: t.lng,
					name: v.name,
					address: v.address,
					scale: 22,
					infoUrl: ""
				})
			};
			b.openAwardDetail = function(w) {
				var I = $("#awardDetailBox");
				var u = $("#ticketDetailBox");
				var t = {};
				if (_manage) {
					t = w = parent.game.$cAward
				} else {
					if (!w || !w.awardInfo) {
						w = $(this).data("data")
					}
					$(".codeInfoBox.checked").removeClass("checked");
					$(this).addClass("checked");
					h(w);
					t = w._award;
					g_config.award = w;
					g_config.wxAward = t;
					if (g_config.afterLinkModify) {
						if ((b.shouldRegInfo(2, arguments, this) || b.shouldRegInfo(3, arguments, this) || b.shouldRegInfo(4, arguments, this))) {
							return
						}
					} else {
						if (typeof t.continfo !== "undefined") {
							if ((w && ((gameType == 0 || gameType == 4 || gameType == 5) && g_config.wxAward.oplink))) {
								var B = t.continfo;
								var G = B & 1;
								var v = B & 2;
								var F = B & 4;
								var C = G && !g_config.awardUsername;
								var A = v && !g_config.awardPhone;
								var D = F && !g_config.awardAddress;
								if (C || A || D) {
									b.aUserInfo.show(arguments, this);
									return
								}
							}
						} else {
							if (!g_config.awardUsername && !g_config.awardPhone && !g_config.awardAddress && g_config.award && ((gameType == 0 || gameType == 4) && g_config.wxAward.oplink)) {
								b.aUserInfo.show(arguments, this);
								return
							}
						}
					}
					$("#codeStatusBox,#codeStatusInfo").show();
					$("#codeDetailInfoBox").hide();
					if (w.codeStatus == 4) {
						$("#codeStatusBtn").html("已作废");
						$("#codeStatusInfo").html("商家已将该兑奖码设置为作废<br>详情请联系商家")
					} else {
						if (w.codeStatus == 1) {
							$("#codeStatusBtn").html("已核销");
							$("#codeStatusInfo").hide();
							if (t.genewxcard) {
								$("#awardCollectionBtn").hide()
							}
						} else {
							if (w.codeStatus == 5) {
								$("#codeStatusBtn").html("已失效");
								$("#codeStatusInfo").html("红包已失效，详细请联系商家")
							} else {
								if (w.codeStatus == 3) {
									$("#codeStatusBtn").html("已过期");
									$("#codeStatusInfo").hide()
								} else {
									if (w.theGiftDate < 0) {
										$("#codeStatusTips .giftNameA").text(t.$type.collect);
										$("#codeStatusTips .targetDateMin").text(Math.ceil((w.theGiftDate * -1) / (1000 * 60 * 60 * 24)));
										$("#codeStatusInfo").hide();
										$("#codeStatusBtn").html("未到兑奖时间").css("width", "5.5rem");
										$("#codeStatusTips").show()
									} else {
										$("#codeStatusBox").hide();
										$("#codeDetailInfoBox").show()
									}
								}
							}
						}
					}
					var H = w.gameid || w.gameId;
					I.find(".codeImg").attr("src", "http://" + b.gameDomain + "/manage/qrCode.jsp?cmd=qrurl&siteUrl=" + b.encodeUrl(w.awardLevel == 900 ? ("id=" + w.id + "&code=" + w.code1 + "&gameId=" + H) : ("code=" + w.awardCode + "&gameId=" + H)));
					I.find(".code,.copyCode").text(w.awardCode);
					I.find(".code").attr("code", w.code);
					I.find("#awardCusBtnInfo").attr("href", "###").off(".cusBtn");
					if (s.afterWxCard) {
						if (t.$type.sitetype == "url") {
							I.find("#awardCusBtnInfo").attr("href", b.fixUrl(t.cashsite))
						} else {
							if (t.$type.sitetype == "img") {
								if (t.awardtype == 2 && t.cashtype == 1 && t.onlinect == 1) {
									b.createQrImg($("#newAttentionPoup"), t.onlinewxnum)
								} else {
									if (t.awardtype == 5 || (t.awardtype == 2 && t.cashtype == 3)) {
										b.createQrImg($("#newAttentionPoup"), g_config.qrCodeUrl)
									}
								}
								I.find("#awardCusBtnInfo").off(".cusBtn").on("click.cusBtn", function() {
									$("#newAttentionMask").show()
								})
							}
						}
					} else {
						$(".awardCusText").toggle(t.optx);
						I.find("#awardCusTextInfo").text(t.txc)
					}
					if (!s.afterWxCard || !t.$type.btn) {
						b.logDog(1000085);
						if (t.attention == 3) {
							b.createQrImg($("#newAttentionPoup"), t.attentionimg);
							$("#awardCusBtnInfo").off(".cusBtn").on("touchend.cusBtn", function() {
								b.logDog(1000086);
								$("#newAttentionMask").show()
							})
						} else {
							if (t.attention == 2) {
								$("#awardCusBtnInfo").attr("href", b.fixUrl(t.btl))
							}
						}
						$("#awardCusBtnBox").toggle(t.attention != 1)
					} else {
						$("#awardCusBtnBox").show()
					}
					b.wxConfig.setWxShareUrlArg(["fromFav", w.awardCode]);
					b.logDog(1000056);
					b.logDog(1000045, 1);
					$("#awardDeailBg").show();
					setTimeout(function() {
						$("#awardDeailBg").hide()
					}, 800)
				}
				function z(M, P, R) {
					if (!M || M.length == 0) {
						I.find("#useStoreBox").addClass("addressHide");
						return
					}
					I.find("#useStoreBox").removeClass("addressHide");
					if (P != undefined && R != undefined) {
						for (var N = 0; N < M.length; N++) {
							var T = M[N];
							var U = $.parseJSON(T.point);
							var L = b.computeDistance(P, R, U.lat, U.lng);
							T.distance = parseInt(L);
							b.tlog("distance", T.distance)
						}
						M.sort(function(W, V) {
							return W.distance - V.distance
						})
					} else {
						M.sort(function(W, V) {
							return V.id - W.id
						})
					}
					var S = M[0];
					var O = $("#useStoreBox");
					O.find(".storeInfoBox").data("store", S);
					y(S, O.find(".storeInfoBox"));
					if (M.length > 1) {
						O.find(".storeNumText").show();
						O.find("#storeNum").text(M.length);
						O.find(".moreBtn").show()
					} else {
						O.find(".storeNumText").hide();
						O.find(".moreBtn").hide()
					}
					if (!_manage && M.length > 1) {
						var K = $("#storeListBox .list");
						K.empty();
						for (var N = 0; N < M.length; N++) {
							var T = M[N];
							var J = '<div class="storeInfoBox"><div class="locationBtn" onclick="HdGame.openStoreLocation(this)"></div><div class="info"><div class="storeNameBox"><span id="storeName"></span><span id="distance"></span></div><div class="storeAdress"></div></div></div>';
							var Q = $(J);
							Q.data("store", T);
							y(T, Q);
							K.append(Q)
						}
					}
				}
				function y(L, M) {
					var K = "";
					var J = "";
					var O = "";
					if (L) {
						K = L.name;
						J = x(L);
						var N = L.distance;
						if (N && N > 0) {
							if (N > 1000) {
								O = parseInt(N / 1000) + "千米"
							} else {
								O = N + "米"
							}
						}
					}
					M.find("#storeName").text(K);
					M.find(".storeAdress").text(J);
					M.find("#distance").text(O)
				}
				function x(J) {
					if (J.province == "北京" || J.province == "天津" || J.province == "上海" || J.province == "重庆") {
						return J.city + J.county + J.address
					}
					return J.province + J.city + J.county + J.address
				}
				var E = b.watch.bind(["award", "game.$cAward", t], ["type", "game.$cAward.$type", t.$type]);
				E("{award}.cbt", function(J) {
					I.find(".awardCodeTime .codeBgTime").text(J.substring(0, 10).replace("-", ".").replace("-", "."));
					if (s.afterWxCard) {
						u.find(".itemList .beginTime").html(J.substring(0, 10))
					}
				});
				E("{award}.cet", function(J) {
					I.find(".awardCodeTime .codeEndTime").text(J.substring(0, 10).replace("-", ".").replace("-", "."));
					if (s.afterWxCard) {
						u.find(".itemList .endTime").html(J.substring(0, 10))
					}
				});
				E("{award}.name", function(J) {
					I.find(".awardName").text(J)
				});
				E("{award}.stl", function(J) {
					I.find(".awardSubTitle").text(J)
				});
				E("{type}.showsitebox?{award}.opti:{type}.opti", function(J) {
					I.find(".codeOptInfo").text(J)
				});
				E("{type}.deadline", function(J) {
					I.find(".awardCodeTime em").text(J)
				});
				E("{type}.collect", function(J) {
					$("#awardCollectionBtn").text(J)
				});
				E("{type}.codename", function(J) {
					$("#codeName").text(J)
				});
				E("{type}.btn||{award}.btn", function(J) {
					I.find(".awardCusBtn .text").text(J)
				});
				E("{award}.$opqrc", function(J) {
					if (typeof J === "undefined" || J) {
						$("#awardDetailBox .codeImg ").show()
					} else {
						$("#awardDetailBox .codeImg,#awardDetailBox .codeDetailImgBox").hide()
					}
				});
				if (s.afterWxCard) {
					E("{type}.details", function(J) {
						u.find(".awardCusText .text,.ticketitle .text").html(J)
					});
					E("{type}.sitetype == 'text'", function(J) {
						I.find("#useStoreBox").toggleClass("addressHide", !J);
						u.find(".addressLine").toggleClass("addressHide", !J)
					});
					E("{type}.site", function(J) {
						u.find(".itemList .titleAdress").text(J)
					});
					E("{type}.term", function(J) {
						u.find(".itemList .timelimit").parents(".itemList").toggle(J)
					});
					E("{award}.cashsite", function(J) {
						u.find(".itemList .address").text(J)
					});
					E("{type}.notice", function(J) {
						u.find(".itemList .titleNotice").text(J)
					});
					E("{award}.servicepho", function(J) {
						if (_manage) {
							I.find(".servicePhone .text").html("客服电话" + (!J ? "（未开启）" : ""))
						} else {
							I.find(".servicePhone").toggle( !! J);
							I.find(".servicePhone").parent("a").attr("href", "tel:" + J)
						}
						I.find(".servicePhone .phoneText").text(J)
					});
					E("{award}.tlmt", function(J) {
						u.find(".itemList .timelimit").text(b.changeTimeLimit(J))
					});
					E("{award}.cashinfo", function(J) {
						u.find(".itemList .notice>pre").text(J)
					});
					E("{award}.storeType != 1", function(J) {
						if (J) {
							I.find("#useStoreBox").removeClass("hide");
							u.find(".addressLine").addClass("hide")
						} else {
							I.find("#useStoreBox").addClass("hide");
							u.find(".addressLine").removeClass("hide")
						}
					});
					E("{award}.$$useStoreList", function(J) {
						if (!_manage && (!J || J.length <= 0)) {
							return
						}
						if (_manage || g_config.test) {
							z(J)
						} else {
							wx.getLocation({
								type: "gcj02",
								success: function(K) {
									var M = K.latitude;
									var L = K.longitude;
									z(J, M, L)
								},
								fail: function(K) {
									b.statusMsg("当前微信版本不支持定位或没开启定位服务，请联系活动主办单位", "");
									z(J)
								},
								cancel: function() {
									b.statusMsg("用户拒绝了授权地理位置信息", "");
									z(J)
								}
							})
						}
					})
				} else {
					E("{award}.txn", function(J) {
						I.find(".awardCusText .text").text(J)
					})
				}
				$("#awardDetailBox").show()
			}
		} else {}
		b.shouldRegInfo = function(v, x, z) {
			var t = false;
			if (g_config.afterLinkModify) {
				if (g_config.linkInfoType != 1 && g_config.linkInfoType == v) {
					t = true
				}
				if (b._isZhuliPlayer && (g_config.linkInfoType == 2 || g_config.linkInfoType == 3)) {
					t = false
				}
				if (v == 4 && !g_config.linkInfoAll) {
					if (g_config.award) {
						var u = g_config.award.level;
						var y = g_config.award.awardName;
						if (u == 900) {
							u = g_config.award.awardLevel;
							t = g_config.comfort.comOplink
						} else {
							t = g_config.awardList[u - 1].oplink
						}
					}
				}
			} else {
				if ((gameType == 3 || gameType == 1) && g_config.openAwardLinkNoDraw) {
					t = true
				}
			}
			if (t && !w()) {
				b.aUserInfo.show(x, z);
				return true
			}
			return false;

			function w() {
				if (!g_config.awardUsername && !g_config.awardPhone && !g_config.awardAddress) {
					return false
				}
				return true
			}
		};

		function k(t) {
			$("#regAwardBox").show();
			if (_manage) {
				b.homePoup(t);
				var x = [];
				var w = ["lvox、hubert", '<span style="color:#fff000">magazine</span>、tina', "monica、hth"];
				var v = $(".regAwardList");
				v.find(".playerName").html("");
				v.each(function(y) {
					$(this).find(".playerName").html(w[y])
				})
			} else {
				b.logDog(1000034);
				var u = s.getRegAwardUrl;
				if (g_config.isDoubleGame) {
					var u = u + "&openIdB=" + b.otherOpenId
				}
				if (g_config.firstTouchWinList) {
					$(".ajaxLoadBg").show();
					$(".ajaxLoadBar").addClass("ajaxLoad");
					b.showLoadToast("数据加载中");
					$.ajax({
						type: "post",
						url: u,
						error: function() {
							b.hideLoadToast();
							b.poupAjaxComplete(t)
						},
						success: function(y) {
							b.hideLoadToast();
							b.tlog("poupRegAward", y);
							var z = $.parseJSON(y);
							b.poupAjaxComplete(t);
							$("#Mingdan_Round_Dot").hide();
							setTimeout(function() {
								var D = [];
								var A = $(".regAwardList");
								A.find(".playerName").html("");
								$("#noRegAward").hide();
								$("#regAwardMain").show();
								for (var B = 0; B < A.length; B++) {
									var C = {};
									C.name = [];
									D.push(C)
								}
								if (z.length == 0) {
									$("#noRegAward").show();
									$("#regAwardMain").hide();
									return
								}
								$(z).each(function() {
									var G = $(this)[0].isSelf;
									var J = $(this)[0].awardLevel;
									var F = J - 1;
									if (J == 900) {
										F = A.length - 1
									}
									var I = D[F];
									var H = "";
									if (G) {
										H = 'style="color:#fff000;"'
									}
									var E = "<span " + H + ">" + $(this)[0].name + "</span>";
									if (I && I.name) {
										I.name.push(E)
									}
								});
								for (var B = 0; B < D.length; B++) {
									A.eq(B).find(".playerName").append(D[B].name.join("、"))
								}
								$("#regAwardMain").show()
							}, 500);
							g_config.firstTouchWinList = false
						}
					})
				}
			}
		}
		function m(t) {
			$("#informBox").show();
			$(".unPublish").hide();
			$("#inform-reason-page").show();
			$("#inform-desc-page").hide();
			$("#next-inform-btn").hide();
			$("#inform-reason-box .reasonItem").removeClass("checked");
			$("#informResultBox .confirm-btn").off("touchend").on("touchend", function() {
				event.preventDefault();
				if (!_manage) {
					$(".gameBox,.home,.body").removeClass("overflow-y-hidden");
					g_config.showSkillSup && $(".bottomSkill").show()
				}
				$("#informBox").hide();
				$("#informResultBox").hide();
				$(".unPublish").show();
				$("#inform-reason-box .reasonItem").removeClass("checked");
				$("#inform-reason-box .reasonItem em").hide();
				$("#poupInfoBox").hide();
				hg.fire("hidePoup", t)
			});
			$("#cancel-inform-btn").off("touchend").on("touchend", function() {
				event.preventDefault();
				var u = $("#poupInfoBox");
				u.removeClass("poupFadIn").addClass("poupFadOut");
				if (!_manage) {
					$(".gameBox,.home,.body").removeClass("overflow-y-hidden");
					g_config.showSkillSup && $(".bottomSkill").show()
				}
				u.hide();
				$(".unPublish").show();
				$("#informBox").hide();
				hg.fire("hidePoup", t)
			})
		}
		$("#inform-reason-box .reasonItem").on("touchend", function() {
			var t = $(this).attr("_index");
			b.logDog(1000068, t);
			$("#inform-reason-box .reasonItem").removeClass("checked");
			$(this).addClass("checked");
			$("#next-inform-btn").show()
		});
		$("#next-inform-btn").on("touchend", function() {
			$("#inform-reason-page").hide();
			$("#inform-desc-page").show();
			$("#spxdPage").addClass("imp-hide")
		});
		$("#inform-desc-box #informDesc").on("load input", function() {
			var t = $("#inform-desc-box #informDesc").val();
			t = $.trim(t);
			$("#inform-desc-box #informDesc-counter span").text(t.length)
		});
		$("#submit-inform-btn").on("touchend", function() {
			if (!s.hasReport) {
				var u = $("#inform-desc-box #informDesc").val();
				u = $.trim(u);
				if (u == null || u == "") {
					b.showMsgToast("描述不能为空", 2000);
					return
				} else {
					if (u.length > 50) {
						b.showMsgToast("填写超出限制", 2000);
						return
					} else {
						$.ajax({
							type: "post",
							url: s.informUrl,
							error: function(v) {
								b.tlog("submit-inform-btn-err", v)
							},
							success: function(v) {
								b.tlog("submit-inform-btn", v);
								s.hasReport = true;
								$("#informResultBox h3").text("投诉成功");
								$("#informResultBox").show()
							}
						})
					}
				}
			} else {
				$("#informResultBox h3").text("你已经投诉过了！");
				$("#informResultBox").show()
			}
			var t = $("#poupInfoBox");
			t.removeClass("poupFadIn").addClass("poupFadOut");
			setTimeout(function() {
				$("#spxdPage").removeClass("imp-hide")
			}, 400)
		});
		$("#awardContactInfo .updateBtn").on("touchend", function() {
			b.aUserInfo.show()
		})
	})();
	(function() {
		var h = false;
		b.sortRuleBox = {
			init: f,
			addBtn: e,
		};

		function f(k) {
			var j = $("#ruleBox");
			var i = j.find(".poupLine").sort(function(n, l) {
				var o = k.indexOf($(n).data("sortkey"));
				var m = k.indexOf($(l).data("sortkey"));
				if (o == -1 || m == -1) {
					return 0
				}
				return o > m ? 1 : -1
			});
			j.append(i)
		}
		function e() {
			b.addModuleLayer("#ruleBox .poupLine", {
				name: "下移",
				onshow: function(i) {
					var j = i.target;
					if (j.next().length == 0) {
						$(this).hide()
					} else {
						$(this).show()
					}
				},
				onclick: function(j) {
					var k = j.data.target;
					var i = k.next();
					if (i.length != 0) {
						g(k, i)
					}
				}
			});
			b.addModuleLayer("#ruleBox .poupLine", {
				name: "上移",
				onshow: function(i) {
					var j = i.target;
					if (j.prev().length == 0) {
						$(this).hide()
					} else {
						$(this).show()
					}
				},
				onclick: function(j) {
					var k = j.data.target;
					var i = k.prev();
					if (i.length != 0) {
						g(i, k)
					}
				}
			})
		}
		function g(k, j) {
			if (h) {
				return
			}
			h = true;
			b.removeAllEditLayer();
			var i = k.height();
			var l = j.height();
			k.animate({
				top: l + 0.7 * g_rem
			}, 300);
			j.animate({
				top: -i - 0.7 * g_rem
			}, 300, function() {
				h = false;
				k.insertAfter(j);
				k.css("top", 0);
				j.css("top", 0)
			})
		}
	})();
	(function() {
		var e = {};
		e.show = function(f, h) {
			if (!b.lastDisplayStatus) {
				b.lastDisplayStatus = {
					gameBox: $(".gameBox").is(":visible"),
					home: $(".home").is(":visible")
				}
			}
			b.tlog(b.lastDisplayStatus);
			$(".gameBgBox,.home").hide();
			$("#awardUserInfoBg").data({
				_aUserInfoArg: f,
				_aUserInfoThis: h
			}).show();
			var g = g_config.ajaxUrl.replace("/ajax/", "");
			if ($("#contactInputIframe").length == 0) {
				$("#awardUserInfoBg").append('<iframe id="contactInputIframe" frameborder="0" scrolling="yes" src="' + g + "/contactInfo2.jsp?afterLinkModify=" + g_config.afterLinkModify + "&awardLinkMsg=" + b.encodeUrl(b._awardLinkMsg) + '" style="height: 100%; width: 100%;"></iframe>')
			}
			$("#spxdPage").addClass("spxdPageHide");
			$("#nameInput").val(g_config.awardUsername);
			$("#phoneInput").val(g_config.awardPhone);
			$("#addressInput").text(g_config.awardAddress);
			if (!f) {
				$("#awardUserInfoBg").removeData("_aUserInfoArg")
			}
		};
		e.hide = function() {
			b.tlog(b.lastDisplayStatus);
			if (b.lastDisplayStatus) {
				if (b.lastDisplayStatus.gameBox) {
					$(".gameBgBox").show()
				}
				if (b.lastDisplayStatus.home) {
					$(".home").show()
				}
				b.lastDisplayStatus = null
			}
			var g = $("#awardUserInfoBg");
			g.hide();
			$("#spxdPage").removeClass("spxdPageHide");
			var j = g.data("_aUserInfoArg");
			if (!j) {
				return
			}
			if (f(j)) {
				var i = j[2];
				if (i && i.info) {
					i.info = $.parseJSON(i.info);
					i.info.ausername = g_config.awardUsername;
					i.info.aphone = g_config.awardPhone;
					i.info.aadress = g_config.awardAddress;
					i.info = $.toJSON(i.info)
				}
			}
			e.afterUserInfoHide = true;
			var h = g.data("_aUserInfoThis");
			j.callee.apply(h, j);
			setTimeout(function() {
				e.afterUserInfoHide = false
			}, 0);
			setTimeout(function() {
				$("#contactInputIframe").remove()
			}, 510);

			function f(k) {
				if (typeof gameOver != "undefined" && k.callee === gameOver) {
					return true
				}
				if (typeof startBtnAjax != "undefined" && k.callee === startBtnAjax) {
					return true
				}
				if (typeof luckDraw != "undefined" && k.callee === luckDraw) {
					return true
				}
				return false
			}
		};
		b.aUserInfo = e
	})();
	b.showLotsWait = function(e, g) {
		var f = $("#lots-wait-Box #lots-wait-hint-num");
		f.text(e);
		$("#lots-wait-Box").show();
		var h = setInterval(function() {
			e--;
			f.text(e);
			if (e <= 0) {
				clearInterval(h);
				$("#lots-wait-Box").hide();
				g()
			}
		}, 1000)
	};
	(function() {
		var e = Math.max($(window).height() / $(window).width(), $(window).width() / $(window).height()) > 22 / 16;
		var i = {
			startStatus: false,
			exposeFlag: false,
			disable: false,
			result_disable: false,
			gift_disable: false,
		};
		var h = {
			drawType: false,
			home: function() {},
			again: function() {},
			giftInit: function(j) {
				j && j()
			}
		};
		var g = (function() {
			var o = 1.5;
			var l = 0;
			var k, q, p;
			var n, m, j;
			return function(s) {
				if (!i.startStatus) {
					return
				}
				var u = new Date().getTime();
				if ((u - l) > 100) {
					$("input").blur();
					var r = s.accelerationIncludingGravity;
					l = u;
					k = r.x;
					q = r.y;
					p = r.z;
					var t = Math.sqrt(k * k + q * q + p * p) / Math.sqrt(n * n + m * m + j * j);
					if (t > o) {
						i.startStatus = false;
						h.giftInit(function(v) {
							hg.sound.play("yiy");
							setTimeout(function() {
								i.showGift(v)
							}, 1500)
						})
					}
					n = k;
					m = q;
					j = p
				}
			}
		})();
		var f = {};
		i.initArg = function(j) {
			if (this.disable) {
				return
			}
			$.extend(f, j)
		};
		i.init = function(j) {
			if (this.disable) {
				return
			}
			$.extend(h, j);
			$.extend(h, f);
			this.giftBox = $("#resule-gift-box");
			this.resuleBox = $(".resuleBox");
			this.statusBox = $("#resule-status-box");
			var n = this;
			var k = $("#resule-status-lots").width();
			var m = $("#resule-status-lots").height();
			var p = $("#resule-status-lots").attr("src");
			var o = $("#lots-wait-img").width();
			var l = $("#lots-wait-img").height();
			$("#lots-wait-img").css({
				width: k / (6.15 * g_rem) * o,
				height: m / (12.4 * g_rem) * l,
				"background-image": 'url("' + p + '")'
			});
			if (b.currentScore >= g_config.scoreSet && g_config.scoreSet != "") {
				b.isplaySucess = true
			} else {
				b.isplaySucess = false
			}
			$(".resule-status-home , .resule-gift-home, .resule-gift-home2").on("touchend", function() {
				event.preventDefault();
				event.stopPropagation();
				if (_manage) {
					return
				}
				b.logDog(1000015);
				b.fadIn(n.resuleBox, function() {
					n.giftBox.hide();
					n.statusBox.hide();
					$(".gameBox,.home,.body").removeClass("overflow-y-hidden");
					if (g_config.showSkillSup) {
						b.logDog(1000028, 0);
						$(".bottomSkill").show();
						if (g_config.aid == 7171826) {
							b.logDog(1000062, 2)
						} else {
							if (g_config.aid == 8566249) {
								b.logDog(1000067, 2)
							}
						}
					}
				});
				h.home()
			});
			$("#resule-status-lotsHand .waitDrawBtn").off("touchend").on("touchend", function() {
				i.startStatus = false;
				h.giftInit(function(q) {
					n.showGift(q)
				})
			});
			$(".resule-gift-draw").off("touchend").on("touchend", function() {
				if (_manage) {
					return
				}
				window.addEventListener("devicemotion", g, false);
				i.exposeFlag && b.logDog(1000025, 29);
				i.exposeFlag && b.logDog(1000026, 29);
				if (n.resuleArg.isLimitDrawTotal && n.resuleArg.totalCount === 0) {
					b.statusMsg(6);
					return
				} else {
					if (n.resuleArg.count === 1) {
						b.statusMsg(4);
						if (!g_config.showHelpGuide) {
							h.home()
						}
						return
					}
				}
				$("#resule-status-scrollWrap,#resule-gift-box").hide();
				$("#resule-status-lotsBox,#resule-status-box").show();
				setTimeout(function() {
					i.startStatus = true;
					n.resuleArg.count > 0 && n.resuleArg.count--
				}, 1000);
				clearTimeout(b.lotTimer);
				$("#resule-status-lotsHand .shakeHand,#resule-status-lotsHand .shakeTxt").show();
				$("#resule-status-lotsHand .waitDrawBtn").hide();
				b.lotTimer = setTimeout(function() {
					if (drawStatusLuckDraw) {
						$("#resule-status-lotsHand .shakeHand,#resule-status-lotsHand .shakeTxt").hide();
						$("#resule-status-lotsHand .waitDrawBtn").show()
					}
				}, 5000);
				i.exposeFlag = false
			});
			if ((h.drawType === 0 || h.drawType === 2) && g_config.style != 61) {
				$(".resule-gift-home").css({
					width: "10rem",
					height: "2rem",
					"line-height": "2rem"
				});
				$(".resule-gift-home2").css({
					width: "4.75rem",
					height: "2rem",
					"line-height": "2rem"
				});
				this.giftBox.find(".resule-gift-seeRank").remove();
				this.show = this.showGift
			} else {
				if (h.drawType === 1 || g_config.style == 61) {
					$(".resule-status-seeRank,.resule-gift-seeRank").on("touchstart", function() {
						event.preventDefault();
						event.stopPropagation();
						if (_manage) {
							return
						}
						window.showRank()
					});
					$(".resule-status-again").on("touchstart", function() {
						event.preventDefault();
						event.stopPropagation();
						if (_manage) {
							return
						}
						b.logDog(1000016);
						if (gameType == 3 && g_config.isCheckPlayTimes && PlayInfo.getTotalRemainTimes() <= 0) {
							b.statusMsg(8);
							return
						}
						if (gameType == 3 && g_config.isCheckPlayTimes && PlayInfo.getTodayRemainTimes() <= 0) {
							b.statusMsg(7);
							return
						}
						$(".gameBox,.home,.body").removeClass("overflow-y-hidden");
						if (!g_config.isDoubleGame) {
							b.fadIn(n.resuleBox, function() {
								n.giftBox.hide();
								n.statusBox.hide()
							})
						}
						h.again()
					});
					hg.sound.load(_resRoot + "/image/yaoyiyao.wav", "yiy");
					window.addEventListener("devicemotion", g, false);
					if (m_debug || g_config.test) {
						$("#resule-status-lotsHand").on("touchstart", function() {
							i.startStatus = false;
							h.giftInit(function(q) {
								n.showGift(q)
							})
						})
					}
					this.giftEvent = function() {
						if (_manage) {
							return
						}
						if (g_config.afterLinkModify && b.shouldRegInfo(3, arguments, this)) {
							return
						}
						i.exposeFlag && b.logDog(1000014);
						if (n.resuleArg.isLimitDrawTotal && n.resuleArg.totalCount === 0) {
							b.statusMsg(6);
							return
						} else {
							if (n.resuleArg.count === 0) {
								b.statusMsg(4);
								return
							}
						}
						$("#resule-status-scrollWrap").hide();
						$("#resule-status-lotsBox").show();
						$("#resule-status-lotsHand .shakeHand,#resule-status-lotsHand .shakeTxt").show();
						$("#resule-status-lotsHand .waitDrawBtn").hide();
						b.resulePoup.statusBox.show();
						b.resulePoup.resuleBox.show();
						i.startStatus = true;
						b.lotTimer = setTimeout(function() {
							if (drawStatusLuckDraw) {
								$("#resule-status-lotsHand .shakeHand,#resule-status-lotsHand .shakeTxt").hide();
								$("#resule-status-lotsHand .waitDrawBtn").show()
							}
						}, 5000);
						i.exposeFlag = false
					};
					$(".resule-status-gift").on("touchstart", this.giftEvent);
					this.regEvent = function() {
						if (_manage) {
							return
						}
						if (b.shouldRegInfo(3, arguments, this)) {
							return
						}
						b.logDog(1000032);
						$(".ajaxLoadBg").show();
						$(".ajaxLoadBar").addClass("ajaxLoad");
						b.showLoadToast("数据加载中");
						var q = h.regUrl;
						if (g_config.isDoubleGame) {
							q += "&openIdB=" + b.otherOpenId
						}
						$.ajax({
							type: "post",
							url: q,
							error: function() {
								b.hideLoadToast();
								b.otherAjaxComplete()
							},
							success: function(s) {
								b.hideLoadToast();
								var r = $.parseJSON(s);
								b.otherAjaxComplete();
								if (r.isOutofTestNum) {
									b.statusMsg("活动尚未发布", "最多测试人数为100人！");
									return
								}
								if (!r.isOutofRegNum) {
									b.isReg = true;
									var r = $.parseJSON(s);
									if (r.success) {
										$(".resule-foot-one .resule-status-again").html("继续刷记录");
										$(".resule-foot-one .resule-status-reg").hide();
										$(".resule-foot-one .resule-status-again").show();
										$("#resule-status-count").hide();
										$("#resule-sucReg").show()
									}
								} else {
									b.statusMsg("报名人数已经满了")
								}
							}
						})
					};
					$(".resule-status-reg").on("touchstart", this.regEvent);
					this.show = this.showResult
				}
			}
		};
		i.showResult = function(m) {
			if (this.disable || this.result_disable) {
				return
			}
			var l = {
				isSuc: false,
				gameScore: 0,
				minScore: 0,
				bestScore: 10,
				rank: 10,
				count: 3,
				beat: 99,
				notreal: false,
				gameType: 0
			};
			var k = $.extend(l, m);
			this.resuleArg = k;
			!k.notreal && (b.currentRank = k.rank);
			!k.notreal && (b.currentScore = k.bestScore);
			b.wxConfig.setWxShareByStatus();
			$("#resule-status-scrollWrap").show();
			$("#resule-status-lotsBox,#resule-gift-box").hide();
			$(".resule-one-button").hide();
			$("#resule-status-playinfo").hide();
			this.statusBox.show();
			b.fadOut(this.resuleBox);
			var n = $(".resuleArg");
			var j = k.isReg;
			if (!k.notreal && g_config.sortType == (k.gameScore >= g_config.drawLimitDef)) {
				if (typeof b.oss_aof === "undefined") {
					b.oss_aof = 0
				}
				b.oss_aof++;
				if (b.oss_aof >= 2) {
					b.logDog(1000033, g_config.failSrcId);
					b.oss_aof = 0
				}
			}
			$("#resule-status-scrollWrap").css("height", $(window).height() - $("#resule-status-box .attentionBox").height() - 1.5 * g_rem);
			if (!_manage && g_config.showSkillSup) {
				if (g_config.authVer == HdVerDef.FREE) {
					b.logDog(1000069, 0)
				} else {
					if (g_config.authVer == HdVerDef.BJ) {
						b.logDog(1000069, 2)
					} else {
						if (g_config.authVer == HdVerDef.BY) {
							b.logDog(1000069, 4)
						}
					}
				}
				b.logDog(1000028, 1);
				typeof g_config.isAOpenId == "number" && b.logDog(1000115, 1 + g_config.isAOpenId)
			}
			if (g_config.aid == 7171826 && g_config.showSkillSup) {
				b.logDog(1000062, 0)
			} else {
				if (g_config.aid == 8566249 && g_config.showSkillSup) {
					b.logDog(1000067, 0)
				}
			}
			if (k.gameType == 1 || k.gameType == 3) {
				g_config.showMenu && b.logDog(1000036)
			}
			if (!_manage) {
				$(".gameBox,.home,.body").addClass("overflow-y-hidden");
				$(".bottomSkill").is(":visible") && $(".bottomSkill").hide()
			}
			if (k.gameType == 3) {
				$("#resule-foot-box").css("padding-bottom", "1rem");
				if (k.gameScore == "fail") {
					$("#resule-status-bird").show();
					$("#resule-status-ribbon").removeClass("resule-status-ribbon").addClass("resule-status-faiRibbon");
					$("#resule-status-bird").removeClass("resule-status-birdfly").addClass("resule-status-birdfly");
					$("#resule-status-box .resule-bgLight").hide();
					$(".resule-status-userImg").css("border-color", "#B5B5B5");
					$("#resule-status-body .beat-Percent").hide();
					if (k.rank == 0) {} else {
						$("#resule-status-body .result-scoreUnit").show()
					}
					n.eq(0).text("无");
					if (n.eq(2).text().length == 0) {
						n.eq(2).text(k.bestScore);
						n.eq(3).text(k.rank > 0 ? k.rank : "无")
					} else {
						if (n.eq(0).text() == "无") {
							$("#resule-status-body .youraward .result-scoreUnit").hide()
						} else {
							$("#resule-status-body .result-scoreUnit").show()
						}
					}
					b.isplaySucess = false
				} else {
					$("#resule-status-bird").hide();
					$(".resule-status-userImg").css("border-color", "#70D572");
					$("#resule-status-ribbon").removeClass("resule-status-faiRibbon").addClass("resule-status-ribbon");
					$("#resule-status-box .resule-bgLight").show();
					$("#resule-status-body .beat-Percent span").text(k.beat);
					$("#resule-status-body .beat-Percent").show();
					n.eq(0).text(k.gameScore);
					n.eq(2).text(k.bestScore);
					n.eq(3).text(k.rank);
					$("#resule-status-body .result-scoreUnit").show();
					b.isplaySucess = true
				}
				$(".resule-status-minscore").hide();
				$("#resule-status-count").hide();
				$(".resule-foot-one .resule-status-gift").hide();
				$(".resule-foot-one .resule-status-reg").hide();
				$(".resule-foot-one .resule-status-again").show();
				$(".resule-foot-two .resule-status-again").hide();
				$(".resule-foot-two .resule-status-home").show();
				if (gameType == 3 && g_config.isCheckPlayTimes) {
					$("#resule-status-playinfo").show()
				} else {
					$("#rank_showRule").show()
				}
			} else {
				if (k.gameScore === "fail") {
					$(".resuleArg-fail").text(k.minScore);
					$("#resule-status-body").hide();
					$("#resule-status-other").show()
				} else {
					$("#resule-status-body").show();
					$("#resule-status-other").hide()
				}
				if (k.isSuc) {
					b.isplaySucess = true;
					$("#resule-status-bird").hide();
					$("#resule-status-ribbon").removeClass("resule-status-faiRibbon").addClass("resule-status-ribbon");
					$(".resule-status-userImg").css("border-color", "#70D572");
					$(".resule-status-minscore").hide();
					$("#resule-status-count").show();
					if (k.gameType == 0) {
						$(".resule-foot-one .resule-status-gift").show();
						$(".resule-foot-one .resule-status-again").hide();
						$(".resule-foot-two .resule-status-again").show();
						$(".resule-foot-two .resule-status-home").hide();
						b.logDog(1000027)
					} else {
						if (k.gameType == 4) {
							$(".resule-foot-one .resule-status-send").show();
							$(".resule-foot-two .resule-status-again").hide();
							$(".resule-foot-two .resule-status-home").show();
							$("#resule-status-count").hide()
						} else {
							if (k.gameType == 1) {
								$("#resule-status-count").hide();
								$("#resule-foot-box").css("margin-top", "0.6rem");
								$(".resule-foot-two .resule-status-again").hide();
								$(".resule-foot-two .resule-status-home").show();
								b.logDog(1000035);
								if (!j) {
									$(".resule-foot-one .resule-status-reg").show()
								} else {
									$(".resule-foot-one .resule-status-again").html("继续刷记录");
									$(".resule-foot-one .resule-status-reg").hide();
									$(".resule-foot-one .resule-status-again").show();
									$("#resule-sucReg").show()
								}
							}
						}
					}
					i.exposeFlag = true;
					$("#resule-status-box .resule-bgLight").show();
					n.eq(0).text(k.gameScore);
					n.eq(1).text(k.minScore);
					n.eq(2).text(k.bestScore);
					n.eq(3).text(k.rank);
					n.eq(4).text(k.totalCount);
					n.eq(5).text(k.count);
					n.eq(6).text(k.count);
					$("#resule-status-body .dayDrawCount").text(k.count);
					$("#resule-status-body #totalDrawCount").text(k.totalCount);
					$("#msxbSucTip").text("恭喜你获得密室小能手称号！");
					$("#resule-status-body .beat-Percent span").text(k.beat);
					$("#resule-status-body .beat-Percent").show()
				} else {
					$("#resule-status-bird").show();
					$("#resule-status-ribbon").removeClass("resule-status-ribbon").addClass("resule-status-faiRibbon");
					$(".resule-status-userImg").css("border-color", "#B5B5B5");
					$(".resule-status-minscore").show();
					$("#resule-status-count").hide();
					$("#resule-status-box .resule-bgLight").hide();
					$(".resule-foot-one .resule-status-gift").hide();
					$(".resule-foot-one .resule-status-reg").hide();
					$(".resule-foot-one .resule-status-again").show();
					$(".resule-foot-two .resule-status-again").hide();
					$(".resule-foot-two .resule-status-home").show();
					$("#resule-status-bird").removeClass("resule-status-birdfly").addClass("resule-status-birdfly");
					n.eq(0).text(k.gameScore);
					n.eq(1).text(k.minScore);
					n.eq(2).text(k.bestScore);
					n.eq(3).text(k.rank);
					n.eq(4).text(k.count);
					$("#resule-status-body .beat-Percent").hide();
					b.isplaySucess = false
				}
			}
			hg.fire("showResult", k, n)
		};
		i.showGift = function(m) {
			if (this.disable || this.gift_disable) {
				return
			}
			var k = {
				isSuc: false,
				giftName: "",
				giftStyle: "",
				giftCode: 0,
				giftImage: "",
				awardImageW: "6rem",
				awardImageH: "6rem",
				awardTypeNum: 0,
				awardIndex: 1,
				genewxcard: false
			};
			var r = $.extend({}, k, m);
			if (this.statusBox) {
				b.fadIn(this.statusBox)
			}
			$("#resule-gift-sucImg").data("openCode", r.giftCode);
			b.fadOut(this.resuleBox);
			b.fadOut(this.giftBox);
			if ((gameType == 0 || gameType == 4 || gameType == 5) && !_manage) {
				var s = $(".cannotGetThePriceBox").height();
				var j = $(".resuleBox").height() - $("#resule-gift-box").find(".attentionBox").height() - 2.5 * g_rem;
				if (s > j) {
					$(".cannotGetThePriceBox").height(j);
					var n = 16 * g_rem - parseFloat($("#faiImgBox img").css("left"));
					var l = j - parseFloat($("#faiImgBox img").css("top"));
					var p = $("#faiImgBox img").width() / $("#faiImgBox img").height();
					var q = $("#faiImgBox img").height();
					if (q > l) {
						if ((l * p) > n) {
							$("#faiImgBox img").height(n / p).width(n)
						} else {
							$("#faiImgBox img").height(l).width(l * p)
						}
					}
				}
			}
			$(".TellToOther").toggle(r.isSuc);
			$(".menuAgain,.menuBack,.backListen,.repeatDraw,.TellToOther").css({
				bottom: $("#resule-gift-box").find(".attentionBox").height(),
				"line-height": "1.9rem"
			});
			if ($(".menuAgain").length > 0) {
				$("#resule-gift-scrollWrap").css("height", $(window).height() - $("#resule-gift-box .attentionBox").height() - $(".menuAgain").outerHeight(true) - 1.6 * g_rem)
			} else {
				$("#resule-gift-scrollWrap").css("height", $(window).height() - $("#resule-gift-box .attentionBox").height() - $(".menuBtnBox").outerHeight(true) - 1.6 * g_rem)
			}
			var o = $(".gifArg");
			if (!_manage && g_config.showSkillSup) {
				if (g_config.authVer == HdVerDef.FREE) {
					b.logDog(1000069, 0)
				} else {
					if (g_config.authVer == HdVerDef.BJ) {
						b.logDog(1000069, 2)
					} else {
						if (g_config.authVer == HdVerDef.BY) {
							b.logDog(1000069, 4)
						}
					}
				}
				b.logDog(1000028, 1);
				typeof g_config.isAOpenId == "number" && b.logDog(1000115, 1 + g_config.isAOpenId)
			}
			if (g_config.aid == 7171826 && g_config.showSkillSup) {
				b.logDog(1000062, 0)
			} else {
				if (g_config.aid == 8566249 && g_config.showSkillSup) {
					b.logDog(1000067, 0)
				}
			}
			g_config.showMenu && b.logDog(1000036);
			if (r.isSuc) {
				$("#resule-gift-box").css("height", "auto");
				$("#resule-gift-scrollWrap").show();
				$("#faiImgBox").hide();
				$("#Award_Round_Dot").css("display", "inline-block");
				b.currentAward = r.giftName;
				b.currentAwardStyle = r.giftStyle;
				if (g_config.style != 58 && g_config.style != 59 && g_config.style != 60 && g_config.style != 61 && g_config.style != 62 && g_config.style != 63) {
					b.wxConfig.setWxShareByStatus()
				}
				this.hasGift = true;
				o.eq(0).text(r.giftStyle);
				o.eq(1).text(r.giftName);
				$("#resule-gift-sucImg").css({
					width: r.awardImageW,
					height: r.awardImageH,
					margin: "1.6rem auto"
				});
				$("#lightPoint").css("top", parseFloat(r.awardImageH) / 2 + 1.8 + "rem");
				$("#click-view").css("top", parseFloat(r.awardImageH) / 2 + 2.5 + "rem");
				if (r.awardIndex == 900) {
					$("#resule-gift-sucImg").attr("src", _manage ? r.giftImage : g_config.comfort.comimg)
				} else {
					if (!g_config.award) {
						g_config.award = g_config.awardList[r.awardIndex - 1];
						g_config.wxAward = g_config.awardList[r.awardIndex - 1]
					}
					$("#resule-gift-sucImg").attr("src", _manage ? r.giftImage : g_config.awardList[r.awardIndex - 1].aimg)
				}
				b.logDog(1000003, 0);
				b.logObjDog(1000092, 3, g_config.gameId);
				if (!_manage) {
					$(".gameBox,.home,.body").addClass("overflow-y-hidden");
					$(".bottomSkill").is(":visible") && $(".bottomSkill").hide()
				}
			} else {
				$("#resule-gift-box").css("height", $(window).height() - $("#resule-gift-box .attentionBox").height());
				$("#resule-gift-scrollWrap,#resule-status-lotsBox").hide();
				$("#faiImgBox").show()
			}
			if (g_config.haveAward) {
				$("#myAwardBtn").show()
			}
		};
		b.resulePoup = i
	})();
	b.otherAjaxComplete = function() {
		var e = top.$(".ajaxLoadBar");
		e.addClass("ajaxComplete");
		setTimeout(function() {
			e.removeClass("ajaxLoad");
			e.removeClass("ajaxComplete");
			top.$(".ajaxLoadBg").hide()
		}, 500)
	};
	(function() {
		var l = true;
		b.moduleLayer = {
			isSelected: false,
			selectedElem: null,
			isDrag: false,
			isCancel: true,
			isScroll: false,
			offsetParent: null
		};
		var k = (function() {
			var m = 1;
			return function(n) {
				var o = n.data("layerId");
				if (!o) {
					o = "layerId-" + m;
					n.addClass(o);
					n.data("layerId", o);
					m++
				}
			}
		})();

		function g(n) {
			var o = $("." + n);
			var p = ["Left", "Right", "Top", "Bottom"];
			var m = "";
			$.each(p, function(q, r) {
				if ($("#" + n + "moveFrame" + r).length == 0) {
					m += '<div id="' + n + "moveFrame" + r + '" class="moveFrame" style="border-' + r.toLowerCase() + '-width:1px"></div>'
				}
			});
			if (m) {
				$("body").append(m);
				h(o)
			}
			$(".moveFrame").each(function(q, r) {
				if ($(this).attr("id").indexOf(n) != -1) {
					$(this).css({
						borderColor: "#dcdcdc",
						background: "transparent"
					})
				}
			})
		}
		function h(m, r) {
			var n = m.data("layerId");
			var o = m.offset().left;
			var v = m.offset().top;
			var s = m.outerWidth();
			var p = m.outerHeight();
			if (b.moduleLayer.isScroll && (b.moduleLayer.isSelected && b.moduleLayer.selectedElem[0] == m[0])) {
				if (m[0].nodeName == "DIV") {
					v = m.position().top + parseInt(m.css("marginTop")) + m.parent().scrollTop()
				} else {
					if (m[0].nodeName == "IMG") {
						v = m.offset().top
					}
				}
			}
			$("#" + n + "moveFrameLeft").css({
				left: o,
				top: v,
				width: 0,
				height: p,
				borderLeftWidth: 1
			});
			$("#" + n + "moveFrameRight").css({
				left: o + s - 1,
				top: v,
				width: 0,
				height: p,
				borderRightWidth: 1
			});
			$("#" + n + "moveFrameTop").css({
				left: o,
				top: v,
				width: s,
				height: 0,
				borderTopWidth: 1
			});
			$("#" + n + "moveFrameBottom").css({
				left: o,
				top: v + p - 1,
				width: s,
				height: 0,
				borderBottomWidth: 1
			});
			if (r) {
				var x = m.closest(".ui-wrapper");
				if (x.length == 0) {
					x = m
				}
				var u = x.find(".recoverBtn");
				var q = false;
				if (s < 2 * u.width()) {
					q = true
				}
				if (p < 2 * u.height()) {
					q = true
				}
				if (q && !m.data("_minRecoverBtn")) {
					m.data("_minRecoverBtn", true);
					x.find(".ui-resizable-imgTopRightTip").css({
						backgroundPositionX: 0,
						backgroundPositionY: 11,
						right: -11,
						top: -11
					});
					x.find(".ui-resizable-imgTopLeftTip").css({
						backgroundPositionX: 11,
						backgroundPositionY: 11,
						left: -11,
						top: -11
					});
					x.find(".ui-resizable-imgBottomLeftTip").css({
						backgroundPositionX: 11,
						backgroundPositionY: 0,
						left: -11,
						bottom: -11
					});
					x.find(".ui-resizable-imgBottomRightTip").css({
						backgroundPositionX: 0,
						backgroundPositionY: 0,
						right: -11,
						bottom: -11
					});
					u.css("right", -24)
				} else {
					if (m.data("_minRecoverBtn")) {
						m.data("_minRecoverBtn", false);
						x.find(".ui-resizable-imgTopRightTip").css({
							backgroundPositionX: 11,
							backgroundPositionY: 0,
							right: 0,
							top: 0
						});
						x.find(".ui-resizable-imgTopLeftTip").css({
							backgroundPositionX: 0,
							backgroundPositionY: 0,
							left: 0,
							top: 0
						});
						x.find(".ui-resizable-imgBottomLeftTip").css({
							backgroundPositionX: 0,
							backgroundPositionY: 11,
							left: 0,
							bottom: 0
						});
						x.find(".ui-resizable-imgBottomRightTip").css({
							backgroundPositionX: 11,
							backgroundPositionY: 11,
							right: 0,
							bottom: 0
						});
						u.css("right", 3)
					}
				}
			}
		}
		b.removeMoveFrame = function(m) {
			$("#" + m + "moveFrameLeft,#" + m + "moveFrameRight,#" + m + "moveFrameTop,#" + m + "moveFrameBottom").remove();
			$$("#imgSizeShow").hide()
		};
		b.removeAllEditLayer = function() {
			$(".moveFrame").remove();
			$(".moduleLayer").remove();
			$(".recoverBtn").hide();
			$(".ui-resizable-handle").hide();
			if (b.moduleLayer.selectedElem) {
				if (b.moduleLayer.selectedElem[0].nodeName == "IMG") {
					if (b.moduleLayer.selectedElem.attr("id") == "tree3") {
						b.moduleLayer.selectedElem.css("z-index", b.moduleLayer.selectedElem.data("z-index"));
						b.moduleLayer.offsetParent.css("z-index", $("#tree1").data("z-index"))
					} else {
						b.moduleLayer.offsetParent.css("z-index", b.moduleLayer.selectedElem.data("z-index"))
					}
				} else {
					b.moduleLayer.selectedElem.css("z-index", b.moduleLayer.selectedElem.data("z-index"))
				}
				b.moduleLayer.selectedElem = null;
				b.moduleLayer.offsetParent = null
			}
			b.moduleLayer.isSelected = false;
			b.moduleLayer.isScroll = false
		};
		b.initModuleLayer = f(function(p, o, r, n, q, s, m) {
			k(p);
			p.on("selectstart", function() {
				return false
			});
			p.attr("title", "点击后编辑");
			p.addClass("defBgColor");
			p.data("mouseover", function(u) {
				if ($(this).css("cursor") !== "move") {
					$(this).css("cursor", "pointer")
				}
				if (($(this).hasClass("codeOptInfo") && ($(this).text() == "复制口令发送到公众号" || $(this).text() == "复制券码发送到公众号")) || (($(this).find(".text").css("display") == "inline" && ($(".codeOptInfo").text() == "复制口令发送到公众号" || $(".codeOptInfo").text() == "复制券码发送到公众号")) && !$(this).hasClass("servicePhone"))) {
					$(this).css("cursor", "default")
				}
				if ($(this).data("moduleLayerDisable")) {
					$(this).attr("title", "");
					return
				}
				var t = $(this).data("layerId");
				if (!$(this).data("hd-moduleLayerList")) {
					$(this).attr("title", "")
				}
				clearTimeout($(this).data("initModuleTimer"));
				if (b.ResizeDoc || $("#" + t + "moduleLayer").length > 0 || $(this).hasClass("answerItem") || $(this).hasClass("answer") || $(this).hasClass("thePcEgg") || $(this).attr("id") == "shake") {
					return
				}
				g(t)
			});
			p.off("mouseover").off("mouseleave").on("mouseover", p.data("mouseover")).on("mouseleave", function(u) {
				var t = $(this).data("layerId");
				$(this).data("initModuleTimer", setTimeout(function() {
					if ((!b.ResizeDoc && !b.moduleLayer.isSelected) || (b.moduleLayer.isSelected && (b.moduleLayer.selectedElem[0] != u.target && b.moduleLayer.selectedElem[0] != $(u.target).closest("." + t)[0]))) {
						b.removeMoveFrame(t);
						$("#" + t + "moduleLayer").remove()
					}
				}, 100))
			}).on("click", function(v) {
				v.stopPropagation();
				if ($(this).data("moduleLayerDisable")) {
					return
				}
				if (!b.moduleLayer.isDrag) {
					var t = $(this).parent().data("layerId") ? $(this).parent().data("layerId") : $(this).data("layerId");
					if (!$(this).is(b.moduleLayer.selectedElem)) {
						b.removeAllEditLayer();
						g(t)
					}
					j(t);
					$(".moveFrame").css({
						borderColor: "#2B73BA",
						background: "#79cef9"
					});
					if ($(this).children(".ui-resizable-handle")[0]) {
						$(this).children(".ui-resizable-handle").show()
					} else {
						$(this).siblings(".ui-resizable-handle").show()
					}
					if ($(this).attr("resize") == 1 || $(this).parent().attr("resize") == 1) {
						$(this).siblings(".recoverBtn").show()
					}
					b.moduleLayer.isSelected = true;
					if (b.moduleLayer.selectedElem) {
						if (b.moduleLayer.selectedElem[0].nodeName == "IMG" && b.moduleLayer.selectedElem.attr("id") != "tree3") {
							b.moduleLayer.offsetParent.css("z-index", b.moduleLayer.selectedElem.data("z-index"))
						} else {
							b.moduleLayer.selectedElem.css("z-index", b.moduleLayer.selectedElem.data("z-index"))
						}
					}
					if ($(this)[0].nodeName == "IMG") {
						if ($(this).hasClass("student") || $(this).hasClass("teacher") || $(this).hasClass("clickBtn")) {
							var u = $(this);
							b.moduleLayer.offsetParent = $(this);
							while (u.parent()[0] != document) {
								if (u.parent().css("z-index") != "auto") {
									b.moduleLayer.offsetParent = u.parent()
								}
								u = u.parent()
							}
						} else {
							b.moduleLayer.offsetParent = $(this).parent()
						}
						$(this).data("z-index", b.moduleLayer.offsetParent.css("z-index"));
						b.moduleLayer.offsetParent.css("z-index", "300")
					} else {
						$(this).data("z-index", $(this).css("z-index")).css("z-index", "300")
					}
					if ($(this).attr("id") == "shake" || $(this).hasClass("editTarget-egg")) {
						b.moduleLayer.selectedElem = $(this).parent();
						return
					}
					if ($(this).attr("id") == "tree1" && parent.$("#editActive").find(".topBar .checked .name").text() == "挑战成功") {
						$("#tree3").data("z-index", $("#tree3").css("z-index")).css("z-index", 200);
						b.moduleLayer.selectedElem = $("#tree3");
						return
					}
					b.moduleLayer.selectedElem = $(this)
				} else {
					b.moduleLayer.isDrag = false
				}
			}).on("dblclick", function() {
				if ($(this).data("moduleLayerDisable")) {
					return
				}
				var u = $(this).data("layerId");
				j(u);
				var t = $("#" + u + "moduleLayer");
				if (t.children().length != 0 && (!q || $(this).find("img")[0] || $(this)[0].nodeName)) {
					var v = t.children().length - 1;
					t.children().eq(v).click()
				} else {
					t.children().each(function(w, x) {
						if ($(x).text() == "样式设置" || $(x).text() == "样式" || $(x).text() == "文字颜色") {
							$(x).click()
						}
					})
				}
			});
			if (m || o != -2) {
				b.addModuleLayer(p, {
					name: typeof m === "string" ? m : "编辑",
					onclick: function(u) {
						b.moduleLayer.isCancel = false;
						setTimeout(function() {
							b.moduleLayer.isCancel = true
						}, 10);
						parent.Edit.showEditByGame.call(u.data.target, o, r, n);
						parent.operateFlagList[17] = true;
						b.logPhoneDog(3);
						if (r == "awardSetting") {
							var t = $(this).data("layerId");
							b.removeMoveFrame(t);
							$("#" + t + "moduleLayer").remove()
						}
						return false
					}
				})
			}
			if (q) {
				b.addModuleLayer(p, {
					name: typeof q === "string" ? q : "样式",
					onclick: function(t) {
						parent.Edit.Css.showCssByGame.call(t.data.target, r, s);
						parent.operateFlagList[21] = true;
						b.logPhoneDog(5);
						return false
					}
				})
			}
			p = null
		});
		b.addModuleLayer = f(function(o, n) {
			var m = o.data("hd-moduleLayerList");
			if (!m) {
				m = []
			}
			m.push(n);
			o.data("hd-moduleLayerList", m)
		});

		function j(n) {
			var r = n + "moduleLayer";
			var s = $("." + n);
			var p = s.data("hd-moduleLayerList");
			if (!p) {
				return
			}
			$("#" + r).remove();
			var m = $("<div id='" + r + "' class='moduleLayer' _mouseIn='0'></div>");
			$("body").append(m);
			for (var t = p.length - 1; t >= 0; t--) {
				var u = p[t];
				if (u && u.onclick) {
					var o;
					if (u.html) {
						o = $(u.html)
					} else {
						var q = u["class"] ? (" " + u["class"]) : "";
						o = $("<a class='item tool" + q + "' hidefocus='true' href='javascript:;'>" + u.name + "</a>")
					}
					m.append(o);
					u.data = u.data || {};
					u.data.target = s;
					o.on("click", u.data, u.onclick);
					u.onshow && u.onshow.call(o, u.data)
				}
			}
			m.css("margin", 0);
			i(s, m);
			m.mouseover(function() {
				clearTimeout(s.data("initModuleTimer"))
			}).mouseleave(function(v) {
				if (!b.moduleLayer.isSelected) {
					s.data("initModuleTimer", setTimeout(function() {
						b.removeMoveFrame(n);
						$("#" + r).remove();
						var w = s.siblings(".ui-resizable-handle,.recoverBtn");
						w = (w.length > 0) ? w : (s.find(".ui-resizable-handle,.recoverBtn"));
						w.siblings(".ui-resizable-handle,.recoverBtn").hide()
					}, 100))
				}
			});
			return m
		}
		function i(p, q) {
			if (!q) {
				q = $(".moduleLayer")
			}
			if (q.length < 1) {
				return
			}
			var m = p.outerWidth();
			var n = p.offset().left + m - q.outerWidth();
			if (n < 0) {
				n = 0
			}
			if (p.offset().left < $(window).width() && p.offset().left + m > $(window).width()) {
				n = $(window).width() - q.outerWidth()
			}
			q.css("left", n);
			var o = (p.offset().top - q.height() - 1);
			if (b.moduleLayer.isScroll) {
				if (p[0].nodeName == "DIV") {
					o = p.position().top - q.height() - 1 + parseInt(p.css("marginTop")) + p.parent().scrollTop()
				} else {
					if (p[0].nodeName == "IMG") {
						o = p.offset().top - q.height() - 1 + parseInt(p.css("marginTop")) + p.parent().scrollTop()
					}
				}
				q.css("top", o)
			} else {
				q.css("top", o > 0 ? o : 0 + "px")
			}
		}
		$("#awardDetailScrollBox").on("scroll", function() {
			b.moduleLayer.isScroll = true;
			if (b.moduleLayer.isSelected) {
				setTimeout(function() {
					var m = b.moduleLayer.selectedElem.data("layerId");
					b.moduleLayer.selectedElem.parent().append($("#" + m + "moduleLayer"));
					b.moduleLayer.selectedElem.parent().append($("#" + m + "moveFrameLeft"));
					b.moduleLayer.selectedElem.parent().append($("#" + m + "moveFrameRight"));
					b.moduleLayer.selectedElem.parent().append($("#" + m + "moveFrameTop"));
					b.moduleLayer.selectedElem.parent().append($("#" + m + "moveFrameBottom"));
					i(b.moduleLayer.selectedElem);
					h(b.moduleLayer.selectedElem)
				}, 10)
			}
		});
		$(".body").on("scroll", function() {
			b.moduleLayer.isScroll = true;
			if (b.moduleLayer.isSelected) {
				setTimeout(function() {
					i(b.moduleLayer.selectedElem);
					h(b.moduleLayer.selectedElem)
				}, 10)
			}
		});
		$("#ruleBox").on("scroll", function() {
			b.moduleLayer.isScroll = true;
			if (b.moduleLayer.isSelected) {
				setTimeout(function() {
					var m = b.moduleLayer.selectedElem.data("layerId");
					$("#ruleBox").append($("#" + m + "moduleLayer"));
					$("#ruleBox").append($("#" + m + "moveFrameLeft"));
					$("#ruleBox").append($("#" + m + "moveFrameRight"));
					$("#ruleBox").append($("#" + m + "moveFrameTop"));
					$("#ruleBox").append($("#" + m + "moveFrameBottom"));
					i(b.moduleLayer.selectedElem);
					h(b.moduleLayer.selectedElem)
				}, 10)
			}
		});
		$(".gameInfoBox").on("scroll", function() {
			b.moduleLayer.isScroll = true;
			if (b.moduleLayer.isSelected) {
				setTimeout(function() {
					i(b.moduleLayer.selectedElem);
					h(b.moduleLayer.selectedElem)
				}, 10)
			}
		});
		$("#resule-gift-scrollWrap").on("scroll", function() {
			b.moduleLayer.isScroll = true;
			if (b.moduleLayer.isSelected) {
				setTimeout(function() {
					i(b.moduleLayer.selectedElem);
					h(b.moduleLayer.selectedElem)
				}, 10)
			}
		});
		b.moduleSlaveImgResize = f(function(p, q, r) {
			var m = r || "body";
			if (p.parents(".home").length > 0 || p.parents(".zlEnterHome").length > 0) {
				m = "#limitRange"
			}
			p.parent("div.ui-wrapper").css({
				padding: "0"
			});
			p.resizable("destroy");
			var n = $(p).parents("div.imgContainer");
			var o = n.find(".slaveImg");
			if (n.length == 0) {
				n = p
			}
			if (o.length == 0) {
				o = p
			}
			k(o);
			o.data("defData", q);
			p.resizable($.extend({
				handles: "n,e,s,w,ne,nw,sw,se",
				autoHide: true,
				maxWidth: 318,
				maxHeight: 504,
				minWidth: 20,
				minHeight: 20,
				aspectRatio: true,
				containment: m,
				alsoResize: p,
				create: function(s, u) {
					var w = $(this);
					var t = 0;
					if (Math.abs(w.width() - parseRemToPx(q.width)) > 1 || Math.abs(w.height() - parseRemToPx(q.height)) > 1) {
						o.attr("resize", 1)
					}
					w.css({
						position: "relative",
						"float": "none",
						"z-index": "100"
					});
					if (w.width() < 40 || w.height() < 40) {
						w.css("padding", "2px")
					} else {
						w.css("padding", "0")
					}
					w.append("<a class='recoverBtn' href='javascript:;'></a>");
					w.find(".recoverBtn").on("click", function(x) {
						$(this).hide();
						o.attr("resize", 0);
						w.add(o).css(q);
						b.logPhoneDog(4);
						o.data("hd-resizable-recover") && o.data("hd-resizable-recover").fireWith(o[0], [x, q]);
						setTimeout(function() {
							i(o);
							h(o, true)
						}, 10)
					});
					w.attr("_from", o.attr("id"));
					(function() {
						var z = [
							["s", "Bottom"],
							["n", "Top"],
							["w", "Left"],
							["e", "Right"]
						];
						for (var y = 0; y < 4; y++) {
							w.children(".ui-resizable-" + z[y][0]).addClass("ui-resizable-img" + z[y][1] + "Tip").css({
								"z-index": "9030"
							});
							if (y < 2) {
								for (var x = 2; x < 4; x++) {
									w.children(".ui-resizable-" + z[y][0] + z[x][0]).addClass("ui-resizable-img" + z[y][1] + z[x][1] + "Tip").css({
										"z-index": "9030"
									})
								}
							}
						}
					})();
					var v = w.parent();
					w.children(".ui-resizable-handle").mousedown(function(y) {
						var x = v.attr("href");
						if (typeof x != "undefined" && x.length > 0) {
							v.removeAttr("href");
							v.attr("onclick", "return false;")
						}
					});
					if (o.data("layerId")) {
						o.off("mouseover").off("mouseleave")
					}
					w.mouseover(function() {
						clearTimeout(o.data("initModuleTimer"));
						if (b.ResizeDoc) {
							return
						}
						if (o.data("layerId")) {
							o.data("mouseover").call(o)
						}
						o.removeData("resizable-isLeave")
					}).mouseleave(function() {
						o.data("initModuleTimer", setTimeout(function() {
							if ((!b.ResizeDoc && !b.moduleLayer.isSelected) || (b.moduleLayer.isSelected && (o.parent()[0] != b.moduleLayer.selectedElem[0] && o[0] != b.moduleLayer.selectedElem[0] && !b.moduleLayer.selectedElem.is($("#tree3"))))) {
								var x = o.data("layerId");
								b.removeMoveFrame(x);
								$("#" + x + "moduleLayer").remove();
								w.children(".ui-resizable-handle").hide();
								n.find(".recoverBtn").hide()
							} else {
								o.data("resizable-isLeave", true)
							}
						}, 100))
					});
					o.data("hd-resizable-create") && o.data("hd-resizable-create").fireWith(o[0], [s, u])
				},
				start: function(s, t) {
					if (t.axis.length === 2) {
						$(this).resizable("option", "aspectRatio", true)
					} else {
						$(this).resizable("option", "aspectRatio", false)
					}
					g(o.data("layerId"));
					b.ResizeDoc = n;
					$$("#imgSizeShow").show();
					$("#" + o.data("layerId") + "moduleLayer").remove();
					t.originalElement.parent().find(".recoverBtn").hide();
					$(this).css("position", "relative");
					$(".ui-resizable-bottomTip,.ui-resizable-cancelTip,.draggableBtn").css({
						opacity: "0"
					});
					o.data("hd-resizable-start") && o.data("hd-resizable-start").fireWith(o[0], [s, t])
				},
				resize: function(t, u) {
					o.data("hd-resizable-resize") && o.data("hd-resizable-resize").fireWith(o[0], [t, u]);
					h(o, true);
					var s = $$("#imgSizeShow");
					s.find("span").eq(0).text(Math.round(o.width()) * 2);
					s.find("span").eq(1).text(Math.round(o.height()) * 2);
					s.css({
						width: "auto",
						height: "auto",
						top: t.pageY + 15,
						left: t.pageX - 30
					})
				},
				stop: function(t, v) {
					var u = 0;
					if (b.moduleLayer.isSelected) {
						o.click()
					}
					delete b.ResizeDoc;
					if (o.data("resizable-isLeave")) {
						$(this).mouseleave();
						o.removeData("resizable-isLeave")
					} else {
						o.mouseover()
					}
					$$("#imgSizeShow").hide();
					$(".ui-resizable-bottomTip,.ui-resizable-cancelTip,.draggableBtn").css({
						opacity: "1"
					});
					n.find(".slaveImg").attr("resize", "1");
					n.find(".recoverBtn").show();
					if ($(this).width() < 40 || $(this).height() < 40) {
						$(this).css("padding", "2px")
					} else {
						$(this).css("padding", "0")
					}
					var w = $(this).parent();
					var s = w.attr("link");
					if (typeof s != "undefined" && s.length > 0) {
						setTimeout(function() {
							w.attr("href", s);
							w.removeAttr("onclick")
						}, 100)
					}
					parent.operateFlagList[17] = true;
					b.logPhoneDog(0);
					o.data("hd-resizable-stop") && o.data("hd-resizable-stop").fireWith(o[0], [t, v])
				}
			}, o.data("hd-resizable-option")));
			p.off(".slaveImg")
		});
		b.moduleDraggale = f(function(r, q, s) {
			var p = r.parent();
			var o = r;
			var n = s || "body";
			if (q) {
				o = p
			}
			if (q === false) {
				p = o
			}
			o.css("cursor", "move");
			o.css("position", "absolute");
			if (o.parents(".home").length > 0 || o.parents(".zlEnterHome").length > 0) {
				n = "#limitRange"
			}
			var m = parseInt(p.css("z-index"));
			o.draggable($.extend({
				start: function(t, u) {
					r.mouseover();
					p.children(".ui-resizable-handle").hide();
					m = parseInt(p.css("z-index"));
					if (isNaN(m)) {
						m = ""
					}
					p.css("z-index", "9999");
					r.data("hd-draggable-start") && r.data("hd-draggable-start").fireWith(r[0], [t, u])
				},
				drag: function(t, u) {
					if (r[0].nodeName != "DIV") {
						b.moduleLayer.isDrag = true
					}
					h(r);
					$("#" + r.data("layerId") + "moduleLayer").remove();
					r.parent().find(".recoverBtn").hide();
					r.data("hd-draggable-drag") && r.data("hd-draggable-drag").fireWith(r[0], [t, u])
				},
				stop: function(t, u) {
					p.css("z-index", m);
					if (b.moduleLayer.isSelected) {
						r.click();
						return
					}
					b.removeAllEditLayer();
					r.mouseover();
					parent.operateFlagList[17] = true;
					b.logPhoneDog(1);
					r.data("hd-draggable-stop") && r.data("hd-draggable-stop").fireWith(r[0], [t, u])
				},
				opacity: 0.5,
				scroll: false,
				distance: 1,
				containment: n,
				addClasses: false
			}, r.data("hd-draggable-option")))
		});

		function f(m) {
			return function() {
				var q = this;
				var n = arguments.callee;
				var o = arguments[0];
				if (b.getType(o) === "array") {
					if (b.getType(o[0]) === "array") {
						$.each(o, function(r, s) {
							if (b.getType(s) === "array") {
								n.call(q, s)
							}
						})
					} else {
						n.apply(q, o)
					}
				} else {
					(typeof o === "string" || o.nodeType) && (o = $(o));
					if (o instanceof jQuery && o.length > 0) {
						var p = Array.prototype.slice.call(arguments);
						if (o.length > 1) {
							o.each(function() {
								p[0] = $(this);
								m.apply(q, p)
							})
						} else {
							p[0] = o;
							m.apply(q, p)
						}
					}
					return q
				}
			}
		}
		function e(q, m, p, n) {
			var o = "hd-" + p + "-" + n;
			q.each(function() {
				var r = $(this).data(o);
				if (n === "option") {
					if (r) {
						$(this).data(o, $.extend({}, r, m))
					} else {
						$(this).data(o, m)
					}
				} else {
					if (!r) {
						r = $.Callbacks("unique memory");
						$(this).data(o, r)
					}
					r.add(m)
				}
			})
		}
		$.fn.extend({
			setResizableOption: function(m) {
				e($(this), m, "resizable", "option");
				return $(this)
			},
			setDraggableOption: function(m) {
				e($(this), m, "draggable", "option");
				return $(this)
			},
			addResizableFn: function(n, m) {
				e($(this), m, "resizable", n);
				return $(this)
			},
			addDraggableFn: function(n, m) {
				e($(this), m, "draggable", n);
				return $(this)
			},
			addEditUploadFn: function(n, m) {
				e($(this), m, "editUpload", n);
				return $(this)
			},
			awardSlide: function(n) {
				if (typeof n === "object") {
					var p = {
						margin_bottom: "0",
						padding_right: "0",
						padding_right: "0",
						speed: 15
					};
					var n = $.extend(p, n);
					this.each(function() {
						$(this).show();
						var q = $(this),
							v = q.children("ul");
						var r = $(window).width();
						var u = 0;
						var w = 8;
						$(".awardInfoList .uerItem").css({
							"padding-left": n.padding_left,
							"padding-right": n.padding_right
						});
						var x = parseInt($(".awardInfoList .uerItem").css("padding-left"));
						var t = parseInt($(".awardInfoList .uerItem").css("padding-right"));
						$(".awardInfoList .uerItem").each(function() {
							u += $(this).outerWidth(true)
						});
						if (_manage) {
							u = 722
						}
						v.css({
							width: u * 2 + 10
						});
						v.append(v.find("li").clone());
						var s = v.find("li");
						s.removeClass("bottomScrollAnima");
						w = u / r * w;
						s.eq(0).addClass("bottomScrollAnima");
						s.css({
							width: "50%",
							left: r + 20,
							"animation-duration": w + "s",
							"-webkit-animation-duration": w + "s",
							"-ms-animation-duration": w + "s"
						});
						setTimeout(function() {
							s.eq(1).addClass("bottomScrollAnima")
						}, w / 2 * 1000);
						$(this).data("awardSlideOptions", w)
					})
				} else {
					if (n === "stop") {
						$(this).hide();
						$(this).find("li").eq(1).remove();
						$(this).removeData("awardSlideOptions")
					} else {
						if (n === "wakeup") {
							$(this).show();
							var o = $(this).data("awardSlideOptions");
							var m = $(this).children("ul").find("li");
							m.eq(1).removeClass("bottomScrollAnima");
							setTimeout(function() {
								m.eq(1).addClass("bottomScrollAnima")
							}, o / 2 * 1000)
						}
					}
				}
				return $(this)
			},
		});
		b.Img = {
			MODE_SCALE_FILL: 1,
			MODE_SCALE_WIDTH: 2,
			MODE_SCALE_HEIGHT: 3,
			MODE_SCALE_DEFLATE_WIDTH: 4,
			MODE_SCALE_DEFLATE_HEIGHT: 5,
			MODE_SCALE_DEFLATE_FILL: 6,
			MODE_SCALE_DEFLATE_MAX: 7
		};
		b.Img.isNull = function(m) {
			return (typeof m == "undefined") || (m == null)
		};
		b.Img.optimize = function(q, s, o) {
			var n = new Image();
			n.src = q.src;
			var p = n.width;
			var m = n.height;
			if (b.Img.isNull(p) || p == 0 || b.Img.isNull(m) || m == 0) {
				p = q.width;
				m = q.height
			}
			var r = b.Img.calcSize(p, m, s.width, s.height, s.mode, o);
			q.width = r.width;
			q.height = r.height;
			if (s.display == 1) {
				q.style.display = "inline"
			} else {
				if (s.display == 2) {
					q.style.display = "none"
				} else {
					q.style.display = "block"
				}
			}
			return {
				width: q.width,
				height: q.height
			}
		};
		b.Img.calcSize = function(m, t, r, s, o, n) {
			if (isNaN(r)) {
				r = parseFloat(r) * g_rem
			}
			if (isNaN(s)) {
				s = parseFloat(s) * g_rem
			}
			var u = {
				width: m,
				height: t
			};
			if (o == b.Img.MODE_SCALE_FILL) {
				var q = m / r;
				var p = t / s;
				if (q > p) {
					u.width = r;
					u.height = t / q
				} else {
					u.width = m / p;
					u.height = s
				}
			} else {
				if (o == b.Img.MODE_SCALE_WIDTH) {
					var q = m / r;
					u.width = r;
					u.height = t / q
				} else {
					if (o == b.Img.MODE_SCALE_HEIGHT) {
						var p = t / s;
						u.width = m / p;
						u.height = s
					} else {
						if (o == b.Img.MODE_SCALE_DEFLATE_WIDTH) {
							var q = m / r;
							if (q > 1) {
								u.width = r;
								u.height = t / q
							}
						} else {
							if (o == b.Img.MODE_SCALE_DEFLATE_HEIGHT) {
								var p = t / s;
								if (p > 1) {
									u.width = m / p;
									u.height = s
								}
							} else {
								if (o == b.Img.MODE_SCALE_DEFLATE_FILL) {
									var q = m / r;
									var p = t / s;
									if (q > p) {
										if (q > 1) {
											u.width = r;
											u.height = t / q
										}
									} else {
										if (p > 1) {
											u.width = m / p;
											u.height = s
										}
									}
								} else {
									if (o == b.Img.MODE_SCALE_DEFLATE_MAX) {
										if (m > r && t > s) {
											var q = m / r;
											var p = t / s;
											if (q < p) {
												u.width = r;
												u.height = t / q
											} else {
												u.width = m / p;
												u.height = s
											}
										}
									}
								}
							}
						}
					}
				}
			}
			if (!n) {
				u.width = Math.floor(u.width);
				u.height = Math.floor(u.height)
			}
			if (u.width == 0) {
				u.width = 1
			}
			if (u.height == 0) {
				u.height = 1
			}
			return u
		}
	})();
	(function() {
		var k = '<div id="logBox"><div id="log_head"><div id="log_close" class="log_icon">╳</div><div id="log_min" class="log_icon">━</div>' + (typeof g_config !== "undefined" && g_config.test ? '<div id="log_share" class="log_icon">share</div>' : "") + '</div><div id="log_text_wrap"><div id="log_text"></div></div></div>';
		var m = $('<div id="log_max"><div id="log_max_inner">＋</div></div>');
		var l = $(k);
		var i = l.find("#log_text");
		var g = l.find("#log_head");
		var e = {};
		var h = true;
		var j = 0;
		$(function() {
			var n = $("body");
			if (n.length < 0) {
				return
			}
			n.append(l);
			n.append(m);
			g.on("touchstart", function(o) {
				o.preventDefault();
				o.stopPropagation();
				var p = o.originalEvent.targetTouches[0];
				e.x = p.pageX;
				e.y = p.pageY
			}).on("touchmove", function(o) {
				o.preventDefault();
				o.stopPropagation();
				var r = o.originalEvent.targetTouches[0];
				var q = l.offset().left + r.pageX - e.x;
				var p = l.offset().top + r.pageY - e.y;
				e.x = r.pageX;
				e.y = r.pageY;
				if (q > -0.2 * l.width() && q + 0.5 * l.width() < $(window).width()) {
					l[0].style.left = q + "px"
				}
				if (p > 0 && p + 0.5 * l.height() < $(window).height()) {
					l[0].style.top = p + "px"
				}
			});
			l.find("#log_close").on("touchstart", function() {
				m.hide();
				l.hide();
				i.empty();
				j = 0
			});
			l.find("#log_min").on("touchstart", function() {
				m.show();
				l.hide()
			});
			l.find("#log_share").on("touchstart", function() {
				var p = b.wxConfigArg.url;
				b.log("shareUrl", p);
				if (g_config.test) {
					p = escape(p).replace(/\+/g, "%2B").replace(/\"/g, "%22").replace(/\'/g, "%27").replace(/\//g, "%2F");
					var o = "http://" + b.gameDomainIgnoreStyle + "/hdtest.jsp?cmd=setUrl&url=" + p;
					window.open(o)
				}
			});
			m.on("touchstart", function() {
				m.hide();
				l.show()
			});
			i.on("touchstart", ".log_flag", function() {
				var o = $(this).parent();
				if (o.hasClass("log_line_ellipsis")) {
					o.removeClass("log_line_ellipsis")
				} else {
					o.addClass("log_line_ellipsis")
				}
			});
			l.hide();
			m.hide()
		});
		b.tlog = f(function(o, n) {
			if (/log/.test(g_config.testCMD)) {
				b.logStd(o, n)
			}
			b.log(o, n)
		});
		b.log = f(function(o, n) {
			if (!m_debug) {
				return
			}
			$(function() {
				if (j === 0) {
					l.show()
				}
				j++;
				var p = $('<div class="log_line log_line_ellipsis"><span class="log_flag"></span><span class="log_text"></span></div>');
				p.find(".log_flag").text(o);
				p.find(".log_text").text(n);
				i.append(p);
				$("#log_text_wrap")[0].scrollTop = $("#log_text_wrap")[0].scrollHeight
			})
		});

		function f(n) {
			return function(p, o) {
				if (b.IsPC()) {
					return
				}
				if (arguments.length <= 1) {
					o = p;
					p = "###"
				}
				if (b.getType(o) === "object" || b.getType(o) === "array") {
					o = $.toJSON(o)
				} else {
					o = String(o)
				}
				n(p, o)
			}
		}
	})();
	(function(j) {
		function r(z, C) {
			var B = (z & 65535) + (C & 65535),
				A = (z >> 16) + (C >> 16) + (B >> 16);
			return (A << 16) | (B & 65535)
		}
		function v(x, y) {
			return (x << y) | (x >>> (32 - y))
		}
		function g(D, A, z, y, C, B) {
			return r(v(r(r(A, D), r(y, B)), C), z)
		}
		function f(A, z, E, D, y, C, B) {
			return g((z & E) | ((~z) & D), A, z, y, C, B)
		}
		function l(A, z, E, D, y, C, B) {
			return g((z & D) | (E & (~D)), A, z, y, C, B)
		}
		function q(A, z, E, D, y, C, B) {
			return g(z ^ E ^ D, A, z, y, C, B)
		}
		function e(A, z, E, D, y, C, B) {
			return g(E ^ (z | (~D)), A, z, y, C, B)
		}
		function h(I, D) {
			I[D >> 5] |= 128 << ((D) % 32);
			I[(((D + 64) >>> 9) << 4) + 14] = D;
			var A, C, B, z, y, H = 1732584193,
				G = -271733879,
				F = -1732584194,
				E = 271733878;
			for (A = 0; A < I.length; A += 16) {
				C = H;
				B = G;
				z = F;
				y = E;
				H = f(H, G, F, E, I[A], 7, -680876936);
				E = f(E, H, G, F, I[A + 1], 12, -389564586);
				F = f(F, E, H, G, I[A + 2], 17, 606105819);
				G = f(G, F, E, H, I[A + 3], 22, -1044525330);
				H = f(H, G, F, E, I[A + 4], 7, -176418897);
				E = f(E, H, G, F, I[A + 5], 12, 1200080426);
				F = f(F, E, H, G, I[A + 6], 17, -1473231341);
				G = f(G, F, E, H, I[A + 7], 22, -45705983);
				H = f(H, G, F, E, I[A + 8], 7, 1770035416);
				E = f(E, H, G, F, I[A + 9], 12, -1958414417);
				F = f(F, E, H, G, I[A + 10], 17, -42063);
				G = f(G, F, E, H, I[A + 11], 22, -1990404162);
				H = f(H, G, F, E, I[A + 12], 7, 1804603682);
				E = f(E, H, G, F, I[A + 13], 12, -40341101);
				F = f(F, E, H, G, I[A + 14], 17, -1502002290);
				G = f(G, F, E, H, I[A + 15], 22, 1236535329);
				H = l(H, G, F, E, I[A + 1], 5, -165796510);
				E = l(E, H, G, F, I[A + 6], 9, -1069501632);
				F = l(F, E, H, G, I[A + 11], 14, 643717713);
				G = l(G, F, E, H, I[A], 20, -373897302);
				H = l(H, G, F, E, I[A + 5], 5, -701558691);
				E = l(E, H, G, F, I[A + 10], 9, 38016083);
				F = l(F, E, H, G, I[A + 15], 14, -660478335);
				G = l(G, F, E, H, I[A + 4], 20, -405537848);
				H = l(H, G, F, E, I[A + 9], 5, 568446438);
				E = l(E, H, G, F, I[A + 14], 9, -1019803690);
				F = l(F, E, H, G, I[A + 3], 14, -187363961);
				G = l(G, F, E, H, I[A + 8], 20, 1163531501);
				H = l(H, G, F, E, I[A + 13], 5, -1444681467);
				E = l(E, H, G, F, I[A + 2], 9, -51403784);
				F = l(F, E, H, G, I[A + 7], 14, 1735328473);
				G = l(G, F, E, H, I[A + 12], 20, -1926607734);
				H = q(H, G, F, E, I[A + 5], 4, -378558);
				E = q(E, H, G, F, I[A + 8], 11, -2022574463);
				F = q(F, E, H, G, I[A + 11], 16, 1839030562);
				G = q(G, F, E, H, I[A + 14], 23, -35309556);
				H = q(H, G, F, E, I[A + 1], 4, -1530992060);
				E = q(E, H, G, F, I[A + 4], 11, 1272893353);
				F = q(F, E, H, G, I[A + 7], 16, -155497632);
				G = q(G, F, E, H, I[A + 10], 23, -1094730640);
				H = q(H, G, F, E, I[A + 13], 4, 681279174);
				E = q(E, H, G, F, I[A], 11, -358537222);
				F = q(F, E, H, G, I[A + 3], 16, -722521979);
				G = q(G, F, E, H, I[A + 6], 23, 76029189);
				H = q(H, G, F, E, I[A + 9], 4, -640364487);
				E = q(E, H, G, F, I[A + 12], 11, -421815835);
				F = q(F, E, H, G, I[A + 15], 16, 530742520);
				G = q(G, F, E, H, I[A + 2], 23, -995338651);
				H = e(H, G, F, E, I[A], 6, -198630844);
				E = e(E, H, G, F, I[A + 7], 10, 1126891415);
				F = e(F, E, H, G, I[A + 14], 15, -1416354905);
				G = e(G, F, E, H, I[A + 5], 21, -57434055);
				H = e(H, G, F, E, I[A + 12], 6, 1700485571);
				E = e(E, H, G, F, I[A + 3], 10, -1894986606);
				F = e(F, E, H, G, I[A + 10], 15, -1051523);
				G = e(G, F, E, H, I[A + 1], 21, -2054922799);
				H = e(H, G, F, E, I[A + 8], 6, 1873313359);
				E = e(E, H, G, F, I[A + 15], 10, -30611744);
				F = e(F, E, H, G, I[A + 6], 15, -1560198380);
				G = e(G, F, E, H, I[A + 13], 21, 1309151649);
				H = e(H, G, F, E, I[A + 4], 6, -145523070);
				E = e(E, H, G, F, I[A + 11], 10, -1120210379);
				F = e(F, E, H, G, I[A + 2], 15, 718787259);
				G = e(G, F, E, H, I[A + 9], 21, -343485551);
				H = r(H, C);
				G = r(G, B);
				F = r(F, z);
				E = r(E, y)
			}
			return [H, G, F, E]
		}
		function s(y) {
			var z, x = "";
			for (z = 0; z < y.length * 32; z += 8) {
				x += String.fromCharCode((y[z >> 5] >>> (z % 32)) & 255)
			}
			return x
		}
		function m(y) {
			var z, x = [];
			x[(y.length >> 2) - 1] = undefined;
			for (z = 0; z < x.length; z += 1) {
				x[z] = 0
			}
			for (z = 0; z < y.length * 8; z += 8) {
				x[z >> 5] |= (y.charCodeAt(z / 8) & 255) << (z % 32)
			}
			return x
		}
		function n(x) {
			return s(h(m(x), x.length * 8))
		}
		function i(z, C) {
			var y, B = m(z),
				x = [],
				A = [],
				D;
			x[15] = A[15] = undefined;
			if (B.length > 16) {
				B = h(B, z.length * 8)
			}
			for (y = 0; y < 16; y += 1) {
				x[y] = B[y] ^ 909522486;
				A[y] = B[y] ^ 1549556828
			}
			D = h(x.concat(m(C)), 512 + C.length * 8);
			return s(h(A.concat(D), 512 + 128))
		}
		function w(A) {
			var C = "0123456789abcdef",
				z = "",
				y, B;
			for (B = 0; B < A.length; B += 1) {
				y = A.charCodeAt(B);
				z += C.charAt((y >>> 4) & 15) + C.charAt(y & 15)
			}
			return z
		}
		function p(x) {
			return unescape(encodeURIComponent(x))
		}
		function t(x) {
			return n(p(x))
		}
		function o(x) {
			return w(t(x))
		}
		function k(x, y) {
			return i(p(x), p(y))
		}
		function u(x, y) {
			return w(k(x, y))
		}
		j.md5 = function(y, z, x) {
			if (!z) {
				if (!x) {
					return o(y)
				} else {
					return t(y)
				}
			}
			if (!x) {
				return u(z, y)
			} else {
				return k(z, y)
			}
		}
	}(typeof jQuery === "function" ? jQuery : this));
	b.encodeBase64 = function(m) {
		var l, k, h;
		var f = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
		var j = 0,
			e = m.length,
			g = "";
		while (j < e) {
			l = m.charCodeAt(j++) & 255;
			if (j == e) {
				g += f.charAt(l >> 2);
				g += f.charAt((l & 3) << 4);
				g += "==";
				break
			}
			k = m.charCodeAt(j++);
			if (j == e) {
				g += f.charAt(l >> 2);
				g += f.charAt(((l & 3) << 4) | ((k & 240) >> 4));
				g += f.charAt((k & 15) << 2);
				g += "=";
				break
			}
			h = m.charCodeAt(j++);
			g += f.charAt(l >> 2);
			g += f.charAt(((l & 3) << 4) | ((k & 240) >> 4));
			g += f.charAt(((k & 15) << 2) | ((h & 192) >> 6));
			g += f.charAt(h & 63)
		}
		return g
	};
	b.imgReady = (function() {
		var h = [],
			g = null,
			f = function() {
				var j = 0;
				for (; j < h.length; j++) {
					h[j].end ? h.splice(j--, 1) : h[j]()
				}!h.length && e()
			},
			e = function() {
				clearInterval(g);
				g = null
			};
		return function(j, o, q, n) {
			var p, k, r, m, i, l = new Image();
			if (typeof j === "object") {
				l = j
			} else {
				l.src = j
			}
			if (l.complete) {
				o.call(l);
				q && q.call(l);
				return
			}
			k = l.width;
			r = l.height;
			l.onerror = function() {
				n && n.call(l);
				p.end = true;
				l = l.onload = l.onerror = null
			};
			p = function() {
				m = l.width;
				i = l.height;
				if (m !== k || i !== r || m * i > 1024) {
					o.call(l);
					p.end = true
				}
			};
			p();
			l.onload = function() {
				!p.end && p();
				q && q.call(l);
				l = l.onload = l.onerror = null
			};
			if (!p.end) {
				h.push(p);
				if (g === null) {
					g = setInterval(f, 40)
				}
			}
		}
	})();
	b.initEdit = function(f) {
		var r = f.origin,
			n = f.originDef,
			u = f.originMod,
			e = {};
		(function() {
			if (!u) {
				return
			}
			$.each(u, function(v, x) {
				if (n.indexOf(x) != -1) {
					return
				}
				var y = r[v];
				if (x.css) {
					function w(z) {
						if (typeof z.opt !== "undefined") {
							z.opt = 0
						}
						if (z.tra !== "undefined") {
							z.defTra = z.tra
						}
						z.defVal = z.val
					}
					$.each(x.css, function(z, A) {
						if (A.css) {
							$.each(A.css, function(B, C) {
								w(C)
							})
						} else {
							w(A)
						}
					});
					if (g_config.isNewGame || f.isMod) {
						$.extend(true, y.css, x.css)
					}
				}
				if (x.text) {
					$.each(x.text, function(z, A) {
						if (g_config.isNewGame || f.isMod) {
							$.extend(true, y.text, x.text)
						}
						if (A.type == 2) {
							A.txtopt = 0;
							delete A.numLimit
						}
					})
				}
			});
			$.extend(true, n, u)
		})();

		function t(w, C) {
			var D = "getImgInfo-" + w;
			if (C) {
				D = "getImgInfo-rem-" + w
			}
			var z = e[D];
			if (z) {
				return z
			}
			var y = j(w)[0];
			if (!y) {
				return
			}
			z = {
				name: w,
				css: y.css
			};
			if (y.path) {
				if (b.getType(y.path[0]) === "array") {
					z.path = [];
					for (var v = 0; v < y.path.length; v++) {
						z.path[v] = b.getSrc(y.path[v][0])
					}
				} else {
					z.path = b.getSrc(y.path[0])
				}
			}
			var A = C ? parseFloat : parseRemToPx;
			var E = {
				size: ["width", "height"],
				pos: ["left", "top"]
			};
			for (var D in E) {
				var B = E[D];
				var x = y[D];
				if (!x) {
					continue
				}
				if (b.getType(x) === "array") {
					z[B[0]] = [], z[B[1]] = [];
					$.each(x, function(F, G) {
						z[B[0]].push(A(G[B[0]]));
						z[B[1]].push(A(G[B[1]]))
					})
				} else {
					z[B[0]] = A(x[B[0]]);
					z[B[1]] = A(x[B[1]])
				}
			}
			e[D] = z;
			return z
		}
		function o(z, w, v) {
			var y = v ? w.defVal : w.val;
			var x = v ? w.defTra : w.tra;
			if (!y) {
				return
			}
			if (w.from) {
				z = $(w.from)
			}
			if (w.type !== "color") {
				if (w.name === "font-size" && !isNaN(Number(y))) {
					z.css(w.name, (y / 20) + "rem")
				} else {
					z.css(w.name, y)
				}
			} else {
				y = k(y);
				if (w.name === "text-shadow") {
					z.css(w.name, i(m(y, x)))
				} else {
					z.css(w.name, m(y, x))
				}
			}
		}
		function k(y) {
			y = $.trim(y);
			if (/^#[0-9a-fA-f]{3}$/.test(y)) {
				var v = "#";
				for (var x = 1; x < 4; x += 1) {
					var z = y.slice(x, x + 1);
					v += z + z
				}
				y = v
			}
			if (!/^#[0-9a-fA-f]{6}$/.test(y)) {
				return y
			}
			y = parseInt(y.substring(1), 16);
			var w = ["rgb(", y >> 16, ",", (y & 65280) >> 8, ",", (y & 255), ")"];
			return w.join("")
		}
		function i(v) {
			return v + " -1px -1px 0px, " + v + " 0px -1px 0px, " + v + " 1px -1px 0px, " + v + " 1px 0px 0px, " + v + " 1px 1px 0px, " + v + " 0px 1px 0px, " + v + " -1px 1px 0px, " + v + " -1px 0px 0px"
		}
		function m(w, v) {
			if (typeof v === "undefined" || v == -1) {
				return w
			}
			return "rgba" + w.substring(w.indexOf("("), w.indexOf(")")) + "," + (v ? v : 0) + ")"
		}
		function j(w) {
			for (var x = 0; x < r.length; x++) {
				var v = r[x];
				if (v.name === w) {
					return [v, n[x]]
				}
			}
			return [false, false]
		}
		function h(x, w) {
			var v = {};
			v.from = x;
			v.title = w[1];
			v.limit = w[2];
			v.defSrc = b.getSrc(w[0]);
			if (w[3]) {
				v.defSize = w[3]
			}
			return v
		}
		function s(v, w) {
			v.each(function() {
				if (/img/i.test($(this)[0].nodeName)) {
					$(this).attr("src", w)
				} else {
					$(this).css("background-image", 'url("' + w + '")')
				}
			})
		}
		function q(w, v, y) {
			var x = w;
			if ($.isArray(w)) {
				if (typeof v == "undefined") {
					v = 0
				}
				var x = w[v];
				if (x === undefined) {
					x = y === undefined ? w[0] : q(y, v)
				}
			} else {
				if (x === undefined && y !== undefined) {
					x = y
				}
			}
			return x
		}
		function p(U) {
			var T = typeof U === "object" ? U : j(U),
				A = T[0],
				K = T[1],
				U = A.name,
				C = $(".editTarget-" + U),
				B = A.pos,
				H = A.size,
				J = K.path,
				x = K.size,
				z = K.pos;
			C = C.not(function() {
				return $(this).data("hasBindEdit")
			});
			var E = -2,
				S = null,
				y = false,
				Q = null,
				M = true;
			if (K.edit) {
				if (typeof K.edit === "number") {
					E = K.edit
				} else {
					if (K.edit === "_background") {
						!f.bgList && (f.bgList = []);
						f.bgList.push({
							from: ".editTarget-" + U + ",.editRelate-" + U,
							defSrc: b.getSrc(J[0])
						});
						C.data("hasBindEdit", true);
						return
					} else {
						if (K.edit !== "_none") {
							S = [];
							if (e["edit-" + K.edit]) {
								S = e["edit-" + K.edit]
							} else {
								var G = [];
								if (K.edit === "all") {
									G = f.originDef.filter(function(V) {
										return !V.formDefaultStyle && V.edit != "_background"
									})
								} else {
									$.each(K.edit.split(","), function(V, W) {
										G.push(j(W)[1])
									})
								}
								for (var R = 0; R < G.length; R++) {
									var F = G[R].path;
									var L = G[R].name;
									var w = ".editTarget-" + L + ",.editRelate-" + L;
									if (typeof F != "undefined") {
										if (b.getType(F[0]) === "array") {
											for (var N = 0; N < F.length; N++) {
												N > 0 && (w = ".editTarget-" + L + "-" + N + ",.editRelate-" + L + "-" + N);
												S.push(h(w, F[N]))
											}
										} else {
											S.push(h(w, F))
										}
									}
								}!e["edit-" + K.edit] && (e["edit-" + K.edit] = S)
							}
							E = -1
						} else {
							M = false
						}
					}
				}
			} else {
				M = false
			}
			var D = "editTarget-" + U,
				P = null,
				O = false;
			if (K.css || K.cssAll) {
				if (K.cssAll) {
					Q = [];
					$.each(K.cssAll, function(V, W) {
						if (j(W)[1].css) {
							Q = Q.concat(j(W)[1].crrCssArg)
						}
					})
				} else {
					Q = K.crrCssArg
				}
				y = !Q[0].targetName ? true : Q[0].targetName;
				if (K.cssEdit == 1) {
					var v = Q;
					parent.Edit.addEditBtn("编辑背景", "." + D, function() {
						parent.Edit.Css.showCssByGame.call($("." + D), "." + D, v);
						parent.operateFlagList[21] = true;
						b.logPhoneDog(5);
						return false
					});
					y = false, Q = null
				}
			}
			if (K.text) {
				M = !K.text[0].targetName ? true : K.text[0].targetName;
				A.text = $.extend(true, [], K.text, A.text);
				if (K.text[0].type == 1) {
					M = false
				}
				if (A.text.filter(function(V) {
					return V.type == 2
				}).length > 0) {
					E = 0;
					D = function() {
						l.call(this, A.text, K.text, U)
					}
				}
			}
			if (K.edit || Q) {
				b.initModuleLayer(C, E, D, S, y, Q, M)
			}
			var I = (b.getType(z) === "array" && b.getType(x) !== "array");
			C.each(function(aa) {
				var X = q(x, aa),
					Z = q(z, aa),
					W = q(H, aa, x),
					Y = q(B, aa, z);
				if (W) {
					$(this).addClass("slaveImg");
					if (!$(this).parents().hasClass("imgContainer")) {
						$(this).wrap('<div class="imgContainer absCenter"></div>')
					}
					if (!X.disable) {
						if (I) {
							var V = null;
							$(this).addResizableFn("start", function(ac, ad) {
								V = C.not(this);
								if (/n|w/.test(ad.axis) && !X.noSyncOffset) {
									V.each(function(af, ah) {
										var ae = $(this),
											ag = ae.parents(".ui-wrapper");
										ae.data("originalPosition-relative", {
											left: parseFloat(ag.css("left")) - ad.originalPosition.left,
											top: parseFloat(ag.css("top")) - ad.originalPosition.top,
										})
									})
								}
							});
							$(this).addResizableFn("resize", function(ac, ad) {
								V.add(V.parents(".ui-wrapper")).css({
									width: $(ad.element).width(),
									height: $(ad.element).height()
								});
								if (/n|w/.test(ad.axis) && !X.noSyncOffset) {
									V.each(function(af, ag) {
										var ae = $(this);
										var ah = ae.data("originalPosition-relative");
										ae.add(ae.parents(".ui-wrapper")).css({
											left: ad.position.left + ah.left,
											top: ad.position.top + ah.top
										})
									})
								}
							});
							$(this).addResizableFn("stop", function(ac, ad) {
								if (!X.noSyncOffset) {
									V.each(function(ae, af) {
										$(this).removeData("originalPosition-relative").attr("resize", "1")
									})
								}
								V = null
							})
						}
						var ab = {
							width: X.width,
							height: X.height
						};
						if (Z && Z.disable) {
							ab.left = Z.left;
							ab.top = Z.top
						}
						b.moduleSlaveImgResize($(this), ab);
						if (I) {
							$(this).addResizableFn("recover", function() {
								var ac = $(this).parents(".ui-wrapper");
								C.each(function(ad, ae) {
									if (ad === aa) {
										return
									}
									var ag = $(ae).add($(ae).parents(".ui-wrapper"));
									ag.width(ac.width()).height(ac.height());
									var af = q(z, ad);
									if (af && af.disable) {
										ag.css({
											left: af.left,
											top: af.top
										})
									}
									ag.attr("resize", 0)
								})
							})
						}
					}
				}
				if (Y && !Z.disable) {
					if (Z.forParent != "false" && !$(this).parents().hasClass("imgContainer")) {
						$(this).wrap('<div class="imgContainer absCenter"></div>')
					}
					b.moduleDraggale($(this), Z.forParent == "false" ? false : true)
				}
			});
			C.data("hasBindEdit", true)
		}
		function l(z, w, y) {
			var A = $$("#uploadInfoBox").empty();
			parent.Edit.popUploadImgBox();
			$$("#uploadBoxTitle").html(w[0].allTitel || "编辑内容");
			var v = [];
			$.each(z, function(H, D) {
				if (D.type != 2) {
					return
				}
				var K = w[H];
				!K.from && (K.from = ".editTarget-" + y + ",.editRelate-" + y);
				var J = D.val;
				var G = K.numLimit;
				if (b.getType(G) != "array") {
					G = [0, G]
				}
				var F = G[0];
				var M = G[1];
				var L = D.txtopt;
				var O = D.shouInput;
				var P = "";
				var E = K.val;
				var N = $(K.from);
				v.push([N.data("hd-editUpload-editClose"), this, [D, K, N]]);
				P += '<div class="uploadLine" style="padding-top:20px;" >';
				if (D.shouInput) {
					P += C((K.title || "文字内容") + "：", "内容", J, "title")
				} else {
					P += B((K.title || "文字内容") + "：", "内容", J, "title", H, L)
				}
				P += "</div>";
				A.append(P);
				var I = $$(".newTextArea .activeInput").eq(H);
				I.off().on("blur", function() {
					var Q = $(this).val();
					if ($.trim(Q).length < (F + 1)) {
						if (!$(this).hasClass("inputErr")) {
							$(this).addClass("inputErr")
						}
						$(this).parent().find(".editErr").show().text("输入的文字不可少于" + (F + 1) + "个！");
						N.text(D.val)
					}
					var R = N.data("hd-editUpload-textBlur");
					R && R.fireWith(this, [D, K, N])
				}).on("focus", function() {
					$(this).removeClass("inputErr");
					$(this).parent().find(".editErr").hide();
					$(this).parent().find(".editErr2").hide();
					var Q = N.data("hd-editUpload-textFocus");
					Q && Q.fireWith(this, [D, K, N])
				}).on("input propertychange", function() {
					var U = $(this).val();
					U = U.substr(0, M);
					var R = $.trim($(this).val()).length;
					if (R > M) {
						$(this).val(U)
					}
					N.text(U);
					var Q = N.data("hd-editUpload-textBeforeSave");
					if (Q) {
						var T = {};
						Q.fireWith(this, [D, K, N, T]);
						T.str && (U = T.str);
						T.len && (R = T.len)
					}
					if (x(R, F, M)) {
						D.val = U
					}
					var S = N.data("hd-editUpload-textKeyUp");
					if (S) {
						S.fireWith(this, [D, K, N])
					}
				});
				if (L) {
					I.css("display", "inline-block").val(D.val)
				} else {
					I.hide()
				}
				$$("#TheOnlyOne" + H + "").on("click", function() {
					D.txtopt = 0;
					N.text(E);
					$$(".newTextArea .activeInput").hide().removeClass("inputErr").val(E);
					$$(".newTextArea .activeInput").siblings(".editErr").hide();
					$$(".newTextArea .activeInput").siblings(".editErr2").hide()
				});
				$$("#TheOnlytwo" + H + "").on("click", function() {
					D.txtopt = 1;
					$$(".newTextArea .activeInput").css("display", "inline-block").val(D.val);
					N.text(D.val)
				})
			});
			$$("#uploadImgBox").data("editClose", function() {
				$.each(v, function(D, F) {
					var E = F[0];
					E && E.fireWith(F[1], F[2])
				})
			});
			g_config.closeWin && g_config.closeWin();

			function x(E, F, D) {
				if (typeof D !== "undefined") {
					return E > F && E <= D
				} else {
					return E > F
				}
			}
			function C(H, E, F, D) {
				var G = F;
				G = b.encodeHtml(G);
				return '<div class="answerLine clearfix"><div class="floatLeft newTextT" style="width: 70px; margin-top: 7px" >' + H + '</div><div style="width: 320px;" class="floatLeft"><div class="newTextArea"><input type="text" class="input scrollBox activeInput" style="width: 300px;height: 32px; padding-left: 5px;" value="' + G + '" ' + (isPublish ? "disabled" : "") + '><div style="color:#888; padding-top: 5px;">确认发布后无法修改，请认真输入！</div><div class="editErr hide" style="color: red;margin-top: 10px;">输入文字不能为空</div><div class="editErr2 hide" style="color: red; margin-top: 10px; display: none;">输入仅限中文字母跟数字</div></div></div></div>'
			}
			function B(I, E, K, J, G, H) {
				var D = K;
				D = b.encodeHtml(D);
				var L = H ? "checked" : "";
				var F = H ? "" : "checked";
				return '<div class="answerLine clearfix"><div class="floatLeft newTextT" style="width: 100px;">' + I + '</div><div class="floatLeft" style="width: 320px;"><div><input id="TheOnlyOne' + G + '" type="radio" name="theRealOnly"' + F + '><label for="TheOnlyOne' + G + '" style="height: 16px;line-height: 16px;">默认</label><input id="TheOnlytwo' + G + '" type="radio" name="theRealOnly"' + L + '><label for="TheOnlytwo' + G + '" style="height: 16px;line-height: 16px;">自定义</label></div><div class="newTextArea" style="margin-top: 12px;"><textarea class="input scrollBox activeInput" style="width: 300px;height: 100px;">' + D + '</textarea><div class="editErr hide" style="color: red;margin-top: 10px;">输入文字不可少于10个！</div><div class="editErr2 hide" style="color: red; margin-top: 10px; display: none;">输入仅限中文</div></div></div></div>'
			}
			return false
		}
		if (_manage) {
			f.setAllEdit = function() {
				g();
				hg.edit.hasInitEle = true;
				$.each(n, function(v, w) {
					if (w.css) {
						w.crrCssArg = $.extend(true, [], w.css, r[v].css)
					}
				});
				$.each(r, function(w, v) {
					p([v, n[w]])
				})
			}
		} else {
			g()
		}
		function g() {
			$.each(r, function(y, w) {
				var z = n[y],
					x = $(".editTarget-" + w.name),
					A = w.pos,
					D = w.size,
					C = w.path;
				var v = function(E) {
						E.each(function(H) {
							var G = q(A, H, z.pos),
								F = q(D, H, z.size);
							if (G && G.top && G.left) {
								$(this).css({
									top: G.top,
									left: G.left
								}).addClass("abs")
							}
							if (F && F.width && F.height) {
								$(this).css({
									width: F.width,
									height: F.height
								})
							}
						})
					};
				v(x);
				if (C) {
					var B = ".editRelate-" + w.name;
					if (b.getType(C[0]) === "array") {
						$.each(C, function(F, H) {
							var G = b.getSrc(H[0]);
							var E = "editTarget-" + w.name;
							if (F !== 0) {
								E = "editTarget-" + w.name + "-" + F;
								B = ".editRelate-" + w.name + "-" + F
							}
							if ($("." + E).length > 0) {
								s($("." + E), G);
								v($("." + E))
							} else {
								$("body").append('<input class="' + E + '" type="hidden" value="' + G + '">')
							}
							if ($(B).length > 0) {
								s($(B), G)
							}
						})
					} else {
						s(x.add(B), b.getSrc(C[0]))
					}
				}
				if (w.css) {
					$.extend(true, z.css, w.css);
					$.each(z.css, function(E, F) {
						if (!F.from) {
							F.from = ".editTarget-" + w.name + ",.editRelate-" + w.name
						}
						if (F.css) {
							$.each(F.css, function(H, G) {
								if (!G.from) {
									G.from = F.from
								}
								o($(G.from), G, G.opt === 0)
							})
						} else {
							o($(F.from), F, F.opt === 0)
						}
					})
				}
				if (w.text) {
					$.each(w.text, function(F, G) {
						var E = z.text[F];
						!E.from && (E.from = ".editTarget-" + w.name + ",.editRelate-" + w.name);
						if (E.type == 2) {
							var H = Fai.encodeHtml(G.txtopt ? G.val : E.val);
							$(E.from).html(H)
						} else {
							$(E.from).val(G.value)
						}
					})
				}
			})
		}
		f.getImgInfo = t;
		f.getInfoByName = j;
		f.getRgba = m;
		f.initEdit = g;
		f.cache = e;
		delete f.originMod;
		return f
	};
	b.initSound = function(g, h, f) {
		if (f) {
			$.each(f, function(k, l) {
				h[k].path = l.path;
				if (g_config.isModel) {
					g[k].optFlag = h[k].optFlag
				}
			})
		}
		if (g) {
			$.each(g, function(l, m) {
				var k = h[l];
				if (l !== 0 && m.optFlag === 1) {
					m.optFlag = 2
				}
				m.path = b.getSrc(m.path);
				k.path = b.getSrc(k.path)
			})
		}
		var e = {};
		var j = LF.sound.webAudioEnabled && LF.global.webAudio;
		$(function() {
			$.setSoundM()
		});
		var i = {
			list: g,
			listDef: h,
			allowPlay: true,
			setPlayPower: function(l, m) {
				if (typeof l == "boolean") {
					this.allowPlay = l
				}
				var k = e[l];
				if (!k) {
					b.tlog("Sound_setPlayPower_err", "这个key:" + l + " 不存在!");
					return this
				}
				k._allowPlay = m
			},
			play: function(o, q, n) {
				if (_manage) {
					return
				}
				if (!this.allowPlay) {
					return this
				}
				if (g && b.getType(o) === "number") {
					var m = o === 0 ? 1 : 3;
					if (g[o].optFlag === m) {
						return this
					}
				}
				if (o !== 0 && g && g[0].optFlag !== 1 && !j) {
					return this
				}
				var k = e[o];
				if (!k) {
					b.tlog("Sound_play_err", "这个key:" + o + " 不存在!");
					return this
				}
				if (!k._allowPlay) {
					return
				}
				k.play(q, n);
				if (!k.playing) {
					try {
						wx.checkJsApi({
							jsApiList: ["checkJsApi"],
							success: function() {
								k.play(q, n)
							}
						})
					} catch (p) {
						console.log(p);
						b.tlog("Sound_play_err", p)
					}
				}
				return this
			},
			readyPlay: function(o, r, m) {
				if (_manage) {
					return
				}
				try {
					var k = e[o];
					if (!k) {
						b.tlog("Sound_readyPlay_err", "这个key:" + o + " 不存在!");
						return this
					}
					var n = this;
					n.play(o, r, m);
					n.onReady(o, function() {
						!k.playing && n.play(o, r, m)
					})
				} catch (p) {
					var q = "aid=" + g_config.aid + ",gameId=" + g_config.gameId + ",openId=" + g_config.openId + ",exception=" + p;
					b.logStd("voiceErr", q, 2);
					console.log("voiceErr" + p)
				}
			},
			pause: function(l) {
				if (_manage) {
					return
				}
				var k = e[l];
				if (!k) {
					b.tlog("Sound_pause_err", "这个key:" + l + " 不存在!");
					return this
				}
				k.stop();
				return this
			},
			pauseAll: function() {
				if (_manage) {
					return
				}
				var k = null;
				for (var l in e) {
					k = e[l];
					if (k) {
						k.stop()
					}
				}
				return this
			},
			load: function(p, l, m) {
				if (_manage) {
					return
				}
				if (e[l]) {
					b.tlog("Sound_load_err", "这个key:" + l + " 已经存在!");
					return this
				}
				var k = null,
					o = j;
				typeof m !== "undefined" && (o = m);
				if (/.wav$/.test(p) && b.isIPhone()) {
					o = false
				}
				if (o) {
					k = new LF.webAudio()
				} else {
					k = new LF.media();
					try {
						k.data = new Audio()
					} catch (n) {
						console.warn("ReferenceError: Can't find variable: Audio");
						k.data = {}
					}
					k.data.loop = false;
					k.data.autoplay = false
				}
				k._type = "audio";
				if (p) {
					k.load(p)
				}
				k.readyCallBack = $.Callbacks("unique memory");
				k.addEventListener(LF.event.COMPLETE, function(q) {
					k.complete = true;
					k.readyCallBack.fire(k);
					k.readyCallBack = null;
					b.tlog("sound", l + " ready")
				});
				k._allowPlay = true;
				e[l] = k;
				return this
			},
			onReady: function(l, m) {
				if (_manage) {
					return
				}
				var k = e[l];
				if (!k) {
					b.tlog("Sound_onReady_err", "这个key:" + l + " 不存在!");
					return this
				}
				if (k.complete) {
					m(k)
				} else {
					k.readyCallBack.add(m)
				}
				return this
			},
			cache: e,
		};
		i.load(_resRoot + "/image/button.mp3", "startButton");
		if (g) {
			$.each(g, function(k, l) {
				var n = l.path;
				if (k === 0) {
					i.load(n, k, false);
					if (i.cache["0"]) {
						var m = i.cache["0"].data;
						if (Audio && m instanceof Audio) {
							document.getElementById("pageMusic").appendChild(m)
						}
					}
				} else {
					i.load(n, k)
				}
			});
			if (!_manage) {
				i.cache["0"].data.addEventListener("play", function() {
					$(function() {
						if ($(".soundIcon").length <= 0) {
							b.appendMusicIcon()
						}
						$(".soundIcon").removeClass("soundIconOff")
					})
				}, false);
				i.cache["0"].data.addEventListener("pause", function() {
					$(function() {
						$(".soundIcon").addClass("soundIconOff")
					})
				}, false)
			}
		}
		return i
	};
	b.initCallBack = function(f, e) {
		f = f || {};
		var g = {};
		f.addCallBack = function(h) {
			if (b.getType(h) == "array") {
				for (var j = h.length - 1; j >= 0; j--) {
					arguments.callee(h[j])
				}
				return
			}
			if (typeof h == "string" && typeof g[h] == "undefined") {
				g[h] = null
			}
		};
		f.on = function(h, j) {
			var i = g[h];
			if (typeof i === "undefined") {
				return this
			}
			if (i === null) {
				g[h] = i = $.Callbacks("unique stopOnFalse")
			}
			i.add(j);
			return this
		};
		f.off = function(h, k) {
			var j = this;
			if (typeof h === "undefined") {
				$.each(g, function(l, m) {
					j.off(m, k)
				});
				return j
			}
			var i = g[h];
			if (!i) {
				return j
			}
			if (typeof k === "undefined") {
				i.empty()
			} else {
				i.remove(k)
			}
			return j
		};
		f.fire = function(i) {
			var h = g[i];
			if (h) {
				var j = Array.prototype.slice.call(arguments);
				j.shift();
				return h.fire.apply(h, j)
			}
			return true
		};
		f.fireWith = function(i) {
			var h = g[i];
			if (h) {
				var j = Array.prototype.slice.call(arguments);
				j.shift();
				return h.fireWith.apply(h, j)
			}
			return true
		};
		if (typeof e !== "undefined") {
			f.addCallBack(e)
		}
		return f
	};
	b.initTime = function(e) {
		var j = null,
			h, k = 0;

		function g(l) {
			var m = Math.round(l * 100) / 100;
			var n = m.toString();
			var o = n.indexOf(".");
			if (o < 0) {
				o = n.length;
				n += "."
			}
			while (n.length <= o + 2) {
				n += "0"
			}
			return n
		}
		var f = [70, 280];
		if (g_config.countsTimeType) {
			if (g_config.sortType) {
				f[1] = -1
			}
		} else {
			if (g_config.scoreType) {
				if (!g_config.sortType) {
					f[1] = -1
				}
			} else {
				f[1] = -1
			}
		}
		var i = {
			val: 0,
			pastTime: 0,
			interval: 140,
			range: f,
			target: null,
			isDesc: !g_config.countsTimeType,
			acceList: null,
			initTime: e,
			status: "ended",
			updateFlag: true,
			targetFlag: true,
			frameInc: 0,
			setAcceList: function(m) {
				if (typeof m === "number") {
					var o = m;
					m = [];
					for (var l = 0; l < o; l++) {
						m.push((o - l) * (this.initTime / (o + 1)))
					}
				}
				this.acceList = m
			},
			setTarget: function() {
				var l = g(this.val);
				this.targetFlag && this.target.text(l);
				this.fireWith("setTime", this, [l])
			},
			init: function() {
				if (this.initTime === 99999) {
					return
				}!this.target && (this.target = $(".time"));
				this.val = this.initTime;
				this.pastTime = 0;
				this.setTarget();
				return this
			},
			start: function() {
				if (this.initTime === 99999) {
					return
				}
				h = new Date().getTime() / 1000;
				if (this.updateFlag && this.status === "ended") {
					this.status = "runing";
					this.play()
				} else {
					this.status = "runing"
				}
				return this
			},
			isRunning: function() {
				return this.status === "runing"
			},
			pause: function() {
				this.status = "pause"
			},
			end: function() {
				if (this.status === "ended") {
					return
				}
				clearTimeout(j);
				k = 0;
				this.update();
				this.status = "ended";
				return this
			},
			setTime: function() {
				var l = (new Date).getTime() / 1000;
				var o = l - h;
				var n = this.isDesc ? -1 : 1;
				if (this.range[0] > 0 && o < this.range[0] / 1000) {
					o = this.range[0] / 1000
				} else {
					if (this.range[1] > 0 && o > this.range[1] / 1000) {
						o = this.range[1] / 1000
					}
				}
				this.val += n * o;
				this.pastTime = n * (this.val - this.initTime);
				h = l;
				if (this.isDesc) {
					if (this.acceList) {
						for (var m = 0; m < this.acceList.length; m++) {
							if (this.val <= this.acceList[m] && k == m) {
								k++;
								this.fireWith("acce", this, [k]);
								break
							}
						}
					}
					if (this.val <= 0) {
						this.val = 0;
						this.setTarget();
						clearTimeout(j);
						k = 0;
						this.status = "ended";
						this.fireWith("end", this);
						return
					}
				}
				this.setTarget()
			},
			update: function() {
				if (this.initTime === 99999) {
					return
				}
				if (this.status !== "pause") {
					this.setTime()
				}
				this.fireWith("timer", this, [this.status !== "pause"])
			},
			play: function() {
				this.update();
				if (this.status !== "ended") {
					j = setTimeout(arguments.callee.bind(this), this.interval)
				}
			},
			updateInFrame: function(l) {
				if (this.initTime === 99999) {
					return
				}
				if (this.status === "ended") {
					return
				}
				if (l < 0) {
					l = 0
				}
				this.frameInc += l;
				if (this.frameInc >= this.interval) {
					this.update();
					this.frameInc = 0
				}
			}
		};
		b.initCallBack(i, ["end", "timer", "acce", "setTime"]);
		i.init();
		i.changeTwoDecimal_f = g;
		return i
	};
	b.initGrade = function() {
		var e = function(f) {
				e.set(e.val + f)
			};
		$.extend(e, {
			val: 0,
			set: function(f) {
				e.val = f;
				e.val < 0 && (e.val = 0);
				e.fireWith("setGrade", e, [e.val]);
				e.target && e.target.text(e.val)
			}
		});
		$(function() {
			e.target = $("#grade")
		});
		b.initCallBack(e, ["setGrade"]);
		return e
	};
	b.initAreaLimit = function(g) {
		if (!_manage && g) {
			var e = 5;
			var f = 0;
			var h = setInterval(function() {
				if (f >= e) {
					clearInterval(h);
					return
				}
				f++;
				if (!g_config.ipInfo || !g_config.ipInfo.provice) {
					$.ajax({
						type: "post",
						url: g_config.ajaxUrl + "hdgame_h.jsp?cmd=getIPInfo",
						success: function(j) {
							var i = $.parseJSON(j);
							if (i.success) {
								g_config.ipInfo = i.ipInfo
							}
						}
					})
				} else {
					clearInterval(h);
					return
				}
			}, 1500)
		}
	};
	b.getAreaByWx = function(h) {
		if (g_config.test) {
			g_config.ipInfo.provice = "广东";
			g_config.ipInfo.city = "广州";
			h && h()
		} else {
			try {
				wx.ready(function() {
					if (g_config.isOpenAreaLimit) {
						wx.getLocation({
							type: "wgs84",
							success: function(e) {
								var j = e.latitude;
								var i = e.longitude;
								f(j, i, h)
							},
							fail: function(e) {
								b.statusMsg("当前微信版本不支持定位或没开启定位服务，请联系活动主办单位", "")
							},
							cancel: function() {
								b.statusMsg("用户拒绝了授权地理位置信息", "")
							}
						})
					}
				})
			} catch (g) {
				h && h()
			}
		}
		function f(k, e, l) {
			var j = new qq.maps.Geocoder();
			var i = new qq.maps.LatLng(k, e);
			j.getAddress(i);
			j.setComplete(function(n) {
				if (n) {
					var p = n.detail.addressComponents.city;
					var m = n.detail.addressComponents.province;
					var o = n.detail.addressComponents.country;
					g_config.ipInfo.contry = o;
					g_config.ipInfo.provice = m;
					g_config.ipInfo.city = p;
					l && l()
				}
			});
			j.setError(function() {
				l()
			})
		}
	};
	b.initWxConfig = function(m) {
		b.wxConfigArg = {
			url: m.fullUrl
		};
		k({
			haveAward: g_config.haveAward,
			plInfo: m.plInfo,
			bestRankInfo: g_config.bestRankInfo,
			comfortAwardStyle: g_config.comfort.cas
		});
		wx.config({
			debug: false,
			appId: m.jsSdkAppid,
			timestamp: m.timestamp,
			nonceStr: m.nonce_str,
			signature: m.signature,
			jsApiList: ["checkJsApi", "onMenuShareTimeline", "onMenuShareAppMessage", "onMenuShareQQ", "onMenuShareWeibo", "hideMenuItems", "showMenuItems", "hideAllNonBaseMenuItem", "showAllNonBaseMenuItem", "translateVoice", "startRecord", "stopRecord", "onRecordEnd", "playVoice", "pauseVoice", "stopVoice", "uploadVoice", "downloadVoice", "chooseImage", "previewImage", "uploadImage", "downloadImage", "getNetworkType", "openLocation", "getLocation", "hideOptionMenu", "showOptionMenu", "closeWindow", "scanQRCode", "chooseWXPay", "openProductSpecificView", "addCard", "chooseCard", "openCard"]
		});
		wx.ready(function() {
			$("#awardCollectionBtn").on("touchstart", function() {
				var t = true;
				var q = g_config.wxAward;
				var o = q.genewxcard;
				if (o) {
					if (g_config.status == 0) {
						b.statusMsg("活动尚未发布", "无法加入到微信卡券");
						return
					}
					var p = q.wxcardid;
					var n = $("#awardDetailBox .codeLine .code").text();
					var s = $("#awardDetailBox .codeLine .code").attr("code");
					var r = g_config.award.depositTime;
					b.log(p);
					b.log(n);
					$.ajax({
						type: "post",
						url: g_config.ajaxUrl + "hdgame_h.jsp?cmd=getCardSign&cardTick=" + m.cardTicket + "&cardId=" + p + "&code=" + n + "&openId=" + g_config.openId + "&gameId=" + g_config.gameId,
						error: function() {
							if (m_debug) {
								alert("服务繁忙，请稍候重试")
							}
						},
						success: function(v) {
							b.tlog("getCardSign", v);
							var w = $.parseJSON(v);
							var u = w.data;
							var y = u.codeStatus;
							if (y == 1) {
								b.statusMsg("该兑奖码已被核销，无法放入微信卡包");
								return
							}
							var x = '{"timestamp":"' + u.timestamp + '","openid":"' + g_config.openId + '","nonce_str":"' + u.nonce_str + '","code":"' + n + '","signature":"' + u.sign + '"}';
							b.log($("#awardCollectionBtn").text());
							if ((r && r < Date.parse(new Date())) || $("#awardCollectionBtn").text() == "打开微信卡券") {
								t = false
							}
							b.log("depositTime=" + r);
							if (t) {
								wx.addCard({
									cardList: [{
										cardId: p,
										cardExt: x
									}],
									success: function(A) {
										b.tlog("addCard", A);
										b.logDog(1000108, 1);
										var z = A.cardList[0];
										t = false;
										$("#awardCollectionBtn").text("打开微信卡券");
										if (z.isSuccess) {
											$.ajax({
												type: "get",
												url: g_config.ajaxUrl + "hdgame_h.jsp?cmd=setCode&code=" + s + "&gameId=" + g_config.gameId,
												error: function() {
													if (m_debug) {
														alert("服务繁忙，请稍候重试")
													}
												},
												success: function(C) {
													b.tlog("setCode", C);
													var B = $.parseJSON(C);
													g_config.award.depositTime = Date.parse(new Date())
												}
											})
										}
									}
								})
							} else {
								wx.openCard({
									cardList: [{
										cardId: p,
										code: n
									}]
								})
							}
						}
					})
				}
			})
		});
		wx.ready(function() {
			if (true) {
				wx.hideMenuItems({
					menuList: ["menuItem:copyUrl"]
				})
			} else {
				wx.showAllNonBaseMenuItem()
			}
			wx.hideMenuItems({
				menuList: ["menuItem:copyUrl"]
			});
			if (g_config.isForbidShareactivity) {
				b.tlog(g_config);
				console.log(1);
				wx.hideMenuItems({
					menuList: ["menuItem:copyUrl", "menuItem:share:appMessage", "menuItem:share:timeline", "menuItem:share:qq", "menuItem:share:weiboApp", "menuItem:share:facebook", "menuItem:share:QZone", "menuItem:originPage", "menuItem:openWithQQBrowser", "menuItem:openWithSafari"]
				})
			}
			try {
				if (m.isHideShareBtn) {
					wx.hideMenuItems({
						menuList: ["menuItem:share:timeline", "menuItem:share:qq", ]
					})
				}
				wx.error(function(o) {
					if (m_debug) {
						alert($.toJSON(o))
					}
				})
			} catch (n) {
				alert(n.message)
			}
		});
		wx.ready(function() {
			var n = window.navigator.userAgent.indexOf("iPhone") > -1 || window.navigator.userAgent.indexOf("iPad") > -1 || window.navigator.userAgent.indexOf("iPod") > -1;
			var o = window.navigator.userAgent.indexOf("Android") > -1;
			var p = "unknown";
			if (n) {
				p = "apple"
			} else {
				if (o) {
					p = "android"
				}
			}
			if (!g_config.isFromZhuliShare && isPublish) {
				wx.getNetworkType({
					success: function(q) {
						var r = q.networkType;
						var s = "other";
						if (r === "wifi") {
							s = "wifi"
						} else {
							s = "other"
						}
						$.ajax({
							url: g_config.ajaxUrl + "hdgame_h.jsp?cmd=setBehavior&gameId=" + g_config.gameId + "&openId=" + g_config.openId,
							type: "post",
							data: {
								netType: s,
								sysType: p
							},
							success: function(t) {}
						})
					}
				})
			}
		});

		function l(u, r, t) {
			if (!_manage) {
				u = u.replace("红包", "")
			}
			u = b.decodeHtml(u);
			r = b.removeUrlArg(r, "code", "state");
			var p = r;
			if (!m.dynamicShareUrlRootEmpty) {
				var o = r.split("?")[1].split("&");
				var q = "";
				for (var s = 0; s < o.length; s++) {
					var n = o[s];
					if (n.split("=")[0] === "aid" || n.split("=")[0] === "id" || n.split("=")[0] === "style") {
						continue
					}
					if (q.length > 0) {
						q += "&"
					}
					q += n
				}
				if (m_debug) {
					p = m.dynamicShareUrlRoot + "share.jsp?fsl=" + m.fsl + "&aid=" + g_config.aid + "&id=" + g_config.gameId + "&" + q
				} else {
					p = m.dynamicShareUrlRoot + g_config.aid + "/" + g_config.gameId + "/share.html?fsl=" + m.fsl + "&" + q
				}
			}
			r = b.setUrlArg(r, ["otherplayer", g_config.openId]);
			p = b.setUrlArg(p, ["otherplayer", g_config.openId]);
			r = b.setUrlArg(r, ["shareDeep", m.shareDeep + 1]);
			p = b.setUrlArg(p, ["shareDeep", m.shareDeep + 1]);
			b.log(m.openStrongAttention);
			if (m.openStrongAttention) {
				r = b.setUrlArg(r, ["isOfficialLianjie", "false"]);
				p = b.setUrlArg(p, ["isOfficialLianjie", "false"])
			}
			if (r === b.wxConfigArg.url && b.wxConfigArg.desc === u && b.wxConfigArg.callBack === t && b.wxConfigArg.pyqUrl === p) {
				return
			}
			wx.ready(function() {
				var w = m.shareImg;
				if (!/^http:/.test(w) && /^\/\//.test(w)) {
					w = "http:" + w
				}
				try {
					wx.onMenuShareAppMessage({
						title: b.decodeHtml(m.activeName),
						desc: u,
						link: r,
						imgUrl: w,
						type: "link",
						success: function() {
							$.ajax({
								type: "post",
								url: g_config.ajaxUrl + "hdgame_h.jsp?cmd=setShareNum&aid=" + g_config.aid + "&gameId=" + g_config.gameId + "&openId=" + g_config.openId + "&type=friend&shareDeep=" + g_config.shareDeep,
								error: function() {
									if (m_debug) {
										alert("服务繁忙，请稍候重试")
									}
								},
								success: function(x) {
									if (!m_debug) {
										b.logDog(1000004, g_config.srcId);
										b.logObjDog(1000092, 2, g_config.gameId);
										b.logDog(1000055, 0)
									}
									i(x);
									t && t(x)
								}
							})
						},
						cancel: function() {},
						fail: function(x) {
							alert("分享失败请退出微信重新登录！");
							b.logStd("wxShareFailErr", JSON.stringify(x), 2)
						}
					});
					wx.onMenuShareTimeline({
						title: u,
						link: p,
						imgUrl: w + "xxxxx",
						success: function(x) {
							$.ajax({
								type: "post",
								url: g_config.ajaxUrl + "hdgame_h.jsp?cmd=setShareNum&aid=" + g_config.aid + "&gameId=" + g_config.gameId + "&openId=" + g_config.openId + "&type=pyq&shareDeep=" + g_config.shareDeep,
								error: function() {
									if (m_debug) {
										alert("服务繁忙，请稍候重试")
									}
								},
								success: function(y) {
									if (!m_debug) {
										b.logDog(1000004, g_config.srcId);
										b.logObjDog(1000092, 2, g_config.gameId);
										b.logDog(1000055, 1)
									}
									i(y);
									t && t(y)
								}
							})
						},
						cancel: function(x) {},
						fail: function(x) {
							if (m_debug) {
								alert(JSON.stringify(x))
							}
						}
					});
					b.tlog("当前分享朋友链接：", r);
					b.tlog("当前分享朋友圈链接：", p)
				} catch (v) {
					alert(v.message)
				}
			});
			b.wxConfigArg.desc = u;
			b.wxConfigArg.url = r;
			b.wxConfigArg.callBack = t;
			b.wxConfigArg.pyqUrl = p
		}
		function j() {
			var n = Array.prototype.slice.call(arguments);
			n.unshift(b.wxConfigArg.url);
			l(b.wxConfigArg.desc, b.setUrlArg.apply(b, n), b.wxConfigArg.callBack)
		}
		function h() {
			var n = Array.prototype.slice.call(arguments);
			n.unshift(b.wxConfigArg.url);
			l(b.wxConfigArg.desc, b.removeUrlArg.apply(b, n), b.wxConfigArg.callBack)
		}
		function g(n) {
			n = n.replace(/\u200b/g, "").replace(/&nbsp;/g, " ").replace(/&lt;/g, "<").replace(/&gt;/g, ">");
			return n.replace(/<span class=["']tag["'] contenteditable=["']?false["']?>(.+?)<\/span>/g, function(p, o) {
				switch (o) {
				case "玩家名称":
					if (g_config.style == 48) {
						return b.hykjUserName
					} else {
						if (b.captainUserName) {
							return b.captainUserName
						} else {
							return g_config.userName
						}
					}
				case "游戏成绩":
				case "当前成绩":
					if (g_config.style == 49) {
						return parseInt(b.currentScore) + g_config.scoreUnit
					} else {
						return g_config.scoreType ? b.currentScore : parseInt(b.currentScore)
					}
				case "游戏排名":
					return b.currentRank;
				case "奖品名称":
					return b.currentAward;
				case "奖项等级":
					return b.currentAwardStyle;
				case "收集的字":
					return '"' + b.ccndrmTitle + '"'
				}
			})
		}
		function e(n, o) {
			if (_manage) {
				return
			}
			typeof n === "undefined" && (n = b.wxConfigArg.url);
			typeof o === "undefined" && (o = b.wxConfigArg.callBack);
			if (g_config.drawType != 3) {
				if (g_config.style == 49) {
					l(g(m.wxShareText_def), n, o);
					return
				}
				if (b.currentAward) {
					l(g(m.wxShareText_award), n, o)
				} else {
					if (b.currentRank) {
						l(g(m.wxShareText_rank), n, o)
					} else {
						l(g(m.wxShareText_def), n, o)
					}
				}
			}
		}
		function i(p) {
			var n = $.parseJSON(p);
			b.tlog("shareaward", n.shareaward);
			if (n && n.shareaward) {
				drawTimesLimit += m.addDrawTime;
				if (g_config.style != 50) {
					drawTotalLimit += m.addDrawTime
				}
				if (g_config.drawType != 0 && b.resulePoup.resuleArg) {
					b.resulePoup.resuleArg.count += m.addDrawTime;
					b.resulePoup.resuleArg.totalCount += m.addDrawTime
				}
				$(".dayDrawCount").text(drawTimesLimit - count < 0 ? 0 : (drawTimesLimit - count));
				$(".totalDrawCount,#totalDrawCount").text(drawTotalLimit - totalCount < 0 ? 0 : (drawTotalLimit - totalCount));
				g_config.showHelpGuide = false;
				PlayInfo.addPlayTimesLimit(m.addDrawTime);
				if (g_config.style == 50) {
					var o = $(".gameScoreUnit").eq(0).text();
					qdydjAddText($("#grade .specil"), m.addDrawTime);
					b.statusMsg("分享成功，获得" + m.addDrawTime + o)
				}
			}
			$("#helpGuideBox").hide()
		}
		function k(p) {
			if (_manage) {
				return
			}
			var n = ["一", "二", "三", "四", "五", "六", "七", "八"];
			var t = p.haveAward;
			if (t) {
				var o = p.plInfo;
				b.currentAward = o.award;
				var q = o.awardLevel;
				if (q != 900 && q > 0) {
					if (m.nameList && m.nameList.length >= q) {
						b.currentAwardStyle = m.nameList[q - 1]
					} else {
						b.currentAwardStyle = n[q - 1]
					}
				} else {
					b.currentAwardStyle = p.comfortAwardStyle
				}
			}
			var s = p.bestRankInfo;
			b.currentRank = s.rank;
			g_config.style == 63 && !s.score && (s.score = "0");
			b.currentScore = s.score;
			e()
		}
		var f = {};
		f.handleShareAward = i;
		f.setWxShareByStatus = e;
		f.setShareText = g;
		f.removeWxShareUrlArg = h;
		f.setWxShareUrlArg = j;
		f.setWxShare = l;
		f.setWxShareArg = k;
		b.wxConfig = f
	};
	b.addJoinGameBehavior = function() {
		var f = typeof g_config.ipInfo.city != "undefined" ? g_config.ipInfo.city : "";
		var e = typeof g_config.ipInfo.provice != "undefined" ? g_config.ipInfo.provice : "";
		$.ajax({
			url: g_config.ajaxUrl + "hdgame_h.jsp?cmd=joinGameBehavior",
			type: "post",
			data: {
				gameId: g_config.gameId,
				openId: g_config.openId,
				shareDeep: g_config.shareDeep,
				provice: e,
				city: f
			},
			success: function(g) {}
		})
	};
	b.setGameEnd = function() {
		var g = $(".bottomSkill");
		var f = $(window).height() / $(window).width() < 1.575;
		var e = f ? $(window).width() * 1.575 : $(window).height();
		$(".home").html("");
		$(".home").append(g);
		$(".home").append('<p style="font-size:0.9rem; color:#e7e7e7; text-align: center; padding-top:10rem; line-height: 1.3rem">活动已结束<br>请期待下次活动</p>');
		$(".home").css({
			height: e,
			background: "#424242",
			width: "100%",
			position: "fixed",
			"z-index": "500"
		});
		document.title = "活动已结束";
		$(".home").addClass("showImp");
		$(".homeBtnBox").addClass("showImp");
		$(".ruleImg,#ruleImg").addClass("showImp");
		$(".gameInfoBox").addClass("hideImp");
		$(".showAwardBox").addClass("hideImp");
		$("#informBtn").addClass("hideImp");
		hg.sound.allowPlay = false;
		hg.sound.pauseAll()
	};
	b.showRuleDecide = function() {
		if (g_config.isNotSelf && g_config.createTime > 1494376826000) {
			return
		}
		var e = g_config.aid + "|" + g_config.gameId + "|" + g_config.openId;
		if (!b.getLocalStorage(e)) {
			b.setLocalStorage(e, "-");
			if (g_config.createTime < 1494376826000) {
				showRule()
			} else {
				showActivityKitTip()
			}
		}
	};
	b.openLocation = function(i, g, f, e, j, h) {
		wx.openLocation({
			latitude: i,
			longitude: g,
			name: f,
			address: e,
			scale: j || 25,
			infoUrl: h || ""
		})
	};
	b.computeDistance = function(g, i, h, j) {
		var f = new qq.maps.LatLng(g, i);
		var e = new qq.maps.LatLng(h, j);
		return qq.maps.geometry.spherical.computeDistanceBetween(f, e)
	};
	b.initJsFoot = function(f) {
		$("body").data("hd-initHdGameJsfootArg", {
			soundIcon_l: f.soundIcon_l,
			soundIcon_t: f.soundIcon_t
		});
		$(function() {
			b.sortRuleBox.init(f.rulesortstr);
			b.unPublishMsg();
			if (isPublish) {
				$(".unPublish").css("top", -2 + "rem")
			}
			var n = b.decodeHtml(f.hostName);
			var i = b.decodeHtml(f.hostLink).replace("http://", "");
			var l = b.decodeHtml(f.menuLink).replace("http://", "");
			var h = $(".menuName");
			if (f.fromFav && g_config.haveAward) {
				$("#resule-gift-sucImg").data("openCode", f.fromFav);
				showAwardDetail4Draw()
			}
			var k = g_config.createTime < 1494376826000 ? (((!_manage && f.openAwardExp)) ? true : false) : (!_manage ? true : false);
			if (k) {
				if (!(g_config.style == 55)) {
					b.showRuleDecide()
				}
			}
			$("#showRankNum").text(rankShowNum);
			$(".hostName").text(n);
			$(".resule-status-send").on("touchstart", function() {
				if (_manage) {
					return
				}
				if (g_config.haveAward) {
					b.changePoup(3, "", true)
				} else {
					luckDraw()
				}
			});
			$("#helpGuideBox").on("touchend", function() {
				$("#helpGuideBox").hide()
			});
			$("#awardInfo").on("click", ".codeInfoBox", function(o) {
				if (_manage) {
					return
				}
				b.openAwardDetail.call(this, o)
			});
			$("#resule-gift-sucImg, .clickHere").on("touchstart", function(o) {
				g_config.firstTouchRank = g_config.firstTouchAward = g_config.firstTouchWinList = true;
				showAwardDetail4Draw()
			});
			$(".awardCloseIcon").on("touchstart", function() {
				b.wxConfig.removeWxShareUrlArg("fromFav");
				$("#awardDetailBox").hide();
				$("#resule-gift-box,resule-status-box").hide();
				$(".gameBox").add(".home").removeClass("overflow-y-hidden");
				g_config.showSkillSup && $(".bottomSkill").show()
			});
			$(".codeImg").on("click", function() {
				$(".codeDetailImgBox").show()
			});
			$(".codeDetailImgBox").click(function() {
				$(this).hide()
			});
			$("#useStoreBox .moreBtn").click(function() {
				if (_manage) {
					return
				}
				$("#storeListBox").show()
			});
			$("#storeListBox .closeBtn").click(function() {
				$("#storeListBox").hide()
			});
			if (g_config.isAngular) {
				$("#codeDetailInfoBox .copy").on("click", function() {
					if (_manage) {
						return
					}
					$(".codeCopyDetailMask").show()
				});
				$(".codeCopyDetailMask").click(function() {
					$(this).hide()
				});
				if (!g_config.afterWxCard) {
					$(".awardCusText").on("touchstart", function() {
						var o = $("#awardCusTextInfo");
						if (o.css("display") == "block") {
							$(this).find(".awardDeailIcon").removeClass("awardIncoSlideDown");
							$(this).find(".awardDeailIcon").addClass("awardIncoSlideUp")
						} else {
							$(this).find(".awardDeailIcon").removeClass("awardIncoSlideUp");
							$(this).find(".awardDeailIcon").addClass("awardIncoSlideDown")
						}
						o.slideToggle()
					})
				}
			}
			if (f.isHideFxts) {
				$(".resule-fxts").hide()
			}
			g_config.style != 9 && g_config.showSkillSup && b.logDog(1000028, 0);
			if (g_config.aid == 7171826 && g_config.style != 9 && g_config.showSkillSup) {
				b.logDog(1000062, 2)
			} else {
				if (g_config.aid == 8566249 && g_config.style != 9 && g_config.showSkillSup) {
					b.logDog(1000067, 2)
				}
			}
			if (g_config.aid == 7171826 || g_config.aid == 8566249) {
				//$(".home,.showBottomSkillPage").append('<div class="bottomSkill skillInfo">本游戏由 <span class="yySkill" style="text-decoration:underline;"></span> 提供</div>');
				$(".yySkill").click(function() {
					if (g_config.aid == 7171826) {
						b.logDog(1000062, 3)
					} else {
						if (g_config.aid == 8566249) {
							b.logDog(1000067, 3)
						}
					}
					$("#yyAttentionMask").show()
				})
			} else {
				if (g_config.status == 3) {
					//$(".home,.showBottomSkillPage").append('<div class="bottomSkill skillInfo">页面技术由 <a href=' + f.supportUrl + ">" + f.skillSupport + "</a> 提供</div>")
				} else {
					if (g_config.style != 46) {
						if (g_config.style == 55) {
							//$(".gameBox,.showBottomSkillPage").append('<div class="bottomSkill skillInfo">页面技术由 ' + f.skillSupport + " 提供</div>")
						} else {
							//$(".home,.showBottomSkillPage").append('<div class="bottomSkill skillInfo">页面技术由 ' + f.skillSupport + " 提供</div>")
						}
					}
				}
			}
			_manage && $("a").on("click", function(o) {
				o.preventDefault()
			});
			$(".homePoupMask").on("touchend", function(o) {
				o.preventDefault();
				o.stopPropagation();
				if (_manage) {
					return
				}
				if ($(o.target).hasClass("homePoupMask")) {
					$(this).hide()
				}
			});
			$(".menuBtnBox").on("touchend", function() {
				b.logDog(1000012)
			});
			if (f.showJoinNum) {
				$("#joinNumLine").show()
			} else {
				$("#joinNumLine").hide()
			}
			if (f.showRedDot) {
				$("#Award_Round_Dot").css("display", "inline-block")
			}
			if (f.showMDRedDot) {
				$("#Mingdan_Round_Dot").css("display", "inline-block")
			}
			if (f.showAwardBtn) {
				$("#myAwardBtn").show()
			}
			if (f.isSelAwardLine) {
				$("#selfAwardLine").show();
				$("#awardLineBox").hide()
			} else {
				$("#awardLineBox").show();
				$("#selfAwardLine").hide()
			}
			if (!f.showSkillSup) {
				$(".skillInfo").hide();
				$(".skillInfo").addClass("hideSkill")
			}
			if (f.menuStyle == 1) {
				$(".menuBtnBox").hide()
			} else {
				if (f.menuStyle == 2) {
					if ($.trim(l).length == 0) {
						h.css("text-decoration", "none")
					} else {
						h.attr("href", b.decodeHtml(f.menuLink))
					}
				} else {
					if (f.menuStyle == 3) {
						(function() {
							var o = $("#attentionMask");
							b.createQrImg($("#attentionPoup"), l);
							$(".menuBtnBox").on("touchend", function() {
								o.show();
								return false
							})
						})()
					}
				}
			}
			if ($.trim(i).length == 0) {
				$(".hostName").css("text-decoration", "none");
				$("a.hostName").attr("href", "#")
			}
			if (!isLimitDraw) {
				$(".totalDraw").hide()
			} else {
				$(".totalDraw").show();
				$(".dayDraw").hide();
				if ((drawTimesLimit - count) < (drawTotalLimit - totalCount)) {
					$(".dayDraw4Total").show()
				}
			}
			if ($("#awardExplain").text().length == 0) {
				$("#awardExplain_h").hide()
			}
			$("a.hostName").click(function() {
				b.logDog(1000013)
			});
			if (skillSupportType == 1) {
				$(".skillLine").css("padding", "0");
				$(".skillCont").hide()
			} else {
				if (skillSupportType == 3) {
					$(".skillName").text(skillName);
					$(".skillName").attr("href", skillLink)
				}
			}
			if (skillSupportType != 3 || skillLink.indexOf("mp.weixin.qq.com/s?__biz=MjM5MTk5MjI3OA==&mid=209854000&idx=1&sn=82241d924839270d3ea820ad2d56c01b#wechat_redirect") >= 0) {
				$(".skillName").click(function() {
					if (_manage) {
						return
					}
					b.logDog(1000013);
					if (g_config.authVer == HdVerDef.FREE) {
						b.logDog(1000070, 1)
					} else {
						if (g_config.authVer == HdVerDef.BJ) {
							b.logDog(1000070, 3)
						} else {
							if (g_config.authVer == HdVerDef.BY) {
								b.logDog(1000070, 5)
							}
						}
					}
					$("#skillSupMask").show();
					return false
				})
			}
			$(".hdskillInfo a").click(function() {
				if (_manage) {
					return false
				}
				b.logDog(1000005, 0);
				if (g_config.authVer == HdVerDef.FREE) {
					b.logDog(1000070, 0)
				} else {
					if (g_config.authVer == HdVerDef.BJ) {
						b.logDog(1000070, 2)
					} else {
						if (g_config.authVer == HdVerDef.BY) {
							b.logDog(1000070, 4)
						}
					}
				}
				typeof g_config.isAOpenId == "number" && b.logDog(1000115, 3 + g_config.isAOpenId);
				if (g_config.aid == 7171826 || g_config.aid == 8566249) {
					if (g_config.aid == 7171826) {
						b.logDog(1000062, 1)
					} else {
						if (g_config.aid == 8566249) {
							b.logDog(1000067, 1)
						}
					}
					$("#yyAttentionMask").show();
					return false
				} else {
					if (!g_config.isOem) {
						$("#skillSupMask").show();
						return false
					}
				}
			});
			if (hg.sound.list && hg.sound.list.length > 0) {
				b.appendMusicIcon();
				if (f.drawType == 1 || g_config.style == 4 || g_config.style == 61) {
					$(".home .soundIcon").hide()
				}
				if (g_config.style == 27) {
					$(".home .soundIcon").hide();
					hg.sound.allowPlay = false;
					hg.sound.pauseAll()
				}
			}
			if (!_manage) {
				$(".gameBgBox .soundIcon").css("z-index", "100");
				$(".soundIcon").addClass("soundIconPlay");
				var m = "soundPause|" + g_config.aid + "|" + g_config.gameId + "|" + g_config.openId;
				$(".soundIcon").on("touchstart", function() {
					event.stopPropagation();
					event.preventDefault();
					var o = $(".soundIcon");
					if (!o.hasClass("soundIconOff")) {
						hg.sound.allowPlay = false;
						hg.sound.pauseAll();
						b.setLocalStorage(m, "-")
					} else {
						hg.sound.allowPlay = true;
						hg.sound.readyPlay(0, 0, "loop");
						b.removeLocalStorage(m)
					}
				});
				if (b.getLocalStorage(m)) {
					hg.sound.allowPlay = false;
					hg.sound.pauseAll()
				}
				$("#ruleImg").addClass("ruleImgAnimate");
				$("#startBtnImg,.startBtnImg").on("touchend", function(o) {
					if (!startBtnAjax.call(this, o)) {
						return
					}
					hg.sound.play("startButton");
					if (typeof hg.sound.cache[0] !== "undefined" && typeof hg.sound.cache[0].playing !== "undefined" && !hg.sound.cache[0].playing && g_config.style != 51 && g_config.style != 49 && g_config.style != 9 && g_config.style != 48 && g_config.style != 57 && g_config.style != 62 && g_config.style != 58) {
						if (g_config.style == 27 && !b.getLocalStorage(m)) {
							hg.sound.allowPlay = true
						}
						hg.sound.readyPlay(0, 0, "loop")
					}
				});
				!b.notNeedStartBtn && hg.assets.onload(startBtnDelay)
			} else {
				if (g_config.isAngular) {
					b.initModuleLayer("#awardDetailBox .codeTimeFixedRange,#awardDetailBox .codeTimeFixedTerm", 1, "awardTime")
				}
				hg.edit.cache["resule-gift-sucImg"] = b.filterAward(g_config);
				b.initModuleLayer([
					["#joinNumLine", 0, "joinNum", null, true],
					["#gameTopBar", -2, "gameTopBar", null, "样式设置"],
					["#logoImg", 2, "logoImg"],
					["#awardLine,#selfAwardLine", 1, "awardSetting"],
					["#gameDateTime", 0, "gameTime"],
					["#explainBox,#awardExplainBox,#resule-gift-explain", 0, "explain"],
					["#resule-status-count", 2, "drawInfo"],
					[".hostLine", g_config.storeId == 0 ? 2 : -2, "hostLine"],
					["#skillLine", 1, "skillLine"],
					["#rankBox", 1, "rankBox"],
					[".resule-status-minscore", 2, "minscore"],
					[".menuBtnBox", 2, "menuBtn"],
					["#awardDetailBox .awardName", 1, "awardName"],
					["#awardDetailBox .awardSubTitle", 1, "awardSubTitle"],
					["#awardDetailBox .timelimitLine", 1, "timelimitLine"],
					["#awardDetailBox .addressLine", 1, "addressLine"],
					["#awardDetailBox .noticeLine", 1, "noticeLine"],
					["#awardDetailBox .awardCusBtn", 1, "awardCusBtn"],
					[g_config.style == 55 ? '.gameBox .soundIcon:not(".soundIconPlay")' : g_config.style == 49 ? '.body .soundIcon:not(".soundIconPlay")' : '.home .soundIcon:not(".soundIconPlay")', -2, "#limitRange"],
					["#awardDetailBox .codeOptInfo", 1, "codeOptInfo"],
					["#awardDetailBox .webCashBtn", 1, "webCashBtn"],
					["#awardDetailBox .servicePhone", 1, "servicePhone"],
					["#resule-gift-sucImg", -1, "", hg.edit.cache["resule-gift-sucImg"]],
					["#titleImg", -1, "", [{
						from: "#titleImg",
						title: "标题图片",
						limit: "5000k",
						defSrc: f.titleImg_path_def
					}]],
					["#startBtnImg", -1, "", [{
						from: "#startBtnImg",
						title: "按钮图片",
						limit: "5000k",
						defSrc: f.startImg_path_def
					}]],
					["#ruleImg", -1, "", [{
						from: "#ruleImg",
						title: "活动奖品",
						limit: "5000k",
						defSrc: f.awardIconImgPath_def
					}]]
				]);
				if (!g_config.afterWxCard) {
					b.initModuleLayer([
						["#awardDetailBox .awardCusText", 1, "awardCusText"],
						[".codeImg", 1, "codeImg"], ])
				}
				$(".titleImg").addClass("abs");
				b.moduleSlaveImgResize([
					[$("#titleImg"),
					{
						width: f.titleImg_w_def,
						height: f.titleImg_h_def
					}],
					[$("#startBtnImg"),
					{
						width: f.startBtn_w_def,
						height: f.startBtn_h_def
					}],
					[$("#logoImg"),
					{
						width: f.logoImg_w_def,
						height: f.logoImg_h_def
					}, "#limitRange"]
				]);
				b.moduleDraggale([
					["#titleImg", true],
					["#startBtnImg", true],
					["#logoImg", true, "#limitRange"],
					["#ruleImg", false, "#limitRange"],
					["#joinNumLine", false],
					["#drawInfo", false],
					[g_config.style == 55 ? '.gameBox .soundIcon:not(".soundIconPlay")' : g_config.style == 49 ? '.body .soundIcon:not(".soundIconPlay")' : '.home .soundIcon:not(".soundIconPlay")', false]
				]);
				j($("#logoImg").closest(".ui-wrapper"), 80);
				j($("#titleImg").closest(".ui-wrapper"), 70);
				j($("#drawImg").closest(".ui-wrapper"), 80);
				j($("#ruleImg"), 75);

				function j(p, o) {
					p.css("z-index", o)
				}
				$("#theGetPricePic,#theGetPricePicTwo,#theGetPricePicThree").setResizableOption({
					containment: ".cannotGetThePriceBox",
				}).setDraggableOption({
					containment: ".cannotGetThePriceBox",
				});
				$("#resule-gift-sucImg").setResizableOption({
					handles: "s,e,w,se,sw",
					dxRatio: 2,
					containment: false,
				}).addResizableFn("start", function(o, p) {
					$(this).add($(this).parent()).css({
						"max-height": (parseInt($("#resule-gift-scrollWrap").css("height")) - $(this).offset().top) / g_rem + "rem"
					})
				}).addResizableFn("resize", function(p, q) {
					$(this).add($(this).parent()).css({
						left: 0,
						top: 0,
					});
					var o = parseInt($("#resule-gift-scrollWrap").css("height")) - $(this).offset().top;
					if ($(this).height() > o) {
						$(this).add($(this).parent()).css({
							"max-height": o / g_rem + "rem"
						})
					}
				});
				b.moduleSlaveImgResize($("#resule-gift-sucImg"), {
					width: f.awardImg_w_def,
					height: f.awardImg_h_def
				});
				$("#resule-gift-sucImg").add($("#resule-gift-sucImg").parent()).css({
					"margin-left": "auto",
					"margin-top": "1.6rem",
					"margin-right": "auto",
					"margin-bottom": "1.6rem",
				});
				b.sortRuleBox.addBtn();
				hg.on("save", function(o) {
					var p = "";
					$("#ruleBox .poupLine").each(function(r, s) {
						var q = $(this).data("sortkey");
						if (q) {
							p += q
						}
					});
					o.rulesortstr = p
				});
				(function() {
					if (hg.sound.list && hg.sound.list.length > 0) {
						var o = ".home,.gameBgBox";
						if (g_config.style == 34) {
							o = "#gameTopBar,#gameLayerBox1,#gameLayerBox2,#gameLayerBox3"
						} else {
							if (g_config.style == 45 || g_config.style == 60) {
								o = ".gameInfoBoxMain"
							} else {
								if (g_config.style == 48) {
									o = "#gameContent,.friendEnterBoxer"
								} else {
									if (g_config.style == 9) {
										o = "#openBox"
									} else {
										if (g_config.style == 54) {
											o = ".home"
										} else {
											if (g_config.style == 57) {
												o = ".home"
											} else {
												if (g_config.style == 52) {
													o = "#gameBoxPage"
												} else {
													if (g_config.style == 47) {
														o = ".home"
													} else {
														if (g_config.style == 49) {
															o = ".body"
														} else {
															if (g_config.style != 0 && g_config.style != 1 && g_config.style != 2 && g_config.style != 24 && g_config.style != 50) {
																o = ".gameBgBox"
															} else {
																if (g_config.style == 50) {
																	o = ".home"
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
						parent.Edit.addEditBtn("编辑音效", o, function() {
							parent.Edit.showEditByGame(-4, "", []);
							return false
						})
					}
					g_config.style != 49 && parent.Edit.addEditBtn("编辑背景", "#ruleImg,.home,.gameBgBox,.gameBgBox2", function() {
						var q = [];
						var t = {};
						if ($(".home").is(":visible")) {
							t.from = "#homeBg";
							t.defSrc = f.homeBgPath_def
						} else {
							if ($(".gameBgBox2").is(":visible")) {
								t.from = "#gameBg2" || ".gameBgBox2";
								t.defSrc = f.gameBg2Path_def
							} else {
								if ($(".gameBgBox").is(":visible")) {
									t.from = "#gameBg";
									t.defSrc = f.gameBgPath_def
								}
							}
						}
						if (hg.edit && hg.edit.bgList) {
							var s, r;
							for (var p = hg.edit.bgList.length - 1; p >= 0; p--) {
								s = hg.edit.bgList[p];
								r = $(s.from);
								if (r.length > 0 && r.eq(0).is(":visible")) {
									t = s;
									break
								}
							}
						}
						t.title = "背景图片";
						t.size = "640px*1136px";
						t.limit = "5000k";
						q.push(t);
						parent.Edit.showEditByGame(-1, "", q);
						return false
					})
				})();
				hg.edit && hg.edit.setAllEdit();
				startBtnDelay()
			}
		});

		function e() {
			$(".one").hide().siblings().show();
			$("#resule-status-box").show();
			$("#resule-status-head p").show();
			$(".resuleBox").show();
			$(".resule-bgLight").hide();
			$("#resule-status-ribbon").hide();
			$(".little-PK").show().siblings().hide();
			$(".resule-status-again").hide();
			$(".resule-status-home").hide();
			$(".resule-status-rightNow").show().siblings().hide();
			$(".resule-status-firstPage").show()
		}
		function g() {
			$("#resule-status-box").hide();
			$("#resule-status-head p").hide();
			$(".resuleBox").hide();
			$(".resule-bgLight").show();
			$("#resule-status-ribbon").show();
			$(".little-PK").hide().siblings().show();
			$(".resule-status-again").show();
			$(".resule-status-home").show();
			$(".resule-status-rightNow").hide().siblings().show();
			$(".one").show().siblings().hide();
			$("#resule-status-ribbon").show();
			$(".resule-status-firstPage").hide()
		}
		$(function() {
			$(".one").show();
			$(".resule-status-firstPage").hide();
			if (g_config.drawType == 1 && !_manage && otherPlayerInfo && typeof otherPlayerInfo.headImg !== "undefined" && typeof otherPlayerInfo.name !== "undefined" && typeof otherPlayerInfo.score !== "undefined" && typeof otherPlayerInfo.rank !== "undefined" && typeof otherPlayerInfo.award !== "undefined" && false) {
				var h = "PKrecord|" + otherPlayerInfo.aid + "|" + otherPlayerInfo.gameId + "|" + otherPlayerInfo.openId;
				if (!b.getLocalStorage(h)) {
					if (otherPlayerInfo.award != "") {
						$(".WhetherAward").text("获得" + otherPlayerInfo.award).show()
					}
					$(".PKner-A img").attr("src", otherPlayerInfo.headImg);
					$(".userA-name").text(otherPlayerInfo.name);
					$(".fighter-B").text(otherPlayerInfo.name);
					$(".othergrade .resuleArg").text(otherPlayerInfo.score);
					$("#rankB .resuleArg").text(otherPlayerInfo.rank);
					e();
					b.setLocalStorage(h, "-")
				}
			}
			$(".winAWard a").on("touchend", function() {
				showRule()
			});
			$(".resule-status-rightNow").on("touchend", function() {
				hg.on("startGame", function() {
					g();
					hg.off("startGame", arguments.callee)
				});
				$("#startBtnImg").trigger("touchstart");
				$("#startBtnImg").trigger("touchend")
			});
			$(".resule-status-firstPage").on("touchend", function() {
				g()
			});

			function k(l) {
				return function(r, q) {
					var n, m;
					if (typeof r === "object" && typeof q === "object" && r && q) {
						n = r[l];
						m = q[l];
						if (n === m) {
							return 0
						}
						if (typeof n === typeof m) {
							return n < m ? -1 : 1
						}
						return typeof n < typeof m ? -1 : 1
					}
				}
			}
			var i = g_config.style == 55 ? $(".gameBox,.showAwardBoxPage") : $(".home,.showAwardBoxPage");
			if (_manage) {
				i.append('<div class="showAwardBox"><ul class="awardInfoList"><li><div class="uerItem"><img src="' + g_config.headImg + '"><span class="winner">范女神<span>获得了<span class="award">100元优惠券</span></div><div class="uerItem"><img src="' + f.headImg2 + '"><span class="winner">小星儿<span>获得了<span class="award">50元优惠券</span></div><div class="uerItem"><img src="' + f.headImg3 + '"><span class="winner">LVYD<span>获得了<span class="award">30元优惠券</span></div><div class="uerItem"><img src="' + f.headImg4 + '"><span class="winner">萌妹子<span>获得了<span class="award">10元优惠券</span></div></li></ul></div>');
				$("#skillLine").css("min-height", "1rem")
			} else {
				if (!_manage && playerAwardList.length > 3) {
					i.append('<div class="showAwardBox"><ul class="awardInfoList"><li></li></ul></div>');
					var j = "";
					$.each(playerAwardList, function(l, m) {
						j += '<div class="uerItem"><img src="' + JSON.parse(this.info).headImg + '"><span class="winner">' + this.name + '<span>获得了<span class="award">' + this.award + "</span></div>"
					});
					if (g_config.style == 55) {
						$(".showAwardBox").hide();
						setTimeout(function() {
							$(".awardInfoList li").append(j);
							$(".showAwardBox").awardSlide({
								padding_right: "0.8rem"
							})
						}, 3500)
					} else {
						setTimeout(function() {
							$(".awardInfoList li").append(j);
							$(".showAwardBox").awardSlide({
								padding_right: "0.8rem"
							})
						}, 100)
					}
					$(".homeBtnBox").css("bottom", "3rem")
				}
			}
			if (!_manage) {
				if (f.dangerType == 0) {
					if (g_config.status == 3) {
						b.setGameEnd()
					}
				}
			}
			setTimeout(function() {
				var n = $(window).height() / $(window).width() < 1.575;
				var l = n ? $(window).width() * 1.575 : $(window).height();
				var m = g_config.showSkillSup ? 1 : 0;
				if (_manage) {
					$(".showAwardBox").css("top", (l - $(".bottomSkill").outerHeight() * m - $(".showAwardBox").outerHeight() - 2) / g_rem + "rem")
				} else {
					$(".showAwardBox").css("top", (l - $(".bottomSkill").outerHeight() * m - $(".showAwardBox").outerHeight()) / g_rem + "rem")
				}
				if (g_config.showSkillSup) {
					$(".showAwardBox").css("top", (l - $(".bottomSkill").outerHeight() * m - $(".showAwardBox").outerHeight() - 2) / g_rem + "rem")
				}
			}, 50);
			if (!g_config.showSlide) {
				$(".showAwardBox").hide()
			} else {
				if (!_manage) {
					$(".showAwardBox").addClass("footerBox")
				}
			}
		})
	};
	b.createQrImg = function(k, g) {
		try {
			var i = k.find(".QRImg_canvas")[0];
			var o = i.getContext("2d");
			var j = 0;
			i.width = 7.7 * g_rem;
			i.height = 16.5 * g_rem;
			var m = LF.setCanvasePixelRatio(o);
			i.style.height = i.height + "px";
			i.style.width = i.width + "px";
			i.width *= m;
			i.height *= m;
			o.beginPath();
			o.fillStyle = "#ffffff";
			o.fillRect(0, 0, 7.7 * g_rem, 16.5 * g_rem);
			var h = new Image();
			h.crossOrigin = "anonymous";
			h.src = _resRoot + "/image/caewm.jpg?v=201703311000";
			h.onload = function() {
				o.save();
				o.drawImage(h, 0, 0, 7.7 * g_rem, 15.8 * g_rem);
				o.restore();
				f();
				n()
			};

			function f() {
				j++;
				var p = g ? (j == 2) : (j == 1);
				if (p) {
					var e = i.toDataURL("image/jpeg", 8);
					k.find(".QRImg_canvas").hide();
					k.find(".QRImg_exportImg").attr("src", e).show()
				}
			}
			function n() {
				var e = new Image();
				e.crossOrigin = "anonymous";
				g = g.indexOf("http://") < 0 ? ("http://" + g) : g;
				e.src = g;
				e.onload = function() {
					var p = e.width / 20;
					var q = e.height / 20 * (7.7 / p);
					q = q < 7.7 ? 7.7 : q;
					o.save();
					o.drawImage(e, 0, 0, 7.7 * g_rem, q * g_rem);
					o.restore();
					f()
				}
			}
		} catch (l) {
			b.tlog("QRImg_canvas error", l)
		}
	};
	b.setStartBtnHeight = function(i, g) {
		var q = $(window).height();
		if (q === 0) {
			console.log("window高度为零！");
			setTimeout(function() {
				b.setStartBtnHeight(i, g)
			}, 20);
			return
		}
		typeof i === "undefined" && (i = g_config.showSlide);
		typeof g === "undefined" && (g = g_config.showSkillSup);
		var h = i ? 1 : 0;
		var j = g ? 1 : 0;
		var f = $(".bottomSkill").outerHeight() * j + $(".showAwardBox").outerHeight() * h;
		var r = $("#startBtnImg").parent();
		var o = $("#ruleImg");
		var p = $("#joinNumLine");
		var t = $("#drawInfo");
		var u = $(".homeBtnBox");
		var s = $("#gameTips");
		var e = parseInt(r.css("top")) + r.outerHeight();
		var n = parseInt(p.css("top")) + p.outerHeight();
		var m = parseInt(t.css("top")) + t.outerHeight();
		var l = parseInt(o.css("top")) + o.outerHeight();
		var k = parseInt(s.css("top")) + s.outerHeight();
		if (r.length > 0 && e > q - f) {
			r.css("top", (q - f - r.outerHeight() - 5) / g_rem + "rem")
		}
		if (o.length > 0 && l > q - f) {
			o.css("top", (q - f - o.outerHeight() - 5) / g_rem + "rem")
		}
		if (p.length > 0 && n > q - f) {
			p.css("top", (q - f - p.outerHeight() - 5) / g_rem + "rem")
		}
		if (t.length > 0 && m > q - f) {
			t.css("top", (q - f - t.outerHeight() - 5) / g_rem + "rem")
		}
		if (u.length > 0) {
			u.css("bottom", (f + 8) / g_rem + "rem")
		}
		if (s.length > 0 && k > q - f) {
			s.css("top", (q - f - s.outerHeight() - 5) / g_rem + "rem")
		}
		$("#limitRange").css("height", $(window).height() - f)
	};
	b.getSrc = function(e) {
		return e.replace("*_resRoot*", _resRoot)
	};
	b.setCookie = function(f, g, e) {
		var h = new Date();
		h.setDate(h.getDate() + e);
		document.cookie = f + "=" + escape(g) + ((e == null) ? "" : ";expires=" + h.toGMTString())
	};
	b.getCookie = function(e) {
		if (document.cookie.length > 0) {
			c_start = document.cookie.indexOf(e + "=");
			if (c_start != -1) {
				c_start = c_start + e.length + 1;
				c_end = document.cookie.indexOf(";", c_start);
				if (c_end == -1) {
					c_end = document.cookie.length
				}
				return unescape(document.cookie.substring(c_start, c_end))
			}
		}
		return ""
	};
	b.setLocalStorage = function(f, g, e) {
		if (!localStorage) {
			if (e) {
				b.setCookie(f, g, e)
			}
			b.log("不支持localStorage");
			return
		}
		localStorage.setItem(f, g)
	};
	b.getLocalStorage = function(f, e) {
		if (!localStorage) {
			if (e) {
				return b.getCookie(f)
			}
			b.log("不支持localStorage");
			return ""
		}
		return localStorage.getItem(f)
	};
	b.removeLocalStorage = function(f, e) {
		if (!localStorage) {
			if (e) {
				b.setCookie(f, "", -1)
			}
			b.log("不支持localStorage");
			return
		}
		localStorage.removeItem(f)
	};
	b.refresh = function() {
		window.location.reload()
	};
	b.noLoadingRefresh = function() {
		window.location.href = document.URL.indexOf("noLoading") >= 0 ? document.URL : (document.URL + (document.URL.indexOf("?") >= 0 ? "&" : "?") + "noLoading=fff")
	};
	b.isIPhone = function() {
		return window.navigator.userAgent.indexOf("iPhone") !== -1
	};
	b.IsPC = function() {
		var e = navigator.userAgent;
		var h = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"];
		var f = true;
		for (var g = 0; g < h.length; g++) {
			if (e.indexOf(h[g]) > 0) {
				f = false;
				break
			}
		}
		return f
	};
	b.getType = function(e) {
		return Object.prototype.toString.call(e).match(/\[object\s(\w+)]/)[1].toLowerCase()
	};
	b.changeTimeLimit = function(e) {
		if (!e || e == "[8]") {
			return "周一至周日"
		}
		var h = $.parseJSON(e);
		var j = "";
		for (var g = 0; g < h.length; g++) {
			var k = g,
				f = g;
			while (h[f + 1] == (h[f] + 1)) {
				f++
			}
			if (k == f) {
				j = j + (j ? "、" : "") + d(h[k])
			} else {
				j = j + (j ? "、" : "") + d(h[k]) + "至" + d(h[f])
			}
			g = f
		}
		return j
	};

	function d(e) {
		switch (e) {
		case 1:
			return "周一";
		case 2:
			return "周二";
		case 3:
			return "周三";
		case 4:
			return "周四";
		case 5:
			return "周五";
		case 6:
			return "周六";
		case 7:
			return "周日"
		}
		return ""
	}
	b.jointUrlArg = function(f, e) {
		if (e) {
			return f + (f.indexOf("?") >= 0 ? "&" : "?") + e
		} else {
			return f
		}
	};
	b.setUrlArg = function() {
		if (arguments.length < 2) {
			return
		}
		var f = arguments[0],
			j = Array.prototype.slice.call(arguments),
			e = [f],
			k = "";
		for (var g = 1; g < j.length; g++) {
			var h = j[g];
			if (b.getType(h) === "array") {
				e.push(h[0]);
				if (g > 1) {
					k += "&"
				}
				k += (h[0] + "=" + h[1])
			}
		}
		f = b.removeUrlArg.apply(b, e);
		return b.jointUrlArg(f, k)
	};
	b.removeUrlArg = function() {
		var h = Array.prototype.slice.call(arguments),
			e = h.length;
		if (e < 2) {
			return
		}
		var f = h[0];
		var i = f.split(/[?|&]/);
		var g = i.filter(function(l, j) {
			if (j === 0) {
				return false
			}
			var m = l.split("=")[0];
			for (var k = 1; k < h.length; k++) {
				if (m === h[k]) {
					h.splice(k, 1);
					return false
				}
			}
			return true
		}).join("&");
		f = b.jointUrlArg(i[0], g);
		return f
	};
	b.shuffle = function(g) {
		var f = g.length;
		for (var j = 0; j < f - 1; j++) {
			var e = Math.floor(Math.random() * (f - j));
			var h = g[e];
			g[e] = g[f - j - 1];
			g[f - j - 1] = h
		}
		return g
	};
	(function() {
		b.logStd = e(40, function(f, h) {
			try {
				h = h.slice(0, 2000)
			} catch (g) {}
			$.ajax({
				type: "post",
				url: g_config.ajaxUrl + "logJsErr_h.jsp?cmd=jsLogStd",
				data: {
					msg: "hgLog-" + f + " msg=" + h + " aid=" + g_config.aid + " gameId=" + g_config.gameId + " openId=" + g_config.openId
				},
			})
		});
		b.logErr = e(3, function(f, g) {
			$.ajax({
				type: "post",
				url: g_config.ajaxUrl + "logJsErr_h.jsp?cmd=jsLogErr",
				data: {
					msg: "hgErr-" + f + " msg=" + g + " aid=" + g_config.aid + " gameId=" + g_config.gameId + " openId=" + g_config.openId
				},
			})
		});

		function e(f, g) {
			return function(i, j, h) {
				if (typeof g[i] == "undefined") {
					g[i] = 0
				} else {
					g[i]++
				}
				if (typeof h == "undefined") {
					h = f
				}
				if (h > 0 && g[i] >= h) {
					return
				}
				g(i, j)
			}
		}
	}());
	b.logPhoneDog = function(e) {
		b.logDog(1000155, e + 1)
	};
	b.logDog = (function() {
		var f = null,
			e = [];
		return function(h, g) {
			if (g_config.testCMD.indexOf("oss") === -1 && (h !== 1000078 && h !== 1000155 && _manage)) {
				return
			}
			e.push(arguments);
			if (!f) {
				f = setTimeout(function() {
					if (e.length == 1) {
						b.logDogSynch.apply(b, e[0])
					} else {
						e = e.map(function(i, j) {
							var k = {
								id: i[0],
								src: i[1],
							};
							if (!isNaN(i[2])) {
								k.objId = i[2]
							}
							return k
						});
						b.logDogList(e)
					}
					f = null;
					e = []
				}, 0)
			}
		}
	})();
	b.logObjDog = function(g, e, f) {
		b.logDog(g, e, f)
	};
	b.logDogList = function(e) {
		$.ajax({
			type: "post",
			url: g_config.ajaxUrl + "log_h.jsp?cmd=dogList",
			data: {
				dogList: $.toJSON(e)
			},
		})
	};
	b.logDogSynch = function(h, f, g) {
		var e = isNaN(g) ? "" : "&objId=" + b.encodeUrl(g);
		$.ajax({
			type: "get",
			url: g_config.ajaxUrl + "log_h.jsp?cmd=dog&dogId=" + b.encodeUrl(h) + "&dogSrc=" + b.encodeUrl(f) + e,
		})
	};
	b.watch = (function() {
		var f;
		if (typeof _manage != "undefined" && _manage) {
			f = function() {
				return parent.Edit.getInjector()
			}
		}
		function e() {
			var g = {};

			function h(i, m, j) {
				var k = m;
				var l = g[i];
				if (c(j)) {
					j(m, k);
					h.add(i, j)
				} else {
					h.trigger(i, m, k)
				}
				a(l) && (l.last = m);
				return h
			}
			h.add = function(i, j) {
				if (!c(j)) {
					return
				}
				var k = g[i];
				if (!a(k)) {
					k = g[i] = {
						fns: {}
					}
				}
				k.fns[$.md5(j.toString())] = j;
				!g[i].watch && h.watchParent(i);
				return h
			};
			h.remove = function(i) {
				if (!g[i]) {
					return
				}
				g[i].watch && g[i].watch();
				delete g[i];
				return h
			};
			h.trigger = function(i, l, j) {
				var k = g[i];
				k && k.fns && $.each(k.fns, function(m, n) {
					n && n(l, j)
				});
				return h
			};
			h.watchParent = function(i) {
				if (f) {
					g[i].watch && g[i].watch();
					f().invoke(["watch", function(j) {
						g[i].watch = j(i, function(l, k) {
							h.trigger(i, l, k)
						})
					}])
				}
				return h
			};
			h.bind = function() {
				var i = Array.prototype.slice.call(arguments);
				$.each(i, function(j, k) {
					k[0] = new RegExp("\\{" + k[0] + "}", "g")
				});
				return function(k, l) {
					var j = k;
					$.each(i, function(o, p) {
						k = k.replace(p[0], p[1]);
						j = j.replace(p[0], "conf[" + o + "][2]")
					});
					try {
						var n = (new Function("conf", "return " + j + ";"))(i)
					} catch (m) {
						throw m
					}
					h(k, n, l)
				}
			};
			h.$new = e;
			return h
		}
		return e()
	})();
	b.bulletparam = {
		wxheadimg: true,
		loop: true,
		gutter: 34,
		autoplay: true,
		isScroll: true
	};
	b.initComment = function(e) {
		$.extend(b.bulletparam, e)
	};

	function c(e) {
		return b.getType(e) == "function"
	}
	function a(e) {
		return b.getType(e) == "object"
	}
})(HdGame);
HdGame.poupValidate = function(b) {
	if (!$("#spxdPage").hasClass("imp-hide")) {
		$("#spxdPage").addClass("imp-hide")
	}
	if ($("#valiteInputIframe").length == 0) {
		var a = g_config.ajaxUrl.replace("/ajax/", "");
		$("#validteBoxerBg").data("_theCallBack", b).show();
		$("#validteBoxerBg").append('<iframe id="valiteInputIframe" frameborder="0" scrolling="no" src="' + a + '/poupvalite.jsp" style="height: 25rem; width: 100%;"></iframe>')
	} else {
		$("#validteBoxerBg").data("_theCallBack", b).show()
	}
};
var CUtil = (function() {
	var c = function(e, d) {
			if (d == null) {
				d = e;
				e = 0
			}
			return e + Math.floor(Math.random() * (d - e + 1))
		};
	var a = function(l) {
			var j, d;
			var h = l[0].toUpperCase() + l.slice(1),
				m = ["webkit", "moz", "MS", "ms", "o", ""];
			var e = document.createElement("div"),
				f = e.style;
			var g = 0,
				k = m.length;
			while (g < k) {
				j = m[g];
				d = (j) ? j + h : l;
				if (d in f) {
					return j ? ("-" + j + "-") : ""
				}
				g++
			}
			return undefined
		};
	var b = {
		random: c,
		prefixed: a
	};
	return b
})();
var Comment = (function() {
	var a = HdGame.bulletparam;

	function b(f, d) {
		if (!f || f == "") {
			return
		}
		HdGame.initComment();
		var c = a.lineStyle ? a.lineStyle.splice(0, 1) : "";
		var g = (d * 1.5 + 0.13) + "rem",
			e = '<div class="hdCommentLine" style="top:' + g + ";" + c + '"><div class="hdComment">';
		f.forEach(function(i, h) {
			var j = i.headImg ? "background:url(" + i.headImg + ")  no-repeat #fff;background-size: cover;" : "";
			e += '<div class="hdCommentFloat"><div class="hdCommHeadImg"><span class="hdCommPortrait"  style="' + j + '"></span></div><div class="hdCommContent">' + i.content + "</div></div>"
		});
		e += "</div>";
		if (a.loop) {
			e += '<div class="hdComment">';
			f.forEach(function(i, h) {
				var j = i.headImg ? "background:url(" + i.headImg + ")  no-repeat #fff;background-size: cover;" : "";
				e += '<div class="hdCommentFloat"><div class="hdCommHeadImg"><span class="hdCommPortrait"  style="' + j + '"></span></div><div class="hdCommContent">' + i.content + "</div></div>"
			});
			e += "</div>"
		}
		e += "</div>";
		this.$dom = $(e);
		this.top = g
	}
	b.SPEEDS = [5, 6, 6.5].map(function(c) {
		return $(window).width() / c
	});
	b.prototype.winW = $(window).width();
	b.prototype.reset = function(e) {
		var d = CUtil.random;
		var j = this.winW;
		var l = parseInt(j) + 20;
		var i = 80;
		var k = b.SPEEDS.splice(d(0, b.SPEEDS.length - 1), 1)[0];
		this.v = k ? k : (j / 6);
		var m = this.$dom.find(".hdCommentFloat"),
			h = 0;
		for (var g = 0, f = m.length; g < f; g++) {
			h += Math.ceil(m.width()) + parseInt(m.css("margin-right")) + 50
		}
		if (h < j) {
			h = j
		}
		h = h + (l + i) * 2;
		this.v = (h / 2 + l + i) / this.v;
		var c = this.$dom.find(".hdComment");
		if (a.isScroll) {
			c.eq(0).addClass("hdCommentAnimate");
			c.css({
				"padding-left": l + "px",
				"padding-right": i + "px",
				"animation-duration": this.v + "s",
				"-webkit-animation-duration": this.v + "s"
			});
			setTimeout(function() {
				c.eq(1).addClass("hdCommentAnimate")
			}, (this.v / 2) * 1000)
		}
		c.css({
			width: "50%"
		});
		this.$dom[0].style.top = this.top + "px";
		this.$dom[0].style.width = h + "px";
		this.boundsWidth = j + this.$dom[0].offsetWidth
	};
	return b
})();
var CView = (function() {
	var b = HdGame.bulletparam;

	function a(d) {
		this.eachCommListLen = this.eachCommListLen2 = 0;
		this.VIEW_LINE = [1, 2, 3];
		this.comments = [];
		var c = this;
		this.initCommentBase(c, d);
		if (b.autoplay) {
			$("#hdCommentPanel .replayInput").focus();
			c.$comm_page.hide();
			c.$comm_noshow.hide();
			c.stopAnimation && c.stopAnimation()
		} else {
			c.$comm_show.show()
		}
	}
	a.prototype.initCommentBase = function(c, e) {
		if (e) {
			e = $(e)
		} else {
			e = $("body")
		}
		if ($("#hdCommentOperation").length > 0) {
			return
		}
		var d = '<section id="hdCommentPanel" class="hdCommentPanel"><div class="hdCommentPage"></div></section>';
		e.append(d);
		c.$comm_page = $("#hdCommentPanel .hdCommentPage");
		c.$comm_operation = $("#hdCommentOperation");
		c.$comm_show = $("#hdCommentOperation .commmentShow");
		c.$comm_noshow = $("#hdCommentOperation .commmentNoShow")
	};
	a.prototype.initData = function(d) {
		var e = document.createDocumentFragment(),
			f, c;
		if (d.bulletList.length > d.VIEW_LINE.length) {
			d.VIEW_LINE.forEach(function(i, h) {
				i = d.getSliceData(d);
				f = new Comment(i, h);
				if (!f.$dom) {
					return
				}
				c = f.$dom;
				d.comments.push(f);
				e.appendChild(c[0])
			})
		} else {
			d.VIEW_LINE.forEach(function(i, h) {
				i = d.bulletList.splice(0, 1);
				f = new Comment(i, h);
				if (!f.$dom) {
					return
				}
				c = f.$dom;
				d.comments.push(f);
				e.appendChild(c[0])
			})
		}
		d.$comm_page.append(e);
		d.comments.forEach(function(i, h) {
			i.reset(h)
		});
		if (d.comments.length - 1 > -1) {
			var g = d.comments[d.comments.length - 1].top + d.comments[d.comments.length - 1].$dom.height();
			d.$comm_page.css("height", g + "px")
		}
		d.show()
	};
	a.prototype.getSliceData = function(c) {
		if (!c.bulletList || c.bulletList.length === 0) {
			return
		}
		if (c.eachCommListLen == 0) {
			c.eachCommListLen = Math.floor(c.bulletList.length / c.VIEW_LINE.length) ? Math.floor(c.bulletList.length / c.VIEW_LINE.length) : 1;
			c.eachCommListLen2 = c.bulletList.length % c.VIEW_LINE.length
		}
		var d;
		if (c.eachCommListLen2 > 0) {
			d = c.bulletList.splice(0, c.eachCommListLen + 1);
			c.eachCommListLen2--
		} else {
			d = c.bulletList.splice(0, c.eachCommListLen)
		}
		return d
	};
	a.prototype.getData = function(d, c) {
		c.$comm_page.show();
		c.bulletList = d
	};
	a.prototype.show = function(c) {
		if (this.isActive) {
			return
		}
		this.$comm_page.addClass("show");
		this.isActive = true
	};
	a.prototype.hide = function() {
		var c = this;
		c.$comm_page.removeClass("show");
		this.isActive = false;
		this.stopAnimation && this.stopAnimation()
	};
	return a
})();
var PlayInfo = (function() {
	var h = 0;
	var d = 0;
	var a = 5;
	var j = a;
	var b = 10;
	var m = false;

	function o(v, u, t, q, s, r) {
		h = v;
		d = u;
		a = t;
		j = q;
		b = s;
		m = r;
		p()
	}
	function e() {
		var q = a - h;
		return q > 0 ? q : 0
	}
	function c() {
		if (!m) {
			return 100
		}
		var q = b - d;
		return q > 0 ? q : 0
	}
	function l(q) {
		h += q;
		d += q;
		p()
	}
	function i(q) {
		a += q;
		b += q;
		p()
	}
	function f(q) {
		a = q;
		p()
	}
	function k(q) {
		j = q;
		p()
	}
	function g(q) {
		b = q;
		p()
	}
	function n(q) {
		m = q;
		p()
	}
	function p() {
		$(".todayPlayCount").text(e());
		$(".totalPlayCount").text(c());
		$(".playTimesLimit").text(a);
		$(".playTimesLimitShow").text(j);
		$(".playTotalLimit").text(b);
		if (m) {
			$(".dayPlayHint").hide();
			$(".totalPlayHint").show();
			$(".dayPlayHint4Total").show();
			$(".playTotalFont").show()
		} else {
			$(".dayPlayHint").show();
			$(".totalPlayHint").hide();
			$(".dayPlayHint4Total").hide();
			$(".playTotalFont").hide()
		}
	}
	return {
		initData: o,
		getTodayRemainTimes: e,
		getTotalRemainTimes: c,
		addPlayTimes: l,
		addPlayTimesLimit: i,
		setPlayTimesLimit: f,
		setPlayTimesLimitShow: k,
		setPlayTotalLimit: g,
		setLimitPlay: n
	}
})();
HdGame.filterAward = function(a, c) {
	if (typeof c === "undefined") {
		c = 0
	}
	var d = a.awardList;
	d.push(a.comfort);
	var b = [];

	function e(f) {
		switch (f) {
		case 1:
			return "奖项一";
			break;
		case 2:
			return "奖项二";
			break;
		case 3:
			return "奖项三";
			break;
		case 4:
			return "奖项四";
			break;
		case 5:
			return "奖项五";
			break;
		case 6:
			return "奖项六";
			break;
		case 7:
			return "奖项七";
			break;
		case 8:
			return "奖项八";
			break;
		case 900:
		default:
			return "安慰奖";
			break
		}
	}
	switch (c) {
	case 0:
		$.each(d, function(g, h) {
			var f = {};
			f.from = "#resule-gift-sucImg";
			f.limit = "5000k";
			f.title = e(h.level);
			f.defSrc = a.theDefaultGiftImgSrc;
			if (g + 1 >= d.length) {
				if (!a.openComfort) {
					f.hide = true
				}
			} else {
				if ((g + 1) > a.awardNum) {
					f.hide = true
				}
			}
			b.push(f)
		})
	}
	return b
};
HdGame.showLoadToast = function(b, a) {
	if (a) {
		setTimeout(function() {
			parent.$("#loadingToast .weui-toast__content").text(b);
			parent.$("#loadingToast").removeClass("hide")
		}, a)
	} else {
		parent.$("#loadingToast .weui-toast__content").text(b);
		parent.$("#loadingToast").removeClass("hide")
	}
};
HdGame.hideLoadToast = function(a) {
	if (a) {
		setTimeout(function() {
			parent.$("#loadingToast").addClass("hide")
		}, a)
	} else {
		parent.$("#loadingToast").addClass("hide")
	}
};
HdGame.appendMusicIcon = function() {
	var a = $("body").data("hd-initHdGameJsfootArg");
	if (!a) {
		return
	}
	if (g_config.style == 55) {
		$(".gameBgBox").append('<div class="' + (_manage ? "" : "soundIconOff ") + "soundIcon" + (hg.sound.list[0].optFlag != 1 ? "" : " soundIconHide") + '" style="z-index:90"></div>');
		$('.gameBgBox .soundIcon:not(".soundIconPlay")').css({
			left: a.soundIcon_l,
			top: a.soundIcon_t
		});
		$('.home .soundIcon:not(".soundIconPlay")').hide()
	} else {
		if (g_config.style == 49) {
			$(".body").append('<div class="' + (_manage ? "" : "soundIconOff ") + "soundIcon" + (hg.sound.list[0].optFlag != 1 ? "" : " soundIconHide") + '" style="z-index:100"></div>');
			$('.body .soundIcon:not(".soundIconPlay")').css({
				left: a.soundIcon_l,
				top: a.soundIcon_t,
			})
		} else {
			$(".home").add(".gameBgBox").append('<div class="' + (_manage ? "" : "soundIconOff ") + "soundIcon" + (hg.sound.list[0].optFlag != 1 ? "" : " soundIconHide") + '" style="z-index:100"></div>');
			$('.home .soundIcon:not(".soundIconPlay")').css({
				left: a.soundIcon_l,
				top: a.soundIcon_t
			})
		}
	}
	$("body").removeData("hd-initHdGameJsfootArg")
};
HdGame.getTargetSize = function(a, b) {
	if (typeof a === "undefined" || typeof b === "undefined") {
		return
	}
};